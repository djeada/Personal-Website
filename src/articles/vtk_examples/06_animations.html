<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Animations and Time-Varying Data</title>
    <meta content="VTK offers a set of tools to create animations and visualize time-varying data." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper">
        <section id="article-body">
            <div class="article-action-buttons"><button class="btn-suggest-edit" title="Suggest Edit">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M4 21h4l11-11-4-4L4 17v4z" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button><button class="btn-create-issue" title="Create Issue">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                        <line stroke="currentColor" stroke-width="2" x1="12" x2="12" y1="8" y2="12"></line>
                        <circle cx="12" cy="16" fill="currentColor" r="1"></circle>
                    </svg>
                </button><button class="btn-download" title="Download">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M12 5v14m0 0l-6-6m6 6l6-6" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button></div>
            <p style="text-align: right;"><i>Last modified: April 25, 2025</i></p>
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="animations-and-time-varying-data">Animations and Time-Varying Data</h2>
            <p>VTK offers a set of tools to create animations and visualize time-varying data. This is particularly useful in scenarios such as:</p>
            <ol>
                <li>Keyframe Animation</li>
                <li>Temporal Data Visualization</li>
                <li>Animation Export</li>
            </ol>
            <h3 id="keyframe-animation">Keyframe Animation</h3>
            <p>Keyframe animation is a technique used to create smooth transitions between different states of a visualization. This approach is particularly beneficial for visual storytelling or creating explanatory visualizations, where the evolution of data over time needs to be clearly communicated.</p>
            <h4 id="core-concepts">Core Concepts</h4>
            <p>The core classes involved in keyframe animation using VTK (Visualization Toolkit) are:</p>
            <ul>
                <li><code>vtkAnimationCue</code>: Represents an individual animation sequence with defined start and end times. An animation cue controls how a particular property of an object changes over a specified period.</li>
                <li><code>vtkAnimationScene</code>: Manages multiple animation cues and orchestrates the overall animation playback. It handles the timing and sequencing of various animation cues to create a cohesive animation.</li>
            </ul>
            <h4 id="basic-workflow">Basic Workflow</h4>
            <ol>
                <li>Set up the animation scene by creating an instance of <code>vtkAnimationScene</code>, and configuring its playback mode, loop setting, and frame rate.</li>
                <li>Create animation cues for each property you want to animate by making an instance of <code>vtkAnimationCue</code>, and defining the start and end times for each cue.</li>
                <li>Add the animation cues to the scene by including each <code>vtkAnimationCue</code> in the <code>vtkAnimationScene</code>.</li>
                <li>Define callbacks to update the properties of the visual objects at each frame of the animation.</li>
            </ol>
            <h4 id="example-animating-a-sphere-s-radius">Example: Animating a Sphere's Radius</h4>
            <p>Below is an example demonstrating how to animate a sphere's radius using VTK. This example sets up an animation scene, creates a cue for the sphere's radius, and defines the necessary callbacks to update the radius over time.</p>
            <p>
            <div>
                <pre><code class="language-python">import vtk

# Create a sphere
sphereSource = vtk.vtkSphereSource()
sphereSource.SetRadius(5)
sphereSource.SetPhiResolution(30)
sphereSource.SetThetaResolution(30)

# Create a mapper and actor
mapper = vtk.vtkPolyDataMapper()
mapper.SetInputConnection(sphereSource.GetOutputPort())
actor = vtk.vtkActor()
actor.SetMapper(mapper)

# Create a renderer, render window, and interactor
renderer = vtk.vtkRenderer()
renderWindow = vtk.vtkRenderWindow()
renderWindow.AddRenderer(renderer)
renderWindowInteractor = vtk.vtkRenderWindowInteractor()
renderWindowInteractor.SetRenderWindow(renderWindow)

# Add the actor to the scene
renderer.AddActor(actor)
renderer.SetBackground(0.1, 0.2, 0.4)  # Background color

# Set up the animation scene
animationScene = vtk.vtkAnimationScene()
animationScene.SetModeToSequence()
animationScene.SetLoop(0)  # No looping
animationScene.SetFrameRate(60)
animationScene.SetStartTime(0)
animationScene.SetEndTime(2)  # Ensuring the scene's end time matches the cue's end time

# Define the callback to update the sphere's radius
def update_radius(caller, event):
    cue = caller
    t = cue.GetAnimationTime()
    new_radius = 5 + 5 * t  # Example: linearly increase radius over time
    sphereSource.SetRadius(new_radius)
    renderWindow.Render()

# Set up an animation cue for the radius
radiusCue = vtk.vtkAnimationCue()
radiusCue.SetStartTime(0)
radiusCue.SetEndTime(2)
radiusCue.AddObserver(vtk.vtkCommand.AnimationCueTickEvent, update_radius)
animationScene.AddCue(radiusCue)

# Initialize the interactor and start the animation
renderWindow.Render()
animationScene.Play()
renderWindowInteractor.Start()</code></pre>
            </div>
            </p>
            <p>In this example:</p>
            <ul>
                <li>A sphere is created using <code>vtkSphereSource</code>.</li>
                <li>A mapper and actor are set up to render the sphere.</li>
                <li>An <code>vtkAnimationScene</code> is created and configured.</li>
                <li>An <code>vtkAnimationCue</code> is created for animating the sphere's radius over a 2-second period.</li>
                <li>A callback function <code>update_radius</code> is defined to update the sphere's radius based on the animation time.</li>
                <li>The animation cue is added to the animation scene.</li>
                <li>Finally, the animation is played, and the render window interactor is started.</li>
            </ul>
            <h2 id="temporal-data-visualization">Temporal Data Visualization</h2>
            <p>Temporal data visualization involves displaying data that varies over time. This technique is particularly useful for visualizing simulations, time-series data, or dynamic systems, providing insights into how data evolves and changes across different time steps.</p>
            <h3 id="core-classes-and-concepts">Core Classes and Concepts</h3>
            <p>The main classes used for temporal data visualization in VTK (Visualization Toolkit) are:</p>
            <ul>
                <li><code>vtkTemporalDataSet</code>: Represents a collection of datasets associated with different time steps. This class allows for organizing and managing temporal data effectively.</li>
                <li><code>vtkTemporalInterpolator</code>: Interpolates between datasets at different time steps to create smooth transitions. This is essential for creating fluid animations and seamless visual transitions.</li>
            </ul>
            <h3 id="basic-workflow">Basic Workflow</h3>
            <ol>
                <li>Load temporal data using appropriate readers to import the datasets.</li>
                <li>Set up data interpolation (optional) to ensure smooth transitions between time steps by configuring a temporal interpolator.</li>
                <li>Create a mapper and actor to visualize the data effectively.</li>
                <li>Render the scene and animate through the time steps to visualize the temporal data.</li>
            </ol>
            <h3 id="example-loading-and-visualizing-a-temporal-dataset">Example: Loading and Visualizing a Temporal Dataset</h3>
            <p>Below is an example demonstrating how to load and visualize a temporal dataset using VTK. This example involves reading a temporal dataset, setting up a mapper and actor, and rendering the data.</p>
            <p>
            <div>
                <pre><code class="language-python">import vtk

# Load temporal dataset
reader = vtk.vtkXMLMultiBlockDataReader()
reader.SetFileName("data.vtm")
reader.Update()

# Optionally set up a temporal interpolator for smooth transitions
interpolator = vtk.vtkTemporalInterpolator()
interpolator.SetInputConnection(reader.GetOutputPort())

# Create a mapper and actor
mapper = vtk.vtkCompositePolyDataMapper2()
mapper.SetInputConnection(interpolator.GetOutputPort())
actor = vtk.vtkActor()
actor.SetMapper(mapper)

# Create a renderer, render window, and interactor
renderer = vtk.vtkRenderer()
renderWindow = vtk.vtkRenderWindow()
renderWindow.AddRenderer(renderer)
renderWindowInteractor = vtk.vtkRenderWindowInteractor()
renderWindowInteractor.SetRenderWindow(renderWindow)

# Add the actor to the scene
renderer.AddActor(actor)
renderer.SetBackground(0.1, 0.2, 0.4)  # Background color

# Initialize and start the render window interactor
renderWindow.Render()
renderWindowInteractor.Initialize()

# Set up animation for the temporal data
animationScene = vtk.vtkAnimationScene()
animationScene.SetModeToSequence()
animationScene.SetLoop(1)  # Loop the animation
animationScene.SetFrameRate(24)  # 24 frames per second

# Define the callback to update the time step
def update_time_step(caller, event):
    time_cue = caller
    time_step = int(time_cue.GetAnimationTime() * reader.GetNumberOfTimeSteps())
    reader.SetTimeStep(time_step)
    renderWindow.Render()

# Set up an animation cue for the time steps
timeCue = vtk.vtkAnimationCue()
timeCue.SetStartTime(0)
timeCue.SetEndTime(reader.GetNumberOfTimeSteps() / 24)
timeCue.AddObserver(vtk.vtkCommand.AnimationCueTickEvent, update_time_step)
animationScene.AddCue(timeCue)

# Play the animation
animationScene.Play()
renderWindowInteractor.Start()</code></pre>
            </div>
            </p>
            <p>In this example:</p>
            <ul>
                <li>A temporal dataset is loaded using <code>vtkXMLMultiBlockDataReader</code>.</li>
                <li>An optional <code>vtkTemporalInterpolator</code> is set up to create smooth transitions between time steps.</li>
                <li>A mapper and actor are created to visualize the data.</li>
                <li>A renderer, render window, and interactor are initialized.</li>
                <li>An animation scene is set up to handle the temporal data animation.</li>
                <li>A callback function <code>update_time_step</code> is defined to update the dataset based on the current time step.</li>
                <li>An animation cue is created to manage the animation timing.</li>
                <li>The animation is played, and the render window interactor is started.</li>
            </ul>
            <h2 id="animation-export">Animation Export</h2>
            <p>Animation export involves saving an animation as a video or image sequence. This capability is crucial for sharing animations with others or for viewing them offline. It allows for easy distribution and playback of visualizations created in VTK (Visualization Toolkit).</p>
            <h3 id="core-classes-and-concepts">Core Classes and Concepts</h3>
            <p>The main classes used for exporting animations in VTK are:</p>
            <ul>
                <li><code>vtkWindowToImageFilter</code>: Captures the contents of a render window as an image. This class is essential for converting the rendered scene into a format suitable for saving.</li>
                <li><code>vtkAVIWriter</code>, <code>vtkOggTheoraWriter</code>, <code>vtkFFMPEGWriter</code>: These classes save image sequences as video files in different formats. They provide the functionality to encode and write video files.</li>
            </ul>
            <h3 id="basic-workflow">Basic Workflow</h3>
            <ol>
                <li>Capture the render window using <code>vtkWindowToImageFilter</code> to save the current state of the render window as an image.</li>
                <li>Set up a writer by choosing an appropriate one (<code>vtkAVIWriter</code>, <code>vtkOggTheoraWriter</code>, <code>vtkFFMPEGWriter</code>, etc.) to save the captured images as a video file.</li>
                <li>Write the images or compile them into a video file using the chosen writer.</li>
            </ol>
            <h3 id="example-capturing-a-render-window-as-an-image">Example: Capturing a Render Window as an Image</h3>
            <p>Below is an example demonstrating how to capture the current render window as an image and save it using <code>vtkPNGWriter</code>.</p>
            <p>
            <div>
                <pre><code class="language-python">import vtk

# Set up the render window and renderer
renderWindow = vtk.vtkRenderWindow()
renderer = vtk.vtkRenderer()
renderWindow.AddRenderer(renderer)

# Add an example actor to the scene
sphereSource = vtk.vtkSphereSource()
sphereMapper = vtk.vtkPolyDataMapper()
sphereMapper.SetInputConnection(sphereSource.GetOutputPort())
sphereActor = vtk.vtkActor()
sphereActor.SetMapper(sphereMapper)
renderer.AddActor(sphereActor)
renderer.SetBackground(0.1, 0.2, 0.4)  # Background color

# Render the scene
renderWindow.Render()

# Set up window to image filter
windowToImageFilter = vtk.vtkWindowToImageFilter()
windowToImageFilter.SetInput(renderWindow)
windowToImageFilter.Update()

# Write the image to a file
writer = vtk.vtkPNGWriter()
writer.SetFileName("screenshot.png")
writer.SetInputConnection(windowToImageFilter.GetOutputPort())
writer.Write()</code></pre>
            </div>
            </p>
            <h3 id="example-exporting-an-animation-to-a-video-file">Example: Exporting an Animation to a Video File</h3>
            <p>Below is an example demonstrating how to capture a series of frames and export them as a video file using <code>vtkFFMPEGWriter</code>.</p>
            <p>
            <div>
                <pre><code class="language-python">import vtk

# Set up the render window and renderer
renderWindow = vtk.vtkRenderWindow()
renderer = vtk.vtkRenderer()
renderWindow.AddRenderer(renderer)

# Add an example actor to the scene
sphereSource = vtk.vtkSphereSource()
sphereMapper = vtk.vtkPolyDataMapper()
sphereMapper.SetInputConnection(sphereSource.GetOutputPort())
sphereActor = vtk.vtkActor()
sphereActor.SetMapper(sphereMapper)
renderer.AddActor(sphereActor)
renderer.SetBackground(0.1, 0.2, 0.4)  # Background color

# Render the scene
renderWindow.Render()

# Set up window to image filter
windowToImageFilter = vtk.vtkWindowToImageFilter()
windowToImageFilter.SetInput(renderWindow)

# Set up video writer
videoWriter = vtk.vtkFFMPEGWriter()
videoWriter.SetFileName("animation.mp4")
videoWriter.SetInputConnection(windowToImageFilter.GetOutputPort())
videoWriter.Start()

# Animate the scene and capture frames
for i in range(100):
    # Update the scene (example: rotate the sphere)
    sphereActor.RotateX(1)
    sphereActor.RotateY(1)
    renderWindow.Render()
    windowToImageFilter.Modified()
    videoWriter.Write()

# Finalize the video file
videoWriter.End()</code></pre>
            </div>
            </p>
            <p>In these examples:</p>
            <ul>
                <li>The render window's contents are captured and saved as a PNG image.</li>
                <li>A series of frames are captured while animating the scene, and these frames are compiled into an MP4 video file using <code>vtkFFMPEGWriter</code>.</li>
            </ul>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#animations-and-time-varying-data">Animations and Time-Varying Data</a>
                    <ol>
                        <li><a href="#keyframe-animation">Keyframe Animation</a>
                            <ol>
                                <li><a href="#core-concepts">Core Concepts</a></li>
                                <li><a href="#basic-workflow">Basic Workflow</a></li>
                                <li><a href="#example-animating-a-sphere-s-radius">Example: Animating a Sphere's Radius</a></li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li><a href="#temporal-data-visualization">Temporal Data Visualization</a>
                    <ol>
                        <li><a href="#core-classes-and-concepts">Core Classes and Concepts</a></li>
                        <li><a href="#basic-workflow">Basic Workflow</a></li>
                        <li><a href="#example-loading-and-visualizing-a-temporal-dataset">Example: Loading and Visualizing a Temporal Dataset</a></li>
                    </ol>
                </li>
                <li><a href="#animation-export">Animation Export</a>
                    <ol>
                        <li><a href="#core-classes-and-concepts">Core Classes and Concepts</a></li>
                        <li><a href="#basic-workflow">Basic Workflow</a></li>
                        <li><a href="#example-capturing-a-render-window-as-an-image">Example: Capturing a Render Window as an Image</a></li>
                        <li><a href="#example-exporting-an-animation-to-a-video-file">Example: Exporting an Animation to a Video File</a></li>
                    </ol>
                </li>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/01_data_types_and_structures.html">Data Types and Structures</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/02_filters_and_algorithms.html">Filters and Algorithms</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/03_input_and_output.html">Input and Output</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/04_visualization_techniques.html">Visualization Techniques</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/05_interactivity.html">Interactivity</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/06_animations.html">Animations</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/07_performance_optimization_and_parallelism.html">Performance Optimization and Parallelism</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/08_integration_with_other_tools.html">Integration with Other Tools</a></li>
                    <li><a href="https://adamdjellouli.com/articles/vtk_examples/09_custom_filters_and_algorithms.html">Custom Filters and Algorithms</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
    <div id="pdf-spinner-overlay">
        <div class="spinner"></div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>