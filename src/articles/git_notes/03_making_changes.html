<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Staging, Committing, and Undoing Actions</title>
    <meta content="At the core of Git are a few fundamental actions: staging changes, committing those changes, and, when necessary, undoing certain actions." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper">
        <section id="article-body">
            <div class="article-action-buttons"><button class="btn-suggest-edit" title="Suggest Edit">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M4 21h4l11-11-4-4L4 17v4z" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button><button class="btn-create-issue" title="Create Issue">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                        <line stroke="currentColor" stroke-width="2" x1="12" x2="12" y1="8" y2="12"></line>
                        <circle cx="12" cy="16" fill="currentColor" r="1"></circle>
                    </svg>
                </button><button class="btn-download" title="Download">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M12 5v14m0 0l-6-6m6 6l6-6" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button></div>
            <p style="text-align: right;"><i>Last modified: October 01, 2021</i></p>
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="staging-committing-and-undoing-actions">Staging, Committing, and Undoing Actions</h2>
            <p>At the core of Git are a few fundamental actions: staging changes, committing those changes, and, when necessary, undoing certain actions. These notes provide a clear overview of these basic operations and some common scenarios where they are used.</p>
            <p>Understanding these actions is important for effective version control. Proper staging ensures that only the desired changes are included in a commit, committing records the project's state at specific points, and knowing how to undo actions allows for correcting mistakes during development.</p>
            <h3 id="staging-files">Staging Files</h3>
            <p>To prepare changes for a commit, we "stage" them. Staging involves selecting which changes in your working directory you want to include in your next commit. The staging area, also known as the index, acts as an intermediary between your working directory and your repository (commit history).</p>
            <p>Staging is a critical step because it allows you to organize your changes logically before recording them. By carefully selecting which changes to stage, you can create more meaningful and manageable commit histories, making it easier to track and understand project evolution.</p>
            <p>
            <div>
                <pre><code class="language-shell">+--------------+    +--------------+     +-------------------+
|              |    |              |     |                   |
| Working      |    | Staging      |     | Repository        |
| Directory    |    | Area (Index) |     | (Commit History)  |
|              |    |              |     |                   |
|  (Changes)   | -&gt; | (Changes to  | -&gt;  | (Commits)         |
|              |    | be committed)|     |                   |
+--------------+    +--------------+     +-------------------+</code></pre>
            </div>
            </p>
            <p>Here's how to stage files:</p>
            <p>I. <strong>Stage a Specific File:</strong></p>
            <p>To stage a specific file, use the <code>git add</code> command followed by the file name. This tells Git to include the changes made to this file in the next commit.</p>
            <p>
            <div>
                <pre><code class="language-bash">git add filename</code></pre>
            </div>
            </p>
            <p>Example: If you modified a file named <code>index.html</code>, you would stage it with:</p>
            <p>
            <div>
                <pre><code class="language-bash">git add index.html</code></pre>
            </div>
            </p>
            <p>Staging individual files is useful when you want to commit changes selectively, ensuring that unrelated modifications are kept separate for clarity.</p>
            <p>II. <strong>Stage All Changed Files:</strong></p>
            <p>If you want to stage all the changes you made across multiple files, you can use the <code>git add .</code> command. The period <code>.</code> is a wildcard that tells Git to stage changes from the current directory and all its subdirectories.</p>
            <p>
            <div>
                <pre><code class="language-bash">git add .</code></pre>
            </div>
            </p>
            <p>Example: If you modified several files and you want to stage all of them at once, simply run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git add .</code></pre>
            </div>
            </p>
            <p>Staging all changes at once is efficient when you're confident that all modifications are related and should be committed together.</p>
            <h3 id="unstaging-files">Unstaging Files</h3>
            <p>If you've staged changes but haven't committed them, you can unstage them. This can be useful if you change your mind about what should be included in the next commit.</p>
            <p>Unstaging allows you to refine your staged changes, ensuring that only the appropriate modifications are recorded. It provides flexibility to adjust your commits before finalizing them.</p>
            <p>I. <strong>Unstage a Specific File (but Keep Changes):</strong></p>
            <p>To unstage a specific file but keep the changes in the working directory, use the <code>git reset</code> command followed by the file name. This removes the file from the staging area.</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset filename</code></pre>
            </div>
            </p>
            <p>Example: If you previously staged <code>index.html</code> but now want to unstage it, run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset index.html</code></pre>
            </div>
            </p>
            <p>This is helpful when you realize that a particular file shouldn't be part of the current commit and needs further modifications.</p>
            <p>II. <strong>Revert Everything to the State of the Last Commit:</strong></p>
            <p>If you want to discard all changes and revert everything in the working directory and staging area to match the last commit, use the <code>git reset --hard</code> command. This will remove all uncommitted changes, so use it with caution.</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset --hard</code></pre>
            </div>
            </p>
            <p>Example: To discard all changes and revert to the last commit, run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset --hard</code></pre>
            </div>
            </p>
            <p>This command is useful when you need to completely abandon your current work and return to a known good state.</p>
            <h3 id="committing-files">Committing Files</h3>
            <p>Commits in Git are akin to saving the state of your project at a particular point in time. A commit captures the current state of your project and associates it with a message that describes the changes made since the last commit. Each commit is uniquely identified by a SHA-1 hash, and you can use the <code>git checkout</code> command to revert to a previous state of your project.</p>
            <p>Commits form the backbone of your project's history, allowing you to track progress, understand changes, and collaborate effectively with others.</p>
            <p>
            <div>
                <pre><code class="language-shell">+----------+
|  commit  |
|   hash   | A unique identifier (SHA-1 hash) for the commit.
+----------+
|  author  | The person who authored the commit.
|  date    | The date and time the commit was made.
+----------+
| message  | A brief description of the changes made in the commit.
+----------+
| changes  | The actual changes made to the files.
+----------+</code></pre>
            </div>
            </p>
            <p>Here's how to commit files:</p>
            <p>I. <strong>Commit All Staged Files with a Message:</strong></p>
            <p>To commit the changes you have staged, use the <code>git commit</code> command with the <code>-m</code> option followed by a descriptive message. This message should succinctly describe what changes have been made.</p>
            <p>
            <div>
                <pre><code class="language-bash">git commit -m "Your descriptive commit message"</code></pre>
            </div>
            </p>
            <p>Example: If you added a new feature, you might write:</p>
            <p>
            <div>
                <pre><code class="language-bash">git commit -m "Added new feature to enhance user interface"</code></pre>
            </div>
            </p>
            <p>A clear commit message is essential for maintaining a readable and understandable project history, especially when collaborating with others.</p>
            <p>II. <strong>Push Your Commits to a Remote Repository (like GitHub):</strong></p>
            <p>After committing your changes locally, you often need to push them to a remote repository to share them with others or back them up. Use the <code>git push</code> command to accomplish this.</p>
            <p>
            <div>
                <pre><code class="language-bash">git push</code></pre>
            </div>
            </p>
            <p>Example: To push changes to the main branch of your remote repository:</p>
            <p>
            <div>
                <pre><code class="language-bash">git push origin main</code></pre>
            </div>
            </p>
            <p>Pushing commits ensures that your work is stored remotely, enabling collaboration and safeguarding against data loss.</p>
            <p>III. <strong>Go Back to a Previous State Captured in a Specific Commit:</strong></p>
            <p>If you need to revert your project to a previous state, use the <code>git checkout</code> command followed by the commit ID. This command allows you to explore the project as it was at that specific commit.</p>
            <p>
            <div>
                <pre><code class="language-bash">git checkout commit_id</code></pre>
            </div>
            </p>
            <p>Example: If the commit ID is <code>a1b2c3d4</code>, you would use:</p>
            <p>
            <div>
                <pre><code class="language-bash">git checkout a1b2c3d4</code></pre>
            </div>
            </p>
            <p>This is useful for reviewing past versions or recovering specific states of your project.</p>
            <h3 id="undoing-commits">Undoing Commits</h3>
            <p>Mistakes happen, and Git provides several ways to undo commits:</p>
            <p>Being able to undo commits is vital for maintaining a clean and accurate project history. Whether you need to correct errors or remove unintended changes, Git's undo capabilities offer the necessary tools to manage your commits effectively.</p>
            <p>I. <strong>Undo the Last Commit but Keep All Files Staged:</strong></p>
            <p>If you want to undo your last commit but keep the changes staged, use the <code>git reset --soft HEAD~</code> command. This is useful if you realize you need to modify your commit message or make additional changes before committing again.</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset --soft HEAD~</code></pre>
            </div>
            </p>
            <p>This approach allows you to adjust your last commit without losing any work, providing a chance to refine your changes.</p>
            <p>II. <strong>Undo the Last Commit and Unstage the Changes:</strong></p>
            <p>To undo the last commit and unstage the changes (but keep them in the working directory), use the <code>git reset HEAD~</code> command. This will make the changes appear as if they were never staged or committed.</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset HEAD~</code></pre>
            </div>
            </p>
            <p>This is helpful when you need to reorganize your commits or exclude certain changes from the previous commit.</p>
            <p>III. <strong>Erase All Changes Made in the Last Commit:</strong></p>
            <p>If you want to completely undo the last commit and discard all changes made, use the <code>git reset --hard HEAD~</code> command. This is a more destructive action, so use it with caution.</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset --hard HEAD~</code></pre>
            </div>
            </p>
            <p>Use this command only when you are certain that you want to remove the last commit and its changes permanently.</p>
            <h3 id="editing-commit-messages">Editing Commit Messages</h3>
            <p>Sometimes, after committing changes, you realize that your commit message could be clearer or more descriptive. Fortunately, Git allows you to amend your commit messages. Hereâ€™s how to do it:</p>
            <p>Clear and accurate commit messages enhance the readability of your project's history. Editing commit messages ensures that each commit accurately reflects the changes made, which is especially important for collaborative projects.</p>
            <h4 id="edit-the-message-of-the-most-recent-commit">Edit the Message of the Most Recent Commit</h4>
            <p>To change the commit message of the most recent commit, use the <code>git commit --amend</code> command followed by the new message. After amending the commit message, you need to force push the changes to the remote repository.</p>
            <p>
            <div>
                <pre><code class="language-bash">git commit --amend -m "New, improved message"
git push --force</code></pre>
            </div>
            </p>
            <p>Example: If you want to update the most recent commit message to "Fixed bug in user authentication," you would run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git commit --amend -m "Fixed bug in user authentication"
git push --force</code></pre>
            </div>
            </p>
            <p>Amending commit messages is straightforward but requires caution, especially when working with shared repositories.</p>
            <h4 id="modify-an-older-commit-message">Modify an Older Commit Message</h4>
            <p>If you need to change the message of an older commit, follow these steps:</p>
            <p>I. <strong>Start an Interactive Rebase for the Last <code>n</code> Commits:</strong></p>
            <p>Begin by initiating an interactive rebase. Replace <code>n</code> with the number of commits you want to go back from the current head.</p>
            <p>
            <div>
                <pre><code class="language-bash">git rebase -i HEAD~n</code></pre>
            </div>
            </p>
            <p>Example: To modify the last 3 commits, you would run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git rebase -i HEAD~3</code></pre>
            </div>
            </p>
            <p>Interactive rebasing allows you to selectively edit, reorder, or squash commits, providing granular control over your commit history.</p>
            <p>II. <strong>Change "pick" to "reword" for Commits You'd Like to Modify:</strong></p>
            <p>In the interactive rebase interface, change <code>pick</code> to <code>reword</code> for the commits whose messages you want to edit.</p>
            <p>III. <strong>Save and Close:</strong></p>
            <p>Save the changes and close the editor. Git will then prompt you to provide new commit messages for each commit marked with <code>reword</code>.</p>
            <p>IV. <strong>Push the Changes:</strong></p>
            <p>After editing the commit messages, you need to force push the changes to the remote repository.</p>
            <p>
            <div>
                <pre><code class="language-bash">git push --force</code></pre>
            </div>
            </p>
            <p>This process ensures that your commit history remains clean and that older commits have accurate and meaningful messages.</p>
            <h3 id="removing-commits">Removing Commits</h3>
            <p>If you need to undo one or more commits, Git provides commands to help you do so safely:</p>
            <p>Removing commits can help maintain a tidy and relevant project history. Whether you're removing erroneous commits or cleaning up your commit log, Git offers tools to manage and refine your commits effectively.</p>
            <p>I. <strong>Remove the Last <code>N</code> Commits:</strong></p>
            <p>To remove the last <code>N</code> commits, use the <code>git reset</code> command followed by the number of commits you want to go back. Then, push the changes to the remote repository.</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset HEAD~N
git push origin +HEAD</code></pre>
            </div>
            </p>
            <p>Example: To remove the last 2 commits, you would run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git reset HEAD~2
git push origin +HEAD</code></pre>
            </div>
            </p>
            <p>This method allows you to eliminate recent commits while preserving the underlying work in your working directory.</p>
            <h3 id="cleaning-up-your-commit-history">Cleaning Up Your Commit History</h3>
            <p>If you need to remove sensitive data or a large file from your commit history, use the <code>git filter-branch</code> command. This command rewrites the commit history, so use it with caution.</p>
            <p>Cleaning up your commit history is essential when dealing with sensitive information or optimizing repository size. By removing unwanted files or data, you can ensure that your repository remains secure and efficient.</p>
            <p>I. <strong>Remove a File from the Commit History:</strong></p>
            <p>To remove a specific file from the entire commit history, use the following command:</p>
            <p>
            <div>
                <pre><code class="language-bash">git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch file_to_remove' HEAD</code></pre>
            </div>
            </p>
            <p>Example: To remove a file named <code>secret.txt</code> from the commit history, you would run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch secret.txt' HEAD</code></pre>
            </div>
            </p>
            <p>This command effectively erases the specified file from all past commits, ensuring that it is no longer part of the repository's history.</p>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#staging-committing-and-undoing-actions">Staging, Committing, and Undoing Actions</a>
                <ol>
                    <li><a href="#staging-files">Staging Files</a></li>
                    <li><a href="#unstaging-files">Unstaging Files</a></li>
                    <li><a href="#committing-files">Committing Files</a></li>
                    <li><a href="#undoing-commits">Undoing Commits</a></li>
                    <li><a href="#editing-commit-messages">Editing Commit Messages</a>
                        <ol>
                            <li><a href="#edit-the-message-of-the-most-recent-commit">Edit the Message of the Most Recent Commit</a></li>
                            <li><a href="#modify-an-older-commit-message">Modify an Older Commit Message</a></li>
                        </ol>
                    </li>
                    <li><a href="#removing-commits">Removing Commits</a></li>
                    <li><a href="#cleaning-up-your-commit-history">Cleaning Up Your Commit History</a></li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/01_introduction_to_version_control.html">Introduction to Version Control</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/02_create_repository.html">Create Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/03_making_changes.html">Making Changes</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/04_working_with_branches.html">Working with Branches</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/05_head.html">Head</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/06_tags.html">Tags</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/07_stashing_files.html">Stashing Files</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/08_observing_repository.html">Observing Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/09_synchronization.html">Synchronization</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/10_squashing_commits.html">Squashing Commits</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/11_archive.html">Archive</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/12_git_server.html">Git Server</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/13_points_of_confusion.html">Points of Confusion</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/14_branching_strategies.html">Branching Strategies</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/15_mono_and_multi_repo.html">Mono and Multi Repo</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
    <div id="pdf-spinner-overlay">
        <div class="spinner"></div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>