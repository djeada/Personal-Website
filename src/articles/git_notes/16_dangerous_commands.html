<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Dangerous Commands</title>
    <meta content="Some git commands are powerful but risky because they can rewrite history, move branch tips, or discard work." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper"><article-section id="article-body">
            <div class="article-action-buttons"><button class="btn-suggest-edit" title="Suggest Edit">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M4 21h4l11-11-4-4L4 17v4z" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button><button class="btn-create-issue" title="Create Issue">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                        <line stroke="currentColor" stroke-width="2" x1="12" x2="12" y1="8" y2="12"></line>
                        <circle cx="12" cy="16" fill="currentColor" r="1"></circle>
                    </svg>
                </button><button class="btn-download" title="Download">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M12 5v14m0 0l-6-6m6 6l6-6" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button></div>
            <p style="text-align: right;"><i>Last modified: September 13, 2025</i></p>
            <p style="text-align: right;"><i>This article is written in: 🇺🇸</i></p>
            <h2 id="dangerous-commands">Dangerous Commands</h2>
            <p>Some git commands are powerful but risky because they can rewrite history, move branch tips, or discard work. Used carelessly, they break open reviews, hide teammates’ changes, and make it hard to trace what actually shipped. Treat history edits as exceptional: prefer additive fixes for shared code, keep risky changes local until you’re sure, and coordinate before publishing them. Always back up your branch, read prompts carefully, and verify the target you’re changing. In short, these tools are essential for cleanup—just use them sparingly, with safeguards and team alignment.</p>
            <h3 id="rebase-git-rebase-">Rebase (<code>git rebase</code>)</h3>
            <p><strong>Rebase</strong> takes the commits on your branch and <strong>replays</strong> them on top of a new base (usually the updated <code>main</code>), creating <strong>new commit IDs</strong> for each replayed commit. It’s commonly used to keep a feature branch up to date or to clean up history (e.g., squash, reorder, edit commits).</p>
            <p>
            <div>
                <pre><code class="language-shell">Visual — before → after (rebasing feature onto main)

BEFORE
main:    A──B──C
               \
feature:        D──E

AFTER
main:    A──B──C
                 └──D'──E'   (D,E replayed; new hashes)</code></pre>
            </div>
            </p>
            <p><strong>Does this rewrite history?</strong></p>
            <p>Yes. Rebased commits get <strong>new hashes</strong>. If others already pulled the old history, you’ll create divergence.</p>
            <p><strong>When is it safe?</strong></p>
            <p>Safe on <strong>local/unshared</strong> branches. If you must rebase a published branch, coordinate and use <code>git push --force-with-lease</code>.</p>
            <h4 id="advantages">Advantages</h4>
            <ul>
                <li>Produces a <strong>linear, easy-to-read</strong> history.</li>
                <li>Lets you <strong>resolve conflicts once</strong> against the latest base.</li>
                <li>Interactive mode (<code>git rebase -i</code>) enables <strong>squash/reword/reorder</strong>.</li>
            </ul>
            <h4 id="disadvantages">Disadvantages</h4>
            <ul>
                <li><strong>History rewrite</strong> can confuse collaborators and break open PRs.</li>
                <li>Risk of <strong>lost work</strong> if conflicts are mishandled.</li>
                <li>Requires a <strong>force push</strong> to publish rewritten commits.</li>
            </ul>
            <h4 id="when-to-use">When to Use</h4>
            <ul>
                <li>Before opening a PR, to refresh a feature branch onto <code>main</code>.</li>
                <li>To curate commits with <code>rebase -i</code>.</li>
                <li>Avoid on <strong>shared/protected</strong> branches; prefer merge if others already built on your branch.</li>
            </ul>
            <h3 id="reset-git-reset-">Reset (<code>git reset</code>)</h3>
            <p><strong>Reset</strong> moves the current branch (and possibly your index and working tree) to another commit. Mode determines what happens to your files: <code>--soft</code> keeps changes staged, <code>--mixed</code> (default) keeps changes unstaged, <code>--hard</code> discards them.</p>
            <p>
            <div>
                <pre><code class="language-shell">Visual — before → after (moving HEAD from C to B)

BEFORE
branch: A──B──C   (HEAD)

AFTER --soft
branch: A──B   (HEAD)
        └─ changes from C kept **staged**

AFTER --mixed (default)
branch: A──B   (HEAD)
        └─ changes from C kept **unstaged**

AFTER --hard
branch: A──B   (HEAD)
        (changes from C **discarded**)</code></pre>
            </div>
            </p>
            <p><strong>Does this rewrite history?</strong></p>
            <p>Yes, the branch pointer moves. On shared branches this <strong>rewrites public history</strong>.</p>
            <p><strong>How is this different from revert?</strong></p>
            <p><code>reset</code> <strong>moves</strong> your branch pointer; <code>revert</code> <strong>adds a new commit</strong> that undoes prior changes. Use <code>revert</code> on <strong>published</strong> history.</p>
            <h4 id="advantages">Advantages</h4>
            <ul>
                <li>Quick way to <strong>undo</strong> the last commit(s) locally.</li>
                <li>Adjust what’s <strong>staged vs. unstaged</strong> without editing files.</li>
            </ul>
            <h4 id="disadvantages">Disadvantages</h4>
            <ul>
                <li><code>--hard</code> can <strong>destroy work</strong>.</li>
                <li>Using reset on shared branches <strong>breaks collaborators</strong>.</li>
            </ul>
            <h4 id="when-to-use">When to Use</h4>
            <ul>
                <li>Local cleanups (e.g., “oops, wrong commit”) — <code>--soft</code> or <code>--mixed</code>.</li>
                <li>Reserve <code>--hard</code> for disposable work or after backing up.</li>
                <li>Use <code>git revert</code> to undo commits that are already public.</li>
            </ul>
            <h3 id="force-push-git-push-force-force-with-lease-">Force Push (<code>git push --force</code> / <code>--force-with-lease</code>)</h3>
            <p><strong>Force push</strong> publishes a rewritten local history by <strong>overwriting</strong> the remote branch. It’s typically needed after a rebase or amend.</p>
            <p>
            <div>
                <pre><code class="language-shell">Visual — before → after (overwriting remote with rebased local)

BEFORE (diverged)
origin/feature: A──B──C──D
local/feature : A──B──X──Y   (HEAD)

AFTER
origin/feature: A──B──X──Y
local/feature : A──B──X──Y   (HEAD)</code></pre>
            </div>
            </p>
            <p><strong>Is it safe?</strong></p>
            <p>Use <code>--force-with-lease</code> to refuse overwriting new remote work you haven’t seen. <strong>Coordinate</strong> with teammates first.</p>
            <p><strong>Where is it allowed?</strong></p>
            <p>Generally fine on <strong>your own feature branches</strong>. Avoid on <code>main</code> or protected branches.</p>
            <h4 id="advantages">Advantages</h4>
            <ul>
                <li>Lets you publish a <strong>clean, linear</strong> history after rebase/amend.</li>
                <li>Removes accidental commits from the remote branch.</li>
            </ul>
            <h4 id="disadvantages">Disadvantages</h4>
            <ul>
                <li>Can <strong>erase others’ work</strong> if they pushed meanwhile.</li>
                <li>Breaks PR comment threads anchored to old commits.</li>
            </ul>
            <h4 id="when-to-use">When to Use</h4>
            <ul>
                <li>After <code>rebase -i</code> or <code>commit --amend</code> on <strong>your branch</strong>.</li>
                <li>With <code>--force-with-lease</code>, after confirming no one else pushed.</li>
            </ul>
            <h3 id="history-rewrite-git-filter-branch-alternatives-">History Rewrite (<code>git filter-branch</code> / alternatives)</h3>
            <p><strong>filter-branch</strong> rewrites repository <strong>history commit-by-commit</strong> (e.g., to remove secrets, large files, or change authors). Modern practice prefers <strong><code>git filter-repo</code></strong> (faster/safer) or <strong>BFG Repo-Cleaner</strong> for common cases.</p>
            <p>
            <div>
                <pre><code class="language-shell">Visual — before → after (remove a secret added in C)

BEFORE
A──B──C[secret]──D──E

AFTER (new hashes)
A'──B'──C'──D'──E'   (secret purged from all affected commits)</code></pre>
            </div>
            </p>
            <p><strong>Will this change commit IDs?</strong></p>
            <p>Yes—potentially <strong>across most of history</strong>. All clones/forks become incompatible until updated.</p>
            <p><strong>What else must I do?</strong></p>
            <p>Rotate any <strong>exposed credentials</strong>, and <strong>force-push</strong> rewritten branches. Inform downstreams to reclone or run <code>git fetch --all &amp;&amp; git reset --hard origin/main</code> (replace <code>origin/main</code> with the correct branch as needed) to realign their local history.</p>
            <h4 id="advantages">Advantages</h4>
            <ul>
                <li>Removes <strong>sensitive data</strong> or bloat everywhere in history.</li>
                <li>Can significantly <strong>shrink</strong> repository size.</li>
            </ul>
            <h4 id="disadvantages">Disadvantages</h4>
            <ul>
                <li><strong>Disruptive</strong> to collaborators and forks; breaks old SHAs.</li>
                <li>Easy to make mistakes; recovery can be tedious.</li>
            </ul>
            <h4 id="when-to-use">When to Use</h4>
            <ul>
                <li>Security/legal incidents; purging large binaries.</li>
                <li>On repos you control and after thorough backups.</li>
                <li>Prefer <code>git filter-repo</code> or <strong>BFG</strong> over raw <code>filter-branch</code> for safety/speed.</li>
            </ul>
            <blockquote>
                <p><strong>Note:</strong> <code>git filter-repo</code> and <strong>BFG Repo-Cleaner</strong> are not included with Git by default.<br />
                    - To install <code>git filter-repo</code>, see <a href="https://github.com/newren/git-filter-repo">https://github.com/newren/git-filter-repo</a> or install via <code>pip install git-filter-repo</code>.<br />
                    - To use BFG, download the jar from <a href="https://rtyley.github.io/bfg-repo-cleaner/">https://rtyley.github.io/bfg-repo-cleaner/</a>.</p>
            </blockquote>
            <h3 id="amend-git-commit-amend-">Amend (<code>git commit --amend</code>)</h3>
            <p><strong>Amend</strong> replaces the <strong>most recent commit</strong> with a new one (e.g., fix message, add a forgotten file). The result is a <strong>new commit ID</strong>.</p>
            <p>
            <div>
                <pre><code class="language-shell">Visual — before → after (replace last commit)

BEFORE
A──B   (HEAD)

AFTER
A──B'  (HEAD)   (B replaced with B')</code></pre>
            </div>
            </p>
            <p><strong>Does this rewrite history?</strong></p>
            <p>Yes. If the old commit was pushed, you’ll need a <strong>force push</strong> and must coordinate.</p>
            <p><strong>What’s a safe workflow?</strong></p>
            <p>Amend <strong>before</strong> pushing, or amend your branch and publish with <code>--force-with-lease</code>.</p>
            <h4 id="advantages">Advantages</h4>
            <ul>
                <li>Quick fix for <strong>typos, messages, or small omissions</strong>.</li>
                <li>Keeps history <strong>tidy</strong> by avoiding extra “fixup” commits.</li>
            </ul>
            <h4 id="disadvantages">Disadvantages</h4>
            <ul>
                <li>Rewrites history, which can <strong>disrupt collaborators</strong>.</li>
                <li>Amending repeatedly can confuse review threads.</li>
            </ul>
            <h4 id="when-to-use">When to Use</h4>
            <ul>
                <li>Local changes not yet pushed.</li>
                <li>Minor corrections to your own branch (with coordinated force push).</li>
                <li>Avoid on shared/protected branches; add a new commit instead.</li>
            </ul>
        </article-section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#dangerous-commands">Dangerous Commands</a>
                <ol>
                    <li><a href="#rebase-git-rebase-">Rebase (git rebase)</a>
                        <ol>
                            <li><a href="#advantages">Advantages</a></li>
                            <li><a href="#disadvantages">Disadvantages</a></li>
                            <li><a href="#when-to-use">When to Use</a></li>
                        </ol>
                    </li>
                    <li><a href="#reset-git-reset-">Reset (git reset)</a>
                        <ol>
                            <li><a href="#advantages">Advantages</a></li>
                            <li><a href="#disadvantages">Disadvantages</a></li>
                            <li><a href="#when-to-use">When to Use</a></li>
                        </ol>
                    </li>
                    <li><a href="#force-push-git-push-force-force-with-lease-">Force Push (git push --force / --force-with-lease)</a>
                        <ol>
                            <li><a href="#advantages">Advantages</a></li>
                            <li><a href="#disadvantages">Disadvantages</a></li>
                            <li><a href="#when-to-use">When to Use</a></li>
                        </ol>
                    </li>
                    <li><a href="#history-rewrite-git-filter-branch-alternatives-">History Rewrite (git filter-branch / alternatives)</a>
                        <ol>
                            <li><a href="#advantages">Advantages</a></li>
                            <li><a href="#disadvantages">Disadvantages</a></li>
                            <li><a href="#when-to-use">When to Use</a></li>
                        </ol>
                    </li>
                    <li><a href="#amend-git-commit-amend-">Amend (git commit --amend)</a>
                        <ol>
                            <li><a href="#advantages">Advantages</a></li>
                            <li><a href="#disadvantages">Disadvantages</a></li>
                            <li><a href="#when-to-use">When to Use</a></li>
                        </ol>
                    </li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/01_introduction_to_version_control.html">Introduction to Version Control</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/02_create_repository.html">Create Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/03_making_changes.html">Making Changes</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/04_working_with_branches.html">Working with Branches</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/05_head.html">Head</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/06_tags.html">Tags</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/07_stashing_files.html">Stashing Files</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/08_observing_repository.html">Observing Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/09_synchronization.html">Synchronization</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/10_squashing_commits.html">Squashing Commits</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/11_archive.html">Archive</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/12_git_server.html">Git Server</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/13_points_of_confusion.html">Points of Confusion</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/14_branching_strategies.html">Branching Strategies</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/15_mono_and_multi_repo.html">Mono and Multi Repo</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/16_dangerous_commands.html">Dangerous Commands</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/17_git_internals.html">Git Internals</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>Thank you for visiting my personal website. All content here is free to use, but please remember to be respectful and avoid any misuse of the site. If you’d like to get in touch, feel free to reach out via my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or connect with me on <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have technical questions or ideas to share. Wishing you all the best and a fantastic life ahead!</p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                © Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
    <div id="pdf-spinner-overlay">
        <div class="spinner"></div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>