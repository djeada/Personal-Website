<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Git Archive</title>
    <meta content="Git archive is a handy tool for creating compressed archives of a repositoryâ€™s content." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper">
        <section id="article-body">
            <div class="article-action-buttons"><button class="btn-suggest-edit" title="Suggest Edit">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M4 21h4l11-11-4-4L4 17v4z" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button><button class="btn-create-issue" title="Create Issue">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                        <line stroke="currentColor" stroke-width="2" x1="12" x2="12" y1="8" y2="12"></line>
                        <circle cx="12" cy="16" fill="currentColor" r="1"></circle>
                    </svg>
                </button><button class="btn-download" title="Download">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M12 5v14m0 0l-6-6m6 6l6-6" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button></div>
            <p style="text-align: right;"><i>Last modified: September 07, 2024</i></p>
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="git-archive">Git Archive</h2>
            <p>Git archive is a handy tool for creating compressed archives of a repositoryâ€™s content. Itâ€™s designed to generate snapshots of your project at a specific state, which can then be shared, backed up, or used in deployment scenarios. Unlike simply copying files, this command ensures that only the tracked contents of your repository are included, leaving behind metadata like the <code>.git</code> folder.</p>
            <p>For instance, imagine working on a software project and needing to deliver the latest stable version to a collaborator without sharing your entire repository history. Git archive allows you to extract just the files you need, neatly packaged in an archive format such as <code>tar</code> or <code>zip</code>.</p>
            <p>Here's a representation of how it works:</p>
            <p>
            <div>
                <pre><code class="language-shell">+------------------------+                   +------------------------+
|  YOUR GIT REPOSITORY   |                   |      project.tar       |
|                        |   git archive     |                        |
|  .git/    src/         |    ========&gt;      |  src/    README        |
|  README   docs/        |                   |  docs/                 |
|                        |                   |                        |
+------------------------+                   +------------------------+</code></pre>
            </div>
            </p>
            <p>In this diagram, the left box represents your Git repository, including the <code>.git</code> directory (which contains your version history and metadata) and all your project files. The right box shows the resulting archive after running <code>git archive</code>. Notice how the <code>.git</code> directory is excluded, and only the working files are included in the archive.</p>
            <h3 id="creating-archives-for-a-snapshot-of-the-repository">Creating Archives for a Snapshot of the Repository</h3>
            <p>When using Git archive, you can extract files from a specific commit, branch, or tag. Itâ€™s worth noting that the command excludes the <code>.git</code> directory and any untracked files, ensuring the archive is clean and concise. For example, if you want to create a <code>zip</code> file of the current branchâ€™s latest commit, you could run:</p>
            <p>
            <div>
                <pre><code class="language-bash">git archive -o archive_name.zip HEAD</code></pre>
            </div>
            </p>
            <p>Here, <code>HEAD</code> refers to the most recent commit on the current branch. You could replace <code>HEAD</code> with a branch name, tag, or commit hash to target a specific state.</p>
            <p>By default, Git archive outputs the archive content to <code>stdout</code>, meaning it prints to the terminal or can be piped into another process. For instance, you could compress the archive with <code>gzip</code> or send it over SSH:</p>
            <p>
            <div>
                <pre><code class="language-bash">git archive branch_name | gzip | ssh user@host "cat &gt; project.tar.gz"</code></pre>
            </div>
            </p>
            <p>This command generates an archive of <code>branch_name</code>, compresses it with <code>gzip</code>, and sends it directly to a remote machine.</p>
            <h3 id="exporting-specific-files-or-directories">Exporting Specific Files or Directories</h3>
            <p>There may be times when you donâ€™t need the entire repository but just a specific file or folder. Git archive makes this easy. If you need a file named <code>config.yml</code> from the current branch, you can isolate it with:</p>
            <p>
            <div>
                <pre><code class="language-bash">git archive -o config.zip HEAD config.yml</code></pre>
            </div>
            </p>
            <p>The visual flow:</p>
            <p>
            <div>
                <pre><code class="language-shell">+------------------------+     git archive     +-----------------------+
|      BRANCH HEAD       |    ============&gt;    |   config.zip          |
| config.yml             |                     | config.yml            |
| src/                   |                     |                       |
+------------------------+                     +-----------------------+</code></pre>
            </div>
            </p>
            <p>The resulting <code>zip</code> file will contain only <code>config.yml</code> as it exists in the latest commit. Similarly, directories can be targeted by specifying their path in the command.</p>
            <h3 id="customizing-the-archive-with-prefixes-and-filters">Customizing the Archive with Prefixes and Filters</h3>
            <p>Sometimes, itâ€™s useful to include a prefix for all the paths in the archive. This is particularly helpful when deploying files to a directory structure or when avoiding filename collisions. Adding a prefix can be done with the <code>--prefix</code> option:</p>
            <p>
            <div>
                <pre><code class="language-bash">git archive --prefix=project-name/ -o project.zip HEAD</code></pre>
            </div>
            </p>
            <p>Here's a visual:</p>
            <p>
            <div>
                <pre><code class="language-shell">+------------------------+                   +------------------------------+
|  YOUR GIT REPOSITORY   |                   |        project.zip           |
|                        |   git archive     |                              |
|  src/    README        |    ========&gt;      |  project-name/src/           |
|  docs/                 |                   |  project-name/README         |
|                        |                   |                              |
+------------------------+                   +------------------------------+</code></pre>
            </div>
            </p>
            <p>In this example, every file in the archive will appear under a <code>my_project/</code> directory.</p>
            <p>To fine-tune the archive contents, you can filter which files or directories are included. Using glob patterns, you can include files with specific extensions or in specific folders:</p>
            <p>
            <div>
                <pre><code class="language-bash">git archive -o source_code.zip HEAD -- path/to/code/*.py</code></pre>
            </div>
            </p>
            <p>The visual flow:</p>
            <p>
            <div>
                <pre><code class="language-shell">+------------------------+     git archive     +-----------------------+
|      BRANCH HEAD       |    ============&gt;    | python_files.zip      |
| src/   file1.py        |                     | src/   file1.py       |
| lib/   helper.py       |                     | lib/   helper.py      |
| docs/  guide.txt       |                     |                       |
+------------------------+                     +-----------------------+</code></pre>
            </div>
            </p>
            <p>This creates an archive containing only Python files from the specified directory.</p>
            <h3 id="supported-formats-for-archiving">Supported Formats for Archiving</h3>
            <p>Git archive supports various output formats to suit different needs. By default, it generates <code>tar</code> files, but you can specify formats such as <code>zip</code> or <code>tar.gz</code> by using the <code>--format</code> option. The table below summarizes the available formats:</p>
            <p>
            <table>
                <tr>
                    <td>Format</td>
                    <td>Description</td>
                    <td>Example Output</td>
                </tr>
                <tr>
                    <td><code>tar</code></td>
                    <td>Uncompressed tarball</td>
                    <td><code>project.tar</code></td>
                </tr>
                <tr>
                    <td><code>tar.gz</code></td>
                    <td>Compressed tarball using gzip</td>
                    <td><code>project.tar.gz</code></td>
                </tr>
                <tr>
                    <td><code>zip</code></td>
                    <td>Zip-compressed archive</td>
                    <td><code>project.zip</code></td>
                </tr>
            </table>
            </p>
            <p>The file type can also be determined automatically based on the file extension you specify with the <code>-o</code> flag.</p>
            <h3 id="example-workflow-deployment">Example Workflow: Deployment</h3>
            <p>Imagine youâ€™ve been tasked with deploying the latest version of your project to a server. You want to package the files from the <code>main</code> branch and transfer them. Using Git archive, you can streamline this process:</p>
            <p>I. Create a tar archive of the <code>main</code> branch:</p>
            <p>
            <div>
                <pre><code class="language-bash">git archive --format=tar main &gt; project.tar</code></pre>
            </div>
            </p>
            <p>II. Compress it to save space:</p>
            <p>
            <div>
                <pre><code class="language-bash">gzip project.tar</code></pre>
            </div>
            </p>
            <p>III. Transfer it to the server:</p>
            <p>
            <div>
                <pre><code class="language-bash">scp project.tar.gz user@server:/deployments</code></pre>
            </div>
            </p>
            <p>This ensures that the server receives only the files it needs, neatly compressed and ready for extraction.</p>
            <h3 id="tips-and-considerations">Tips and Considerations</h3>
            <ul>
                <li>To ensure that unwanted files or folders are not included in the archive, a <code>.gitattributes</code> file can be used effectively. Files marked with <code>export-ignore</code> in this file will be omitted from the archive. For instance, you can exclude directories like <code>docs/</code> or <code>tests/</code> by adding specific entries.</li>
                <li>Git archive is an excellent choice for automating deployments or backups since it integrates seamlessly with scripts. This makes it easy to include archive creation as part of your regular workflows or CI/CD pipelines.</li>
                <li>The archives created using Git are based on widely accepted standards, ensuring compatibility with common tools. This allows users to extract these archives using tools like <code>tar</code> or <code>unzip</code> without requiring any special configurations.</li>
            </ul>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#git-archive">Git Archive</a>
                <ol>
                    <li><a href="#creating-archives-for-a-snapshot-of-the-repository">Creating Archives for a Snapshot of the Repository</a></li>
                    <li><a href="#exporting-specific-files-or-directories">Exporting Specific Files or Directories</a></li>
                    <li><a href="#customizing-the-archive-with-prefixes-and-filters">Customizing the Archive with Prefixes and Filters</a></li>
                    <li><a href="#supported-formats-for-archiving">Supported Formats for Archiving</a></li>
                    <li><a href="#example-workflow-deployment">Example Workflow: Deployment</a></li>
                    <li><a href="#tips-and-considerations">Tips and Considerations</a></li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/01_introduction_to_version_control.html">Introduction to Version Control</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/02_create_repository.html">Create Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/03_making_changes.html">Making Changes</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/04_working_with_branches.html">Working with Branches</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/05_head.html">Head</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/06_tags.html">Tags</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/07_stashing_files.html">Stashing Files</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/08_observing_repository.html">Observing Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/09_synchronization.html">Synchronization</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/10_squashing_commits.html">Squashing Commits</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/11_archive.html">Archive</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/12_git_server.html">Git Server</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/13_points_of_confusion.html">Points of Confusion</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/14_branching_strategies.html">Branching Strategies</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/15_mono_and_multi_repo.html">Mono and Multi Repo</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
    <div id="pdf-spinner-overlay">
        <div class="spinner"></div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>