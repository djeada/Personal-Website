<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Git Archive</title>
    <meta content="git archive is your clean-room packager." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://adamdjellouli.com/articles/git_notes/11_archive" rel="canonical" />
    <script id="structured-data" type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Article",
            "headline": "Git Archive",
            "author": {
                "@type": "Person",
                "name": "Adam Djellouli"
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://adamdjellouli.com/articles/git_notes/11_archive"
            },
            "url": "https://adamdjellouli.com/articles/git_notes/11_archive",
            "description": "git archive is your clean-room packager.",
            "dateModified": "2022-03-02"
        }
    </script>
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="../../index.html">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../core/courses.html" title="Browse Courses by Adam Djellouli"> Courses </a>
            </li>
            <li role="menuitem">
                <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper"><article-section id="article-body">
            <div class="article-action-buttons"><button class="btn-suggest-edit" title="Suggest Edit">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M4 21h4l11-11-4-4L4 17v4z" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button><button class="btn-create-issue" title="Create Issue">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                        <line stroke="currentColor" stroke-width="2" x1="12" x2="12" y1="8" y2="12"></line>
                        <circle cx="12" cy="16" fill="currentColor" r="1"></circle>
                    </svg>
                </button><button class="btn-download" title="Download">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M12 5v14m0 0l-6-6m6 6l6-6" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button></div>
            <p style="text-align: right;"><i>Last modified: March 02, 2022</i></p>
            <p style="text-align: right;"><i>This article is written in: üá∫üá∏</i></p>
            <h2 id="git-archive">Git Archive</h2>
            <p><code>git archive</code> is your clean-room packager. It snapshots exactly what Git tracks at a commit‚Äîno <code>.git</code> folder, no stray build junk, no temp files. This means you can hand someone a tidy source bundle or ship code to a server without dragging history along.</p>
            <p>Think of it as a camera: you point it at a commit, click, and get a tar/zip of only the files that belong in that picture. It‚Äôs great for releases, vendor handoffs, monorepo subtrees, and ‚Äújust give me the code‚Äù moments.</p>
            <p>Because the archive is created from the repository‚Äôs tree, not your working directory, it‚Äôs consistent and repeatable, which makes ops and audits much happier.</p>
            <div>
                <pre><code class="language-shell">+------------------------+                   +------------------------+
|  YOUR GIT REPOSITORY   |                   |      project.tar       |
|                        |   git archive     |                        |
|  .git/    src/         |    ========&gt;      |  src/    README        |
|  README   docs/        |                   |  docs/                 |
|                        |                   |                        |
+------------------------+                   +------------------------+</code></pre>
            </div>
            <p>The left box is your repo with history + working files; the right box is the clean export‚Äîno <code>.git</code>, only tracked content as of the chosen commit.</p>
            <h3 id="quick-snapshots-branch-tag-or-commit-">Quick snapshots (branch, tag, or commit)</h3>
            <p>You pick a point in time (HEAD, a branch, a tag, a SHA), and you get a bundle. This is the ‚Äújust give me today‚Äôs code‚Äù path.</p>
            <div>
                <pre><code class="language-bash"># Zip of whatever you're on now
git archive -o project.zip HEAD

# Tar.gz from a release tag, with a friendly top-level folder name
git archive --format=tar --prefix=project-1.4.2/ v1.4.2 | gzip &gt; project-1.4.2.tar.gz

# Peek inside without extracting
tar -tzf project-1.4.2.tar.gz | head
# output (example):
# project-1.4.2/
# project-1.4.2/README.md
# project-1.4.2/src/main.py
# project-1.4.2/src/utils/__init__.py</code></pre>
            </div>
            <p>A tiny mental model:</p>
            <div>
                <pre><code class="language-shell">commit (tree) ‚îÄ‚îÄ‚ñ∫ reproducible source package
      ^
      ‚îî‚îÄ‚îÄ HEAD / tag / SHA you chose</code></pre>
            </div>
            <h3 id="partial-exports">Partial exports</h3>
            <p>You don‚Äôt have to ship the whole repo. Target a file, a folder, or a pattern and keep the archive lean.</p>
            <div>
                <pre><code class="language-bash"># One file from HEAD
git archive -o config.zip HEAD config.yml

# One directory
git archive -o api.zip HEAD services/api/

# Glob patterns (quote so your shell doesn‚Äôt expand it)
git archive -o py-src.zip HEAD ':(glob)src/**/*.py'</code></pre>
            </div>
            <p>Visualization:</p>
            <div>
                <pre><code class="language-shell">+------------------------+     git archive     +-----------------------+
|      BRANCH HEAD       |    ============&gt;    |   config.zip          |
| config.yml             |                     | config.yml            |
| src/                   |                     |                       |
+------------------------+                     +-----------------------+</code></pre>
            </div>
            <h3 id="prefixes-that-keep-things-organized">Prefixes that keep things organized</h3>
            <p>A prefix puts everything under a single folder inside the archive‚Äîsuper handy for releases and avoiding file collisions when someone extracts.</p>
            <div>
                <pre><code class="language-bash">git archive --prefix=project-name/ -o project.zip HEAD</code></pre>
            </div>
            <div>
                <pre><code class="language-shell">+------------------------+                   +------------------------------+
|  YOUR GIT REPOSITORY   |                   |        project.zip           |
|                        |   git archive     |                              |
|  src/    README        |    ========&gt;      |  project-name/src/           |
|  docs/                 |                   |  project-name/README         |
|                        |                   |                              |
+------------------------+                   +------------------------------+</code></pre>
            </div>
            <h3 id="stream-it-no-temp-files-even-to-another-box-">Stream it (no temp files, even to another box)</h3>
            <p>Because <code>git archive</code> writes to stdout by default, you can compress and ship in one go. Great for deployments or quick backups.</p>
            <div>
                <pre><code class="language-bash">archive_name="project-$(date +%F).tar.gz"
git archive main | gzip | ssh user@host "cat &gt; /deploy/$archive_name"
# output (local):
# (no local file created; archive landed on remote host)</code></pre>
            </div>
            <p>Remote server view:</p>
            <div>
                <pre><code class="language-shell">[repo @ dev box] --stdout--&gt; [gzip] --ssh--&gt; [/deploy/project-2025-09-13.tar.gz]</code></pre>
            </div>
            <h3 id="real-world-flows-that-come-up-all-the-time">Real-world flows that come up all the time</h3>
            <p><strong>1) Release tarball from a tag, nice folder name inside</strong></p>
            <div>
                <pre><code class="language-bash">git archive --format=tar --prefix=myapp-2.0.0/ v2.0.0 | gzip &gt; myapp-2.0.0.tar.gz</code></pre>
            </div>
            <p><strong>2) Monorepo: ship just one service</strong></p>
            <div>
                <pre><code class="language-bash">git archive -o payments.zip HEAD services/payments/</code></pre>
            </div>
            <p><strong>3) Vendor handoff: exclude dev-only stuff using <code>.gitattributes</code></strong>
                Create rules once, every archive stays clean.</p>
            <div>
                <pre><code class="language-bash"># .gitattributes (commit this)
docs/private/**    export-ignore
*.psd              export-ignore
scripts/dev/**     export-ignore
VERSION            export-subst</code></pre>
            </div>
            <p>And if <code>VERSION</code> contains a placeholder, it gets filled when you archive:</p>
            <div>
                <pre><code class="language-text"># VERSION file in repo
MyApp $Format:%h$ ($Format:%ci$)</code></pre>
            </div>
            <div>
                <pre><code class="language-bash">git archive -o clean.zip HEAD
# After extracting clean.zip, VERSION might read:
# MyApp 9f3a1c2 (2025-09-13 09:45:12 +0000)</code></pre>
            </div>
            <p><strong>4) Zero-clone archive from a remote (server does the packing)</strong>
                Useful when you don‚Äôt want a local checkout.</p>
            <div>
                <pre><code class="language-bash">git archive --remote=ssh://git@yourserver/opt/git/myrepo.git v1.4.2 | gzip &gt; myrepo-1.4.2.tar.gz
# note: the remote must allow git-upload-archive over SSH</code></pre>
            </div>
            <h3 id="formats-you-ll-actually-use">Formats you‚Äôll actually use</h3>
            <ul>
                <li><code>tar</code> ‚Üí <code>project.tar</code> (uncompressed, fast on server-to-server)</li>
                <li><code>tar.gz</code> ‚Üí <code>project.tar.gz</code> (common for releases)</li>
                <li><code>zip</code> ‚Üí <code>project.zip</code> (nice for Windows users)</li>
            </ul>
            <p>Pick explicitly, or let <code>-o</code>‚Äôs extension do the talking:</p>
            <div>
                <pre><code class="language-bash">git archive --format=zip -o src.zip HEAD
git archive --format=tar HEAD &gt; project.tar</code></pre>
            </div>
            <h3 id="deployment-example-end-to-end">Deployment example, end-to-end</h3>
            <p>You want the latest <code>main</code> on a server, clean and quick.</p>
            <div>
                <pre><code class="language-bash"># I. create tar from main and compress
git archive --format=tar main | gzip &gt; project.tar.gz

# II. ship it
scp project.tar.gz user@server:/deployments

# III. unpack on the server
ssh user@server 'mkdir -p /apps/project &amp;&amp; tar -xzf /deployments/project.tar.gz -C /apps/project'</code></pre>
            </div>
            <p>Result: server gets only the tracked sources, with the exact tree from <code>main</code>.</p>
            <h3 id="sanity-checks-and-small-gotchas">Sanity checks and small gotchas</h3>
            <div>
                <pre><code class="language-bash"># List contents of a tar.gz without extracting
tar -tzf project.tar.gz | head -10</code></pre>
            </div>
            <ul>
                <li>Untracked or ignored files are not included. If you rely on built assets, either track them (not ideal) or build on the target machine after extracting.</li>
                <li>Submodules aren‚Äôt pulled in automatically; they appear as empty directories in archives. Package them separately or run a build step that fetches their sources.</li>
                <li>Remote archiving depends on the server allowing <code>git-upload-archive</code> over SSH; most self-hosted setups do, some hosted platforms disable it.</li>
                <li>Executable bits are preserved; extended attributes aren‚Äôt. If permissions matter in production, set them in your deploy scripts.</li>
            </ul>
        </article-section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#git-archive">Git Archive</a>
                <ol>
                    <li><a href="#quick-snapshots-branch-tag-or-commit-">Quick snapshots (branch, tag, or commit)</a></li>
                    <li><a href="#partial-exports">Partial exports</a></li>
                    <li><a href="#prefixes-that-keep-things-organized">Prefixes that keep things organized</a></li>
                    <li><a href="#stream-it-no-temp-files-even-to-another-box-">Stream it (no temp files, even to another box)</a></li>
                    <li><a href="#real-world-flows-that-come-up-all-the-time">Real-world flows that come up all the time</a></li>
                    <li><a href="#formats-you-ll-actually-use">Formats you‚Äôll actually use</a></li>
                    <li><a href="#deployment-example-end-to-end">Deployment example, end-to-end</a></li>
                    <li><a href="#sanity-checks-and-small-gotchas">Sanity checks and small gotchas</a></li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/01_introduction_to_version_control.html">Introduction to Version Control</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/02_create_repository.html">Create Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/03_making_changes.html">Making Changes</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/04_working_with_branches.html">Working with Branches</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/05_head.html">Head</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/06_tags.html">Tags</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/07_stashing_files.html">Stashing Files</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/08_observing_repository.html">Observing Repository</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/09_synchronization.html">Synchronization</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/10_squashing_commits.html">Squashing Commits</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/11_archive.html">Archive</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/12_git_server.html">Git Server</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/13_points_of_confusion.html">Points of Confusion</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/14_branching_strategies.html">Branching Strategies</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/15_mono_and_multi_repo.html">Mono and Multi Repo</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/16_dangerous_commands.html">Dangerous Commands</a></li>
                    <li><a href="https://adamdjellouli.com/articles/git_notes/17_git_internals.html">Git Internals</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column footer-about">
                <h2>About</h2>
                <p class="footer-message">Thanks for stopping by. This site is free to use; please be respectful and avoid misuse. For questions or collaboration, reach me on <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn</a> or <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a>.</p>
                <p class="footer-signature">Built with care in Berlin (UTC+1).</p>
            </div>
            <div class="footer-column footer-links">
                <h2>Quick Links</h2>
                <ul class="footer-links-list">
                    <li><a href="https://adamdjellouli.com/index.html" title="Home">Home</a></li>
                    <li><a href="https://adamdjellouli.com/core/projects.html" title="Projects">Projects</a></li>
                    <li><a href="https://adamdjellouli.com/core/tools.html" title="Tools">Tools</a></li>
                    <li><a href="https://adamdjellouli.com/core/courses.html" title="Courses">Courses</a></li>
                    <li><a href="https://adamdjellouli.com/core/resume.html" title="Resume">Resume</a></li>
                    <li><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Privacy Policy</a></li>
                    <li><a href="https://adamdjellouli.com/sitemap.xml" title="Sitemap">Sitemap</a></li>
                </ul>
            </div>
            <div class="footer-column footer-social">
                <h2>Follow</h2>
                <ul class="social-media">
                    <li>
                        <a aria-label="YouTube" class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" rel="noopener" target="_blank" title="YouTube"></a>
                        <span class="social-label">YouTube</span>
                    </li>
                    <li>
                        <a aria-label="LinkedIn" class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" rel="noopener" target="_blank" title="LinkedIn"></a>
                        <span class="social-label">LinkedIn</span>
                    </li>
                    <li>
                        <a aria-label="Instagram" class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" rel="noopener" target="_blank" title="Instagram"></a>
                        <span class="social-label">Instagram</span>
                    </li>
                    <li>
                        <a aria-label="GitHub" class="fa fa-github" href="https://github.com/djeada" title="GitHub"></a>
                        <span class="social-label">GitHub</span>
                    </li>
                </ul>
                <img alt="" aria-hidden="true" class="footer-mark" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
        </div>
        <div class="footer-bottom">
            <p id="copyright">
                ¬© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="/app.js"></script>
    </footer>
    <div id="pdf-spinner-overlay">
        <div class="spinner"></div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>