<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <title>File Permissions</title>
    <meta charset="utf-8" />
    <meta content="There are several mechanisms for controlling access to files and directories, including standard permissions, special permissions, and access control lists (ACLs)." name="description" />
    <meta content="Adam Djellouli" name="keywords" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../resources/style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie-edge" http-equiv="X-UA-Compatible">
    </meta>
    </meta>
</head>

<body>
    <nav>
        <a class="logo" href="../index.html" title="Adam Djellouli - Home">
            <img alt="Adam Djellouli Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul>
            <li> <a href="../index.html" title="Home"> Home </a> </li>
            <li> <a class="active" href="../core/blog.html" title="Adam Djellouli's Blog - Programming, technology and more"> Blog </a> </li>
            <li> <a href="../core/tools.html" title="Useful Tools by Adam Djellouli"> Tools </a> </li>
            <li> <a href="../core/projects.html" title="Projects by Adam Djellouli"> Projects </a> </li>
            <li> <a href="../core/resume.html" title="Adam Djellouli's Resume"> Resume </a> </li>
            <li> <a href="../core/about.html" title="About Adam Djellouli"> About </a> </li>
            <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
        </ul>
    </nav>
    <section id="article-body"></section>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="file-permissions">File Permissions</h2>
            <p>There are several mechanisms for controlling access to files and directories, including standard permissions, special permissions, and access control lists (ACLs).</p>
            <h2 id="understanding-permissions">Understanding Permissions</h2>
            <p>Linux permissions control access to files and directories. There are three types of permissions: read (r), write (w), and execute (x).</p>
            <p>
            <table>
                <tr>
                    <td>Permission</td>
                    <td>Files</td>
                    <td>Dirs</td>
                </tr>
                <tr>
                    <td>read</td>
                    <td>User can read file's content</td>
                    <td>User can list files in the directory</td>
                </tr>
                <tr>
                    <td>write</td>
                    <td>User can modify file's content</td>
                    <td>User can add and delete files in the directory</td>
                </tr>
                <tr>
                    <td>execute</td>
                    <td>User can run the file as a command</td>
                    <td>User can enter the directory</td>
                </tr>
            </table>
            </p>
            <h3 id="defining-permissions-symbolically">Defining Permissions symbolically</h3>
            <p>Permissions may be specified symbolically, using the symbols.</p>
            <p>| Symbol | Meaning |
                | ------ | --------- |
                | u | user |
                | g | group |
                | o | other |
                | a | all |
                | r | read |
                | w | write |
                | x | execute |
                | + | add |
                | - | remove |
                | = | assign |</p>
            <p>ForÂ example,Â theÂ followingÂ commandÂ willÂ grantÂ theÂ file'sÂ ownerÂ executionÂ permission:</p>
            <p>
            <div>
                <pre><code class="language-bash">chmod u+x file</code></pre>
            </div>
            </p>
            <h2 id="numeric-permissions">Numeric Permissions</h2>
            <p>Permissions are represented by three digits specifying permissions for the owner (user), group, and others.</p>
            <p>
            <table>
                <tr>
                    <td>Permissions</td>
                    <td>Digit</td>
                </tr>
                <tr>
                    <td>---</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>--x</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>-w-</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>-wx</td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>r--</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>r-x</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td>rw-</td>
                    <td>6</td>
                </tr>
                <tr>
                    <td>rwx</td>
                    <td>7</td>
                </tr>
            </table>
            </p>
            <p>Each digit is made up of three bits, with each bit representing a particular permission: read (r), write (w), and execute (x). The permission mode is written as three octal digits, with each digit corresponding to the permissions for the user, group, and others, respectively.</p>
            <p>For example, the permission mode 771 specifies that:</p>
            <ul>
                <li>the user has read, write, and execute permissions (7 = rwx)</li>
                <li>the group has read, write, and execute permissions (7 = rwx)</li>
                <li>others have execute permissions (1 = --x)</li>
            </ul>
            <p>You can use the <code>chmod</code> command to change the permission mode of a file or directory. For example:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod 771 path/to/file.txt</code></pre>
            </div>
            </p>
            <h2 id="default-permissions">Default Permissions</h2>
            <p>Default permissions define the access rights for new files and directories. By default, new files have permissions <code>rw-rw-rw-</code> (<code>666</code>), allowing any user to read and write but not execute the file. New directories have permissions <code>rwxrwxrwx</code> (<code>777</code>), permitting any user to read, write, and execute within the directory.</p>
            <p>Use the umask command to modify default permissions for new files and directories. The umask is a number indicating which permissions should be removed (masked) when creating a new file or directory. For instance, a umask of <code>0022</code> removes write permission for others, resulting in default permissions of <code>rw-r--r--</code> (<code>644</code>) for new files and <code>rwxr-xr-x</code> (<code>755</code>) for new directories.</p>
            <p>To view the current umask value, use the umask command:</p>
            <p>
            <div>
                <pre><code class="language-bash">umask</code></pre>
            </div>
            </p>
            <p>To set the umask value, use the umask command with the desired octal value:</p>
            <p>
            <div>
                <pre><code class="language-bash">umask 0022</code></pre>
            </div>
            </p>
            <p>The umask value applies only to new files and directories, not existing ones.</p>
            <p>Examples of common umask values and the resulting default permissions:</p>
            <p>
            <table>
                <tr>
                    <td>Umask value</td>
                    <td>Default file permissions</td>
                    <td>Default directory permissions</td>
                </tr>
                <tr>
                    <td>022</td>
                    <td>rw-r--r--</td>
                    <td>rwxr-xr-x</td>
                </tr>
                <tr>
                    <td>027</td>
                    <td>rw-r-----</td>
                    <td>rwxr-x---</td>
                </tr>
                <tr>
                    <td>077</td>
                    <td>rw-------</td>
                    <td>rwx------</td>
                </tr>
            </table>
            </p>
            <p>For example, if we want to:</p>
            <ol>
                <li>Prevent the file's owner (user) from being granted the execute permission while keeping other owner permissions;</li>
                <li>Allow the group to read but restrict writing or executing;</li>
                <li>Grant write permission for others without changing other permissions.</li>
            </ol>
            <p>Then, we would use:</p>
            <p>
            <div>
                <pre><code class="language-bash">umask u-x,g=r,o+w</code></pre>
            </div>
            </p>
            <h2 id="special-permissions-setuid-setgid-and-the-sticky-bit">Special Permissions: setuid, setgid, and the Sticky Bit</h2>
            <p>Linux has special permissions that can be set on files and directories for additional privileges or restrictions:</p>
            <ul>
                <li><code>setuid</code>: a bit that enables an executable to run with the file owner's privileges. Useful for allowing users to execute certain programs as the file owner, even without direct file access permissions.</li>
                <li><code>setgid</code>: a bit that allows an executable to run with the file's group privileges. Useful for sharing access to a program or files with a group of users without individual file access permissions.</li>
                <li><code>sticky bi</code>t: a directory bit that lets only the owner or root remove files and subdirectories. Useful for preventing users from deleting or altering files in a shared directory.</li>
            </ul>
            <p>To set the setuid bit on a file, use the chmod command with the <code>u+s</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod u+s /path/to/file</code></pre>
            </div>
            </p>
            <p>To remove the setuid bit, use the chmod command with the <code>u-s</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod u-s /path/to/file</code></pre>
            </div>
            </p>
            <p>To set the setgid bit on a directory, use the chmod command with the <code>g+s</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod g+s /path/to/dir</code></pre>
            </div>
            </p>
            <p>To remove the setgid bit, use the chmod command with the <code>g-s</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod g-s /path/to/dir</code></pre>
            </div>
            </p>
            <p>To set the sticky bit on a directory, use the chmod command with the <code>+t</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod +t /path/to/dir</code></pre>
            </div>
            </p>
            <p>To remove the sticky bit, use the chmod command with the <code>-t</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">chmod -t /path/to/dir</code></pre>
            </div>
            </p>
            <p>Use these special permissions cautiously, as they may pose security risks if misused.</p>
            <h2 id="acls">ACls</h2>
            <p>ACLs are discretionary access control systems built on top of standard Linux permissions. They provide finer control over file and directory access and manipulation, beyond regular user, group, and other permissions.</p>
            <p>Not all tools support ACLs, but modern mke2fs usually sets ACL in default mount options during filesystem creation in "enterprise" Linux distributions. The filesystem must be mounted with the acl option to use ACLs.</p>
            <p>Use the <code>setfacl</code> command to set (replace), modify, or remove a file or directory's ACL. It can also update and delete ACL entries for specified files and directories. If no path is provided, file and directory names come from standard input (stdin). Each input line should have one path name.</p>
            <p>Modify ACLs using the <code>-m</code> flag followed by the desired ACL specification:</p>
            <p>
            <div>
                <pre><code class="language-shell">setfacl -m g:group_name:rw /opt/test</code></pre>
            </div>
            </p>
            <p>Remove the ACL using the <code>-x</code> flag followed by the ACL specification to be removed:</p>
            <p>
            <div>
                <pre><code class="language-shell">setfacl -x g:group_name /opt/test</code></pre>
            </div>
            </p>
            <p>Display a file or directory's ACL using the <code>-l</code> flag:</p>
            <p>
            <div>
                <pre><code class="language-shell">getfacl /opt/test</code></pre>
            </div>
            </p>
            <p>Examples of common ACL specifications:</p>
            <ul>
                <li><code>u:user_name:rwx</code>: grant read, write, and execute permissions to user_name</li>
                <li><code>g:group_name:r-x</code>: grant read and execute permissions to group_name</li>
                <li><code>o:r--</code>: grant read permission to others</li>
                <li><code>m:rwx</code>: grant read, write, and execute permissions to file owner (u) and file's group (g)</li>
                <li><code>:r-x</code>: grant read and execute permissions to everyone (equivalent to a:r-x)</li>
                <li><code>:---</code>: remove all permissions for everyone (equivalent to a:---)</li>
            </ul>
            <p>ACLs are applied in addition to standard Linux permissions and may override or augment them. For instance, a file with standard permissions <code>rw-rw-r--</code> and an ACL entry <code>g:r-x</code> grants the group read and execute permissions, despite the standard permissions not granting execute permission.</p>
            <h2 id="challenges">Challenges</h2>
            <ol>
                <li>Create a temporary text file named <code>temp.txt</code> in your home directory. Check the permissions using <code>ls -l</code>. You might see:</li>
            </ol>
            <p>
            <div>
                <pre><code class="language-bash">-rw-rw-r-- 1 user_name user_group  8 Nov 21 18:02 temp.txt</code></pre>
            </div>
            </p>
            <p>The file is owned by "user_name" and the group "user_group", who can write to it. Other users can read it. Remove write permission for "user_group" and read permission from others.</p>
            <ol>
                <li>Copy a root-owned file from <code>/etc/</code> to your home directory. Who owns this file now?</li>
                <li>Display any file's umask in both octal and symbolic form.</li>
                <li>What happens if a file owner lacks the necessary permissions to interact with the file? Can they still remove it?</li>
                <li>Describe what happens when you try to remove a group's write permission to the file and read permission from others.</li>
                <li>Explain the difference between permissions and ACLs.</li>
                <li>Can a non-owner user change a file or directory's permissions?</li>
                <li>Should you use ACLs or permissions to restrict file and directory access?</li>
            </ol>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#file-permissions">File Permissions</a></li>
                <li><a href="#understanding-permissions">Understanding Permissions</a></li>
                <li><a href="#defining-permissions-symbolically">Defining Permissions symbolically</a></li>
                <li><a href="#numeric-permissions">Numeric Permissions</a></li>
                <li><a href="#default-permissions">Default Permissions</a></li>
                <li><a href="#special-permissions-setuid-setgid-and-the-sticky-bit">Special Permissions: setuid, setgid, and the Sticky Bit</a></li>
                <li><a href="#acls">ACls</a></li>
                <li><a href="#challenges">Challenges</a></li>
            </ol>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/addjellouli/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../app.js"></script>
    </footer>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>