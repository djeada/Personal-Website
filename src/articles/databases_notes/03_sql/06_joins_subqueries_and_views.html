<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Joins, Subqueries, and Views in SQL</title>
    <meta content="Welcome to the fascinating world of SQL, where we can manipulate and retrieve data from relational databases using powerful tools like joins, subqueries, and views." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>Last modified: December 27, 2023</i></p>
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="joins-subqueries-and-views-in-sql">Joins, Subqueries, and Views in SQL</h2>
            <p>Welcome to the fascinating world of SQL, where we can manipulate and retrieve data from relational databases using powerful tools like joins, subqueries, and views. These concepts are essential for anyone looking to master SQL and database management. Let's dive in and explore each of these techniques in detail, with examples to solidify your understanding.</p>
            <h3 id="joins-combining-data-from-multiple-tables">Joins: Combining Data from Multiple Tables</h3>
            <p>In relational databases, data is often spread across multiple tables to reduce redundancy and improve organization. However, there are times when we need to combine this data to get a complete picture. This is where <strong>joins</strong> come into play.</p>
            <h4 id="understanding-joins">Understanding Joins</h4>
            <p>A <strong>join</strong> is an SQL operation that allows you to combine rows from two or more tables based on a related column between them. Think of joins as a way to connect tables "horizontally," bringing together related data to answer complex queries.</p>
            <p>There are several types of joins:</p>
            <ul>
                <li>An <strong>INNER JOIN</strong> returns rows only when there is a matching value in both joined tables, excluding unmatched rows. </li>
                <li>A <strong>LEFT JOIN</strong> (or <strong>LEFT OUTER JOIN</strong>) includes all rows from the left table and the matched rows from the right table, with NULLs for non-matching right-side rows. </li>
                <li>A <strong>RIGHT JOIN</strong> (or <strong>RIGHT OUTER JOIN</strong>) includes all rows from the right table and the matched rows from the left table, with NULLs for non-matching left-side rows. </li>
                <li>A <strong>FULL JOIN</strong> (or <strong>FULL OUTER JOIN</strong>) combines rows from both tables, including all matched and unmatched rows, filling in NULLs where no match exists. </li>
            </ul>
            <p>Let's explore each type with examples.</p>
            <h4 id="setting-up-example-tables">Setting Up Example Tables</h4>
            <p>We'll use two tables for our examples: <code>Employees</code> and <code>Departments</code>.</p>
            <p><strong>Employees Table</strong></p>
            <p>
            <table>
                <tr>
                    <td>EmployeeID</td>
                    <td>LastName</td>
                    <td>DepartmentID</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Smith</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Johnson</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Brown</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Taylor</td>
                    <td>NULL</td>
                </tr>
            </table>
            </p>
            <p><strong>Departments Table</strong></p>
            <p>
            <table>
                <tr>
                    <td>DepartmentID</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Information Technology</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <h4 id="inner-join">INNER JOIN</h4>
            <p>An <strong>INNER JOIN</strong> returns rows when there is a match in both tables. It's like finding the intersection of the two tables.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT e.LastName, d.DepartmentName
FROM Employees AS e
INNER JOIN Departments AS d
ON e.DepartmentID = d.DepartmentID;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>LastName</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>Smith</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Johnson</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Brown</td>
                    <td>Information Technology</td>
                </tr>
            </table>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>Only employees with a <code>DepartmentID</code> that matches an entry in the <code>Departments</code> table are returned.</li>
                <li>Employee Taylor is excluded because their <code>DepartmentID</code> is <code>NULL</code>.</li>
            </ul>
            <h4 id="left-join-left-outer-join-">LEFT JOIN (LEFT OUTER JOIN)</h4>
            <p>A <strong>LEFT JOIN</strong> returns all rows from the left table and matched rows from the right table. If there is no match, <code>NULL</code> values are returned for columns from the right table.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT e.LastName, d.DepartmentName
FROM Employees AS e
LEFT JOIN Departments AS d
ON e.DepartmentID = d.DepartmentID;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>LastName</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>Smith</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Johnson</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Brown</td>
                    <td>Information Technology</td>
                </tr>
                <tr>
                    <td>Taylor</td>
                    <td>NULL</td>
                </tr>
            </table>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>All employees are returned.</li>
                <li>For Taylor, who doesn't have a <code>DepartmentID</code>, the <code>DepartmentName</code> is <code>NULL</code>.</li>
            </ul>
            <h4 id="right-join-right-outer-join-">RIGHT JOIN (RIGHT OUTER JOIN)</h4>
            <p>A <strong>RIGHT JOIN</strong> returns all rows from the right table and matched rows from the left table. If there is no match, <code>NULL</code> values are returned for columns from the left table.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT e.LastName, d.DepartmentName
FROM Employees AS e
RIGHT JOIN Departments AS d
ON e.DepartmentID = d.DepartmentID;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>LastName</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>Smith</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Johnson</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Brown</td>
                    <td>Information Technology</td>
                </tr>
                <tr>
                    <td>NULL</td>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>All departments are returned.</li>
                <li>For the Finance department, there is no matching employee, so <code>LastName</code> is <code>NULL</code>.</li>
            </ul>
            <h4 id="full-join-full-outer-join-">FULL JOIN (FULL OUTER JOIN)</h4>
            <p>A <strong>FULL JOIN</strong> returns all rows when there is a match in one of the tables. If there is no match, <code>NULL</code> values are returned for the missing columns.</p>
            <p><strong>Note</strong>: Not all SQL implementations support <code>FULL JOIN</code>. In systems that don't, you can simulate it using a <code>UNION</code> of <code>LEFT JOIN</code> and <code>RIGHT JOIN</code>.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT e.LastName, d.DepartmentName
FROM Employees AS e
FULL OUTER JOIN Departments AS d
ON e.DepartmentID = d.DepartmentID;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>LastName</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>Smith</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Johnson</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Brown</td>
                    <td>Information Technology</td>
                </tr>
                <tr>
                    <td>Taylor</td>
                    <td>NULL</td>
                </tr>
                <tr>
                    <td>NULL</td>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>All employees and all departments are included.</li>
                <li><code>Taylor</code> has no department (<code>DepartmentName</code> is <code>NULL</code>).</li>
                <li>The Finance department has no employees (<code>LastName</code> is <code>NULL</code>).</li>
            </ul>
            <h4 id="cross-join">Cross Join</h4>
            <p>A <strong>CROSS JOIN</strong> returns the Cartesian product of the two tables, combining each row from the first table with every row from the second table.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT e.LastName, d.DepartmentName
FROM Employees AS e
CROSS JOIN Departments AS d;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>This query would return 12 rows (4 employees Ã— 3 departments), combining every employee with every department.</p>
            <h4 id="visualizing-joins">Visualizing Joins</h4>
            <p>SQL joins are powerful tools for combining data from two or more tables based on a related column. To better understand joins, letâ€™s explore them visually and explain how they work.</p>
            <h5>Inner Join</h5>
            <p>An <strong>Inner Join</strong> retrieves only the rows that have matching values in both tables. For instance, if you have an <code>Employees</code> table with a <code>DepartmentID</code> column and a <code>Departments</code> table with the same column, an inner join will return only those employees who are associated with an existing department. Any rows in the <code>Employees</code> table without a matching <code>DepartmentID</code> in the <code>Departments</code> table (and vice versa) are excluded.</p>
            <p>
            <div>
                <pre><code class="language-shell">+-----------+         +--------------+
| Employees |         | Departments  |
+-----------+         +--------------+
     |                         |
     | Matching DepartmentID   |
     +-------------------------+
             |
             v
+-------------------------------+
|     Resulting Rows            |
| (Employees with matching Dept)|
+-------------------------------+</code></pre>
            </div>
            </p>
            <p>This join is useful when youâ€™re interested solely in records with complete data from both sides. For example, to find employees who belong to a known department, you would use an inner join.</p>
            <h5>Left Join</h5>
            <p>A <strong>Left Join</strong> (or Left Outer Join) retrieves all rows from the left table (e.g., <code>Employees</code>) and the matching rows from the right table (e.g., <code>Departments</code>). If thereâ€™s no matching row in the right table, the result still includes the left tableâ€™s row, but with <code>NULL</code> values for the right tableâ€™s columns.</p>
            <p>
            <div>
                <pre><code class="language-shell">+-----------+         +--------------+
| Employees |         | Departments  |
+-----------+         +--------------+
     |                         |
     | Left table (all rows)   |
     +-------------------------+
             |
             v
+-------------------------------+
|     Resulting Rows            |
| (All Employees, with Dept info|
|  where available)             |
+-------------------------------+</code></pre>
            </div>
            </p>
            <p>For example, suppose you want a list of all employees, even those who are not currently assigned to a department. A left join ensures that even employees without a <code>DepartmentID</code> in the <code>Departments</code> table are included, with <code>NULL</code> filling in the missing department details.</p>
            <h5>Right Join</h5>
            <p>A <strong>Right Join</strong> (or Right Outer Join) retrieves all rows from the right table (e.g., <code>Departments</code>) and the matching rows from the left table (e.g., <code>Employees</code>). If thereâ€™s no matching row in the left table, the result includes the right tableâ€™s row with <code>NULL</code> values for the left tableâ€™s columns.</p>
            <p>
            <div>
                <pre><code class="language-shell">+-----------+         +--------------+
| Employees |         | Departments  |
+-----------+         +--------------+
     |                         |
     | Right table (all rows)  |
     +-------------------------+
             |
             v
+-------------------------------+
|     Resulting Rows            |
| (All Departments, with Emp info|
|  where available)             |
+-------------------------------+</code></pre>
            </div>
            </p>
            <p>This join is helpful when you want a list of all departments, regardless of whether they currently have any employees assigned to them. For instance, a right join can reveal departments with no staff.</p>
            <h5>Full Outer Join</h5>
            <p>A <strong>Full Outer Join</strong> retrieves all rows from both tables, combining matching rows where they exist. If a row in one table doesnâ€™t have a match in the other, the result still includes it, with <code>NULL</code> values filling in the missing data from the unmatched table.</p>
            <p>For example, a full outer join would provide a comprehensive view of all employees and all departments, including:</p>
            <ul>
                <li>Employees without departments (<code>NULL</code> in the department-related columns).</li>
                <li>Departments without employees (<code>NULL</code> in the employee-related columns).</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-shell">+-----------+         +--------------+
| Employees |         | Departments  |
+-----------+         +--------------+
     |                         |
     | All rows from both      |
     +-------------------------+
             |
             v
+-------------------------------+
|     Resulting Rows            |
| (All Employees and Departments|
|  with matching where possible)|
+-------------------------------+</code></pre>
            </div>
            </p>
            <p>This join is ideal for scenarios where you want a complete overview of both datasets, even when some relationships are missing.</p>
            <h3 id="subqueries-queries-within-queries">Subqueries: Queries within Queries</h3>
            <p>Subqueries allow you to nest one query inside another, enabling you to perform complex data retrieval in a structured and organized way.</p>
            <h4 id="understanding-subqueries">Understanding Subqueries</h4>
            <p>Subqueries can be used in various parts of an SQL statement:</p>
            <ul>
                <li>In the <code>SELECT</code> clause to compute a value.</li>
                <li>In the <code>FROM</code> clause as a table.</li>
                <li>In the <code>WHERE</code> clause to filter results based on dynamic criteria.</li>
            </ul>
            <p>There are two main types:</p>
            <ul>
                <li><strong>Non-correlated subqueries</strong> are independent of the outer query and can be executed separately, as they do not reference columns from the outer query. </li>
                <li><strong>Correlated subqueries</strong> depend on the outer query, referencing its columns and evaluating row by row, which can impact performance due to multiple executions. </li>
            </ul>
            <h5>Example Tables</h5>
            <p>We'll use the following tables:</p>
            <p><strong>Employees Table</strong></p>
            <p>
            <table>
                <tr>
                    <td>EmployeeID</td>
                    <td>LastName</td>
                    <td>Salary</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Smith</td>
                    <td>3000</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Johnson</td>
                    <td>3500</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Brown</td>
                    <td>2700</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Taylor</td>
                    <td>4200</td>
                </tr>
            </table>
            </p>
            <p><strong>Departments Table</strong></p>
            <p>
            <table>
                <tr>
                    <td>DepartmentID</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Information Technology</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <p><strong>DepartmentEmployees Table</strong></p>
            <p>
            <table>
                <tr>
                    <td>DepartmentID</td>
                    <td>EmployeeID</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>4</td>
                </tr>
            </table>
            </p>
            <h4 id="non-correlated-subquery-example">Non-correlated Subquery Example</h4>
            <p><strong>Goal</strong>: Find employees who earn more than the average salary.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT EmployeeID, LastName, Salary
FROM Employees
WHERE Salary &gt; (SELECT AVG(Salary) FROM Employees);</code></pre>
            </div>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>The subquery <code>(SELECT AVG(Salary) FROM Employees)</code> calculates the average salary.</li>
                <li>The outer query selects employees with a salary greater than this average.</li>
            </ul>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>EmployeeID</td>
                    <td>LastName</td>
                    <td>Salary</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Johnson</td>
                    <td>3500</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Taylor</td>
                    <td>4200</td>
                </tr>
            </table>
            </p>
            <h4 id="correlated-subquery-example">Correlated Subquery Example</h4>
            <p><strong>Goal</strong>: Find employees who earn more than the average salary in their department.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT e.EmployeeID, e.LastName, e.Salary, d.DepartmentName
FROM Employees AS e
JOIN DepartmentEmployees AS de ON e.EmployeeID = de.EmployeeID
JOIN Departments AS d ON de.DepartmentID = d.DepartmentID
WHERE e.Salary &gt; (
    SELECT AVG(e2.Salary)
    FROM Employees AS e2
    JOIN DepartmentEmployees AS de2 ON e2.EmployeeID = de2.EmployeeID
    WHERE de2.DepartmentID = de.DepartmentID
);</code></pre>
            </div>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>The subquery calculates the average salary for the employee's department.</li>
                <li>The outer query selects employees whose salary is above this average.</li>
                <li>This is a correlated subquery because it depends on the <code>DepartmentID</code> from the outer query.</li>
            </ul>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>EmployeeID</td>
                    <td>LastName</td>
                    <td>Salary</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Johnson</td>
                    <td>3500</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Taylor</td>
                    <td>4200</td>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <h4 id="subquery-in-select-clause">Subquery in SELECT Clause</h4>
            <p><strong>Goal</strong>: Display each employee's salary and the average salary across all employees.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT
    EmployeeID,
    LastName,
    Salary,
    (SELECT AVG(Salary) FROM Employees) AS AverageSalary
FROM Employees;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>EmployeeID</td>
                    <td>LastName</td>
                    <td>Salary</td>
                    <td>AverageSalary</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Smith</td>
                    <td>3000</td>
                    <td>3350</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Johnson</td>
                    <td>3500</td>
                    <td>3350</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Brown</td>
                    <td>2700</td>
                    <td>3350</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Taylor</td>
                    <td>4200</td>
                    <td>3350</td>
                </tr>
            </table>
            </p>
            <h4 id="using-exists-with-subqueries">Using EXISTS with Subqueries</h4>
            <p><strong>Goal</strong>: Find departments that have employees.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT DepartmentName
FROM Departments AS d
WHERE EXISTS (
    SELECT 1
    FROM DepartmentEmployees AS de
    WHERE de.DepartmentID = d.DepartmentID
);</code></pre>
            </div>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>The <code>EXISTS</code> clause checks if the subquery returns any rows.</li>
                <li>If it does, the department is included in the result.</li>
            </ul>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>Information Technology</td>
                </tr>
                <tr>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <h4 id="common-table-expressions-ctes-">Common Table Expressions (CTEs)</h4>
            <p>CTEs are similar to subqueries but are defined before the main query using the <code>WITH</code> keyword, providing better readability.</p>
            <p><strong>Example</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">WITH DepartmentSalaries AS (
    SELECT de.DepartmentID, AVG(e.Salary) AS AvgSalary
    FROM Employees AS e
    JOIN DepartmentEmployees AS de ON e.EmployeeID = de.EmployeeID
    GROUP BY de.DepartmentID
)
SELECT d.DepartmentName, ds.AvgSalary
FROM Departments AS d
JOIN DepartmentSalaries AS ds ON d.DepartmentID = ds.DepartmentID;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>DepartmentName</td>
                    <td>AvgSalary</td>
                </tr>
                <tr>
                    <td>Human Resources</td>
                    <td>3250</td>
                </tr>
                <tr>
                    <td>Information Technology</td>
                    <td>2700</td>
                </tr>
                <tr>
                    <td>Finance</td>
                    <td>4200</td>
                </tr>
            </table>
            </p>
            <h3 id="views-creating-virtual-tables">Views: Creating Virtual Tables</h3>
            <p>A <strong>view</strong> is a virtual table that is based on the result set of an SQL query. Views simplify complex queries, enhance security by limiting data access, and can improve performance in certain situations.</p>
            <h4 id="creating-a-view">Creating a View</h4>
            <p><strong>Goal</strong>: Create a view that shows employee details along with their department names.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">CREATE VIEW EmployeeDetails AS
SELECT e.EmployeeID, e.LastName, e.Salary, d.DepartmentName
FROM Employees AS e
JOIN DepartmentEmployees AS de ON e.EmployeeID = de.EmployeeID
JOIN Departments AS d ON de.DepartmentID = d.DepartmentID;</code></pre>
            </div>
            </p>
            <p><strong>Explanation</strong></p>
            <ul>
                <li>The view <code>EmployeeDetails</code> encapsulates the join logic.</li>
                <li>Users can query <code>EmployeeDetails</code> as if it were a table.</li>
            </ul>
            <h3 id="querying-a-view">Querying a View</h3>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">SELECT * FROM EmployeeDetails
WHERE Salary &gt; 3000;</code></pre>
            </div>
            </p>
            <p><strong>Result</strong></p>
            <p>
            <table>
                <tr>
                    <td>EmployeeID</td>
                    <td>LastName</td>
                    <td>Salary</td>
                    <td>DepartmentName</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Johnson</td>
                    <td>3500</td>
                    <td>Human Resources</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Taylor</td>
                    <td>4200</td>
                    <td>Finance</td>
                </tr>
            </table>
            </p>
            <h4 id="advantages-of-using-views">Advantages of Using Views</h4>
            <ul>
                <li>Complex queries can be simplified for end-users.</li>
                <li>Restrict access to specific data by exposing only certain columns or rows.</li>
                <li>Centralize query logic; changes in the underlying tables require updates only in the view.</li>
            </ul>
            <h4 id="updating-a-view">Updating a View</h4>
            <p>If you need to modify a view, you can use <code>CREATE OR REPLACE VIEW</code>.</p>
            <p><strong>SQL Query</strong></p>
            <p>
            <div>
                <pre><code class="language-sql">CREATE OR REPLACE VIEW EmployeeDetails AS
SELECT e.EmployeeID, e.LastName, e.Salary, d.DepartmentName, de.DepartmentID
FROM Employees AS e
JOIN DepartmentEmployees AS de ON e.EmployeeID = de.EmployeeID
JOIN Departments AS d ON de.DepartmentID = d.DepartmentID;</code></pre>
            </div>
            </p>
            <p>The view now includes the <code>DepartmentID</code> column.</p>
            <h4 id="deleting-a-view">Deleting a View</h4>
            <p>To remove a view from the database:</p>
            <p>
            <div>
                <pre><code class="language-sql">DROP VIEW EmployeeDetails;</code></pre>
            </div>
            </p>
            <p><strong>Note</strong>: Deleting a view does not affect the underlying data.</p>
            <h4 id="updatable-views">Updatable Views</h4>
            <p>Some databases allow views to be updatable, meaning you can perform <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> operations on the view, which then affect the underlying tables. Certain conditions must be met:</p>
            <ul>
                <li>The view must reference exactly one table.</li>
                <li>The view must include all NOT NULL columns without default values.</li>
                <li>The view must not contain GROUP BY, HAVING, or DISTINCT clauses.</li>
            </ul>
            <p><strong>Example</strong></p>
            <p>Assuming our view meets the criteria:</p>
            <p>
            <div>
                <pre><code class="language-sql">UPDATE EmployeeDetails
SET Salary = Salary * 1.05
WHERE EmployeeID = 3;</code></pre>
            </div>
            </p>
            <p>This would increase Brown's salary by 5% in the <code>Employees</code> table.</p>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#joins-subqueries-and-views-in-sql">Joins, Subqueries, and Views in SQL</a>
                <ol>
                    <li><a href="#joins-combining-data-from-multiple-tables">Joins: Combining Data from Multiple Tables</a>
                        <ol>
                            <li><a href="#understanding-joins">Understanding Joins</a></li>
                            <li><a href="#setting-up-example-tables">Setting Up Example Tables</a></li>
                            <li><a href="#inner-join">INNER JOIN</a></li>
                            <li><a href="#left-join-left-outer-join-">LEFT JOIN (LEFT OUTER JOIN)</a></li>
                            <li><a href="#right-join-right-outer-join-">RIGHT JOIN (RIGHT OUTER JOIN)</a></li>
                            <li><a href="#full-join-full-outer-join-">FULL JOIN (FULL OUTER JOIN)</a></li>
                            <li><a href="#cross-join">Cross Join</a></li>
                            <li><a href="#visualizing-joins">Visualizing Joins</a></li>
                        </ol>
                    </li>
                    <li><a href="#subqueries-queries-within-queries">Subqueries: Queries within Queries</a>
                        <ol>
                            <li><a href="#understanding-subqueries">Understanding Subqueries</a></li>
                            <li><a href="#non-correlated-subquery-example">Non-correlated Subquery Example</a></li>
                            <li><a href="#correlated-subquery-example">Correlated Subquery Example</a></li>
                            <li><a href="#subquery-in-select-clause">Subquery in SELECT Clause</a></li>
                            <li><a href="#using-exists-with-subqueries">Using EXISTS with Subqueries</a></li>
                            <li><a href="#common-table-expressions-ctes-">Common Table Expressions (CTEs)</a></li>
                        </ol>
                    </li>
                    <li><a href="#views-creating-virtual-tables">Views: Creating Virtual Tables</a>
                        <ol>
                            <li><a href="#creating-a-view">Creating a View</a></li>
                        </ol>
                    </li>
                    <li><a href="#querying-a-view">Querying a View</a>
                        <ol>
                            <li><a href="#advantages-of-using-views">Advantages of Using Views</a></li>
                            <li><a href="#updating-a-view">Updating a View</a></li>
                            <li><a href="#deleting-a-view">Deleting a View</a></li>
                            <li><a href="#updatable-views">Updatable Views</a></li>
                        </ol>
                    </li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li>Introduction to Databases<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/01_databases_intro.html">Databases Intro</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/02_types_of_databases.html">Types of Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/03_database_management_systems_dbms_.html">Database Management Systems Dbms</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/04_data_models.html">Data Models</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/05_glossary.html">Glossary</a></li>
                        </ol>
                    </li>
                    <li>Database Design<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/01_requirements_analysis.html">Requirements Analysis</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/02_normalization.html">Normalization</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/03_denormalization.html">Denormalization</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/04_indexing_strategies.html">Indexing Strategies</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/05_data_integrity.html">Data Integrity</a></li>
                        </ol>
                    </li>
                    <li>Sql<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/01_intro_to_sql.html">Intro to Sql</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/02_data_definition_language_ddl.html">Data Definition Language Ddl</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/03_data_manipulation_language_dml.html">Data Manipulation Language Dml</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/04_data_control_language_dcl.html">Data Control Language Dcl</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/05_transaction_control_language_tcl.html">Transaction Control Language Tcl</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/06_joins_subqueries_and_views.html">Joins Subqueries and Views</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/07_stored_procedures_and_functions.html">Stored Procedures and Functions</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/08_triggers.html">Triggers</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/09_hierarchical_data.html">Hierarchical Data</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/10_aggregate_functions.html">Aggregate Functions</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/11_window_functions.html">Window Functions</a></li>
                        </ol>
                    </li>
                    <li>Acid Properties and Transactions<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/01_transactions_intro.html">Transactions Intro</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/02_atomicity.html">Atomicity</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/03_consistency.html">Consistency</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/04_isolation.html">Isolation</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/05_durability.html">Durability</a></li>
                        </ol>
                    </li>
                    <li>Storage and Indexing<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/01_how_tables_and_indexes_are_stored_on_disk.html">How Tables and Indexes Are Stored on Disk</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/02_row_based_vs_column_based_databases.html">Row Based vs Column Based Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/03_primary_key_vs_secondary_key.html">Primary Key vs Secondary Key</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/04_database_pages.html">Database Pages</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/05_indexing.html">Indexing</a></li>
                        </ol>
                    </li>
                    <li>Distributed Databases<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/01_distributed_database_systems.html">Distributed Database Systems</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/02_partitioning.html">Partitioning</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/03_sharding.html">Sharding</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/04_partitioning_vs_sharding.html">Partitioning vs Sharding</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/05_consistent_hashing.html">Consistent Hashing</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/06_cap_theorem.html">Cap Theorem</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/07_eventual_consistency.html">Eventual Consistency</a></li>
                        </ol>
                    </li>
                    <li>Concurrency Control<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/01_shared_vs_exclusive_locks.html">Shared vs Exclusive Locks</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/02_deadlocks.html">Deadlocks</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/03_two_phase_locking.html">Two Phase Locking</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/04_double_booking_problem.html">Double Booking Problem</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/05_serializable_vs_repeatable_read.html">Serializable vs Repeatable Read</a></li>
                        </ol>
                    </li>
                    <li>Database Performance<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/01_query_optimization_techniques.html">Query Optimization Techniques</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/02_indexing_strategies.html">Indexing Strategies</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/03_database_caching.html">Database Caching</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/04_materialized_views.html">Materialized Views</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/05_accessing_database_in_code.html">Accessing Database in Code</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/06_working_with_billion_row_table.html">Working with Billion Row Table</a></li>
                        </ol>
                    </li>
                    <li>Database Replication<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/01_intro_to_replication.html">Intro to Replication</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/02_master_standby_replication.html">Master Standby Replication</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/03_multi_master_replication.html">Multi Master Replication</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/04_synchronous_vs_asynchronous_replication.html">Synchronous vs Asynchronous Replication</a></li>
                        </ol>
                    </li>
                    <li>Nosql Databases<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/01_nosql_databases_intro.html">Nosql Databases Intro</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/02_types_of_nosql_databases.html">Types of Nosql Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/03_querying_nosql_databases.html">Querying Nosql Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/04_crud_in_sql_vs_nosql.html">Crud in Sql vs Nosql</a></li>
                        </ol>
                    </li>
                    <li>Security Best Practices<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/01_backup_and_recovery_strategies.html">Backup and Recovery Strategies</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/02_database_security.html">Database Security</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/03_capacity_planning.html">Capacity Planning</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/04_database_migration.html">Database Migration</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/05_performance_monitoring_and_tuning.html">Performance Monitoring and Tuning</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/06_sql_injection.html">Sql Injection</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/07_crash_recovery_in_databases.html">Crash Recovery in Databases</a></li>
                        </ol>
                    </li>
                    <li>Database Engines<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/01_sqlite.html">Sqlite</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/02_mysql.html">Mysql</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/03_postgresql.html">Postgresql</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/04_mongodb.html">Mongodb</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/05_neo4j.html">Neo4J</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/06_aws_services.html">Aws Services</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/07_choosing_database.html">Choosing Database</a></li>
                        </ol>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../../app.js"></script>
    </footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>