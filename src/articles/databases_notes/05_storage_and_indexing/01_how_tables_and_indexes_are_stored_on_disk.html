<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Storage of Tables and Indexes on Disk</title>
    <meta content="Exploring how databases store tables and indexes on disk can provide valuable insights into optimizing performance and managing data efficiently." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper">
        <section id="article-body">
            <div class="article-action-buttons"><button class="btn-suggest-edit" title="Suggest Edit">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M4 21h4l11-11-4-4L4 17v4z" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button><button class="btn-create-issue" title="Create Issue">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"></circle>
                        <line stroke="currentColor" stroke-width="2" x1="12" x2="12" y1="8" y2="12"></line>
                        <circle cx="12" cy="16" fill="currentColor" r="1"></circle>
                    </svg>
                </button><button class="btn-download" title="Download">
                    <svg fill="none" height="20" viewbox="0 0 24 24" width="20">
                        <path d="M12 5v14m0 0l-6-6m6 6l6-6" stroke="currentColor" stroke-width="2"></path>
                    </svg>
                </button></div>
            <p style="text-align: right;"><i>Last modified: May 16, 2025</i></p>
            <p style="text-align: right;"><i>This article is written in: 🇺🇸</i></p>
            <h2 id="storage-of-tables-and-indexes-on-disk">Storage of Tables and Indexes on Disk</h2>
            <p>Exploring how databases store tables and indexes on disk can provide valuable insights into optimizing performance and managing data efficiently. Let's delve into the fundamental concepts of disk storage in relational databases, focusing on the structures and mechanisms that underlie data organization.</p>
            <h3 id="operating-system-files-datafiles-">Operating-System Files (“Datafiles”)</h3>
            <p>
            <div>
                <pre><code class="language-shell">┌──────────────────────────────────────────────────────────────────────┐
│ tablespace_sales                                                     │
│┌───────────────┐┌───────────────┐┌───────────────┐                  │
││ sales01.dbf   ││ sales02.dbf   ││ sales03.dbf   │  ← ordinary files│
│└───────────────┘└───────────────┘└───────────────┘                  │
└──────────────────────────────────────────────────────────────────────┘</code></pre>
            </div>
            </p>
            <ul>
                <li>A tablespace/filegroup is a logical pool of one or more datafiles.</li>
                <li>Every byte of every table, index, and catalog record is somewhere inside those files.</li>
                <li>Growing a table means extending a file or adding another file; the DBA chooses the policy.</li>
                <li>File layout on the physical platter/SSD is up to the OS unless the DBA pre-allocates contiguous space.</li>
            </ul>
            <h3 id="extents-pages-allocation-units-">Extents &amp; Pages (Allocation Units)</h3>
            <p>
            <div>
                <pre><code class="language-shell">DATAFILE  (sales01.dbf)
│
├─ Extent #17  (8 pages @ 8 KB = 64 KB)
│  ├─ Page 0  (heap rows)
│  ├─ Page 1  (heap rows)
│  ├─ Page 2  (B-tree branch)
│  ├─ Page 3  (free)
│  ├─ Page 4  (B-tree leaf)
│  ├─ Page 5  (row-overflow chain)
│  ├─ Page 6  (heap rows)
│  └─ Page 7  (free)
└─ Extent #18  …</code></pre>
            </div>
            </p>
            <ul>
                <li>A <strong>page</strong> (a.k.a. block) is the atomic I/O unit; common sizes: 4 KB, 8 KB, 16 KB.</li>
                <li>Eight or sixteen consecutive pages form an <strong>extent</strong>; allocating extents keeps related pages adjacent.</li>
                <li>The buffer pool caches whole pages; a single row read always drags its entire page into RAM.</li>
                <li>Sequential scans jump extent-to-extent, minimizing head seeks on spinning media.</li>
            </ul>
            <h3 id="anatomy-of-a-data-page">Anatomy of a Data Page</h3>
            <p>
            <div>
                <pre><code class="language-shell">8 KB PAGE (heap)
┌──────────────────┐ 0x0000
│ Page Header      │ ← checksum, LSN, page-type flag, free-space pointers
├──────────────────┤
│ Item Slot Array  │ ← 2-byte offsets, newest rows grow this downward
│ ─┬─┬─┬─┬─┬─┬─┬─  │
├─↓─↓─↓─↓─↓─↓─↓─↓──┤
│                  │
│   Tuple Data     │ ← rows grow upward
│                  │
└──────────────────┘ 0x2000 (end)</code></pre>
            </div>
            </p>
            <ul>
                <li>The header tells the engine what page type it is and where free space begins/ends.</li>
                <li>The slot array lets rows move inside the page without breaking external row IDs.</li>
                <li>A delete clears the slot; an update that no longer fits may move the row elsewhere and leave a forwarding stub.</li>
                <li>Free space in the middle is coalesced during a <strong>VACUUM / OPTIMIZE / REORG</strong> pass.</li>
            </ul>
            <h3 id="heap-table-lifecycle">Heap Table Lifecycle</h3>
            <p>
            <div>
                <pre><code class="language-shell">INSERT PATH
Client → Buffer Pool → find page w/ ≥ row_size free → write row → mark page dirty
                                                             ↓
                                            checkpoint writes dirty page back to disk</code></pre>
            </div>
            </p>
            <ul>
                <li>Rows are appended to the first page listed as “enough-free” in the free-space map.</li>
                <li>Delete = mark slot unused; data bytes may linger until vacuum to avoid extra WAL.</li>
                <li>Update that grows = move row; original slot now a redirect pointer; causes internal fragmentation.</li>
                <li>Heap scans read every page from first to last; index scans use row IDs to jump directly.</li>
            </ul>
            <h3 id="clustered-index-organized-tables">Clustered (Index-Organized) Tables</h3>
            <p>
            <div>
                <pre><code class="language-shell">CLUSTERED B-TREE
          (root p500)
        /               \
   (p510)               (p560)   ← branch nodes
   /   \                 /   \
p512  p518           p562   p570 ← leaf nodes = full rows</code></pre>
            </div>
            </p>
            <ul>
                <li>The primary-key index <em>is</em> the table; leaf pages hold whole rows in key order.</li>
                <li>Range predicates (<code>BETWEEN</code>, <code>&gt;=</code>) read consecutive leaf pages with almost no random I/O.</li>
                <li>Random UUID keys scatter inserts → many page splits → higher write amplification.</li>
                <li>Enlarging a row may push it to another leaf, updating parent pointers.</li>
            </ul>
            <h3 id="secondary-non-clustered-index-walk">Secondary (Non-Clustered) Index Walk</h3>
            <p>
            <div>
                <pre><code class="language-shell">SELECT … WHERE sku = 'A42';
┌─────────────┐
│  index root │
└──────┬──────┘
       │  (binary search)
       ▼
┌─────────────┐
│  index leaf │  contains (sku, page#, slot#)
└──────┬──────┘
       │  (single pointer hop)
       ▼
┌─────────────┐
│  heap page  │  contains actual row
└─────────────┘</code></pre>
            </div>
            </p>
            <ul>
                <li>Leaf stores only key + <strong>RID</strong> (page#, slot#) so it stays compact.</li>
                <li>Query path: traverse the B-tree → fetch heap page → return row.</li>
                <li>If the leaf already includes every column in the <code>SELECT</code> list, the engine performs an <strong>index-only scan</strong> and never touches the heap page.</li>
            </ul>
            <h3 id="other-index-types-in-one-picture">Other Index Types in One Picture</h3>
            <p>
            <div>
                <pre><code class="language-shell">┌──────────── HASH ────────────┐   equality only
│ key → hash → bucket page     │
└──────────────────────────────┘
┌────────── BITMAP ────────────┐   low-cardinality columns
│ value1  1010011001           │
│ value2  0101100100           │
└──────────────────────────────┘
┌───── GIN / INVERTED ─────────┐   arrays, JSON, full-text
│ term → posting list of RIDs  │
└──────────────────────────────┘</code></pre>
            </div>
            </p>
            <ul>
                <li>Hash = O(1) equality, no range support, directory may need re-splitting.</li>
                <li>Bitmap = 1 bit per row; logical AND/OR of bitmaps solves multi-column predicates quickly.</li>
                <li>Partial index = any type restricted by a <code>WHERE</code> clause; rows outside predicate are invisible to the index.</li>
                <li>Covering/index-include = copy extra columns into leaf → query satisfied directly from index.</li>
            </ul>
            <h3 id="free-space-extent-maps">Free-Space &amp; Extent Maps</h3>
            <p>
            <div>
                <pre><code class="language-shell">FREE SPACE MAP (FSM)
page_id │ free_bytes
────────┼─────────────
   100  │  800
   101  │    0
   102  │ 1600
…</code></pre>
            </div>
            </p>
            <ul>
                <li>FSM answers “which page has ≥ N free bytes?” in O(1) time.</li>
                <li>When no page qualifies, the engine grabs a free page from the <strong>Extent Map</strong>.</li>
                <li>Extent Map tracks which extents are allocated vs. brand-new vs. totally empty and reusable.</li>
                <li>Large deletes make extents 100 % empty; a background task hands them back to the file so other objects can grow there.</li>
            </ul>
            <h3 id="write-ahead-log-wal-relationship">Write-Ahead Log (WAL) Relationship</h3>
            <p>
            <div>
                <pre><code class="language-shell">┌──────────────┐   (1) change row
│ client query │ ───────────────────────────────────┐
└──────────────┘                                    │
                 (2) append redo record to WAL file │ (sequential)
                                                    ▼
                                             (3) commit-ack
                                                    │
                             (4) later: flush dirty page to datafile</code></pre>
            </div>
            </p>
            <ul>
                <li>All page changes first land in the sequential WAL so commits are fast and crash-safe.</li>
                <li>Background checkpoints write dirty pages in large batches, turning many random page writes into fewer sequential WAL writes.</li>
                <li>After a crash, the engine replays WAL records newer than the last checkpoint to rebuild all pages to a consistent state.</li>
            </ul>
            <h3 id="implications-for-performance">Implications for Performance</h3>
            <p>Understanding how tables and indexes are stored can have significant implications for database performance and optimization strategies.</p>
            <h4 id="data-locality">Data Locality</h4>
            <p>Storing related data close together on disk improves data locality, which enhances performance by reducing the number of disk I/O operations required to retrieve data.</p>
            <p>For example, when a query requests several rows that are stored sequentially on the same page or extent, the database can read them all in a single disk operation, speeding up the retrieval process.</p>
            <h4 id="choosing-the-right-storage-model">Choosing the Right Storage Model</h4>
            <p>Selecting between row-oriented and column-oriented storage depends on the workload and query patterns.</p>
            <ul>
                <li><strong>Row-Oriented Storage</strong> organizes data by rows, making it optimal for transactional workloads where operations require accessing entire rows, such as inserting or updating customer orders.</li>
                <li><strong>Column-Oriented Storage</strong> organizes data by columns, making it suitable for analytical workloads that perform operations like aggregations on specific columns over large datasets, such as generating sales trend reports.</li>
            </ul>
            <h4 id="effective-indexing-strategies">Effective Indexing Strategies</h4>
            <p>Indexes improve query performance by allowing the database to locate data without scanning every row in a table. However, they also consume disk space and can slow down write operations because the index must be updated whenever data is modified.</p>
            <p>Balancing the number and types of indexes is crucial. Over-indexing can lead to unnecessary overhead, while under-indexing can result in slow query performance.</p>
            <h3 id="practical-examples-and-commands">Practical Examples and Commands</h3>
            <p>Managing and optimizing database storage is crucial for maintaining performance and ensuring efficient use of resources. Below are practical commands for PostgreSQL and MySQL that help inspect and manage storage aspects. Each command includes its purpose, when to use it, expected output, and how to interpret the results.</p>
            <h4 id="postgresql-commands"><strong>PostgreSQL Commands</strong></h4>
            <p>I. <strong>Check Table and Index Sizes</strong></p>
            <ul>
                <li>Retrieves the size of a specific table, its indexes, and the total combined size in a human-readable format.</li>
                <li>Use when you need to understand the storage footprint of a table and its indexes to manage disk space or optimize performance.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">SELECT
 pg_size_pretty(pg_relation_size('your_table')) AS table_size,
 pg_size_pretty(pg_indexes_size('your_table')) AS indexes_size,
 pg_size_pretty(pg_total_relation_size('your_table')) AS total_size;</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <table>
                <tr>
                    <td>table_size</td>
                    <td>indexes_size</td>
                    <td>total_size</td>
                </tr>
                <tr>
                    <td>120 MB</td>
                    <td>30 MB</td>
                    <td>150 MB</td>
                </tr>
            </table>
            </p>
            <ul>
                <li><strong>table_size:</strong> Disk space used by the table's raw data.</li>
                <li><strong>indexes_size:</strong> Disk space used by all indexes associated with the table.</li>
                <li><strong>total_size:</strong> Combined disk space of the table and its indexes, indicating the overall storage footprint.</li>
            </ul>
            <p>II. <strong>Analyze Query Execution with Buffer Usage</strong></p>
            <ul>
                <li>Provides detailed execution plans for a query, including the number of disk pages read from memory and disk.</li>
                <li>Use when diagnosing query performance issues to understand how much data is being read from different sources.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">EXPLAIN (ANALYZE, BUFFERS) your_query;</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">Seq Scan on your_table  (cost=0.00..431.00 rows=21000 width=...)
 Buffers: shared hit=123 read=45
 ...</code></pre>
            </div>
            </p>
            <ul>
                <li><strong>shared hit:</strong> Pages read from shared memory (cache).</li>
                <li><strong>read:</strong> Pages read from disk.</li>
                <li>High disk reads may indicate the need for better indexing or increased memory allocation.</li>
            </ul>
            <p>III. <strong>Reclaim Dead Space with VACUUM</strong></p>
            <ul>
                <li>Cleans up dead rows and reclaims space for future inserts, optimizing storage usage.</li>
                <li>Regular maintenance to prevent table bloat and maintain optimal performance, especially after大量的INSERTs, UPDATEs, or DELETEs.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">VACUUM your_table;</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">VACUUM</code></pre>
            </div>
            </p>
            <p>Successful execution indicates that dead space has been reclaimed. Use <code>VACUUM VERBOSE your_table;</code> for detailed output.</p>
            <p>IV. <strong>Check Space Usage with pgstattuple</strong></p>
            <ul>
                <li>Provides detailed statistics about table space usage, including dead tuples and fragmentation.</li>
                <li>Use when assessing how much space is wasted due to dead rows and fragmentation, guiding maintenance actions like <code>VACUUM</code>.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">SELECT * FROM pgstattuple('your_table');</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">table_len    |  1000000
  tuple_count  |   20000
  tuple_len    |    800000
  dead_tuple_count |  5000
  dead_tuple_len   |  200000
  free_space        |  0</code></pre>
            </div>
            </p>
            <ul>
                <li><strong>dead_tuple_count &amp; dead_tuple_len:</strong> Amount of space occupied by obsolete rows.</li>
                <li>High values suggest the need for vacuuming to reclaim space.</li>
            </ul>
            <p>V. <strong>Enable Page-Level Checksums</strong></p>
            <ul>
                <li>Initializes a PostgreSQL database cluster with page-level checksums to detect data corruption.</li>
                <li>Use during database initialization to enhance data integrity by detecting corrupted pages.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">initdb --data-checksums -D /path/to/data</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">Data page checksums are enabled.</code></pre>
            </div>
            </p>
            <p>Ensures that any corrupted data pages are identified, enhancing reliability and data integrity.</p>
            <p>VI. <strong>Monitor I/O Statistics with pg_stat_io</strong></p>
            <ul>
                <li>Provides insights into the number of pages read and written for each query.</li>
                <li>Use when analyzing I/O performance to identify queries that cause excessive disk access.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">SELECT * FROM pg_stat_io;</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">query_id | read_pages | write_pages
---------|------------|------------
1        |     500    |     20
2        |    1500    |     50</code></pre>
            </div>
            </p>
            <ul>
                <li><strong>read_pages:</strong> Number of pages read from disk or memory.</li>
                <li><strong>write_pages:</strong> Number of pages written to disk.</li>
                <li>High read/write counts may indicate inefficient queries or the need for indexing.</li>
            </ul>
            <p>VII. <strong>Optimize Memory Usage with shared_buffers</strong></p>
            <ul>
                <li>Sets the amount of memory allocated for PostgreSQL to cache data pages, reducing physical I/O.</li>
                <li>Use when performance tuning to allow more data to reside in memory, thus minimizing disk access.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-conf">shared_buffers = 2GB</code></pre>
            </div>
            </p>
            <ul>
                <li>Increasing <code>shared_buffers</code> can improve performance by reducing disk reads.</li>
                <li>Balance is required to ensure sufficient memory for other system operations.</li>
            </ul>
            <p>VIII. <strong>Update Statistics with ANALYZE</strong></p>
            <ul>
                <li>Updates the statistics about the distribution of data in the table, aiding the query planner in choosing efficient execution paths.</li>
                <li>Use after significant data changes (INSERTs, UPDATEs, DELETEs) to ensure the query planner has accurate information.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">ANALYZE your_table;</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">ANALYZE</code></pre>
            </div>
            </p>
            <p>Successful execution means statistics are updated. Use <code>EXPLAIN</code> to see how updated statistics affect query plans.</p>
            <p>IX. <strong>Reorder Table Data with CLUSTER</strong></p>
            <ul>
                <li>Reorders the physical storage of a table based on an index, improving data locality for queries that use that index.</li>
                <li>Use when queries frequently access data in the order of a specific index, enhancing I/O performance.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">CLUSTER your_table USING your_index;</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">CLUSTER</code></pre>
            </div>
            </p>
            <p>The table is physically reordered, which can lead to faster sequential scans and better cache utilization for indexed queries.</p>
            <h4 id="mysql-commands"><strong>MySQL Commands</strong></h4>
            <p>I. <strong>Show Table Status</strong></p>
            <ul>
                <li>Provides detailed information about a table, including the number of rows, data length, and index length.</li>
                <li>To assess table size, row count, and index usage for storage optimization and performance tuning.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-sql">SHOW TABLE STATUS LIKE 'your_table';</code></pre>
            </div>
            </p>
            <p><strong>Expected Output:</strong></p>
            <p>
            <table>
                <tr>
                    <td>Name</td>
                    <td>Engine</td>
                    <td>Version</td>
                    <td>Row_format</td>
                    <td>Rows</td>
                    <td>Avg_row_length</td>
                    <td>Data_length</td>
                    <td>Max_data_length</td>
                    <td>Index_length</td>
                    <td>...</td>
                </tr>
                <tr>
                    <td>your_table</td>
                    <td>InnoDB</td>
                    <td>10</td>
                    <td>Compact</td>
                    <td>20000</td>
                    <td>100</td>
                    <td>2000000</td>
                    <td>...</td>
                    <td>500000</td>
                    <td>...</td>
                </tr>
            </table>
            </p>
            <ul>
                <li><strong>Rows:</strong> Number of records in the table.</li>
                <li><strong>Data_length:</strong> Amount of space used for storing data.</li>
                <li><strong>Index_length:</strong> Amount of space used for indexes.</li>
                <li>High <code>Data_length</code> or <code>Index_length</code> may indicate the need for optimization.</li>
            </ul>
            <p>II. <strong>Monitor InnoDB Buffer Pool Metrics</strong></p>
            <p>Used to determine how effectively the buffer pool is caching data and to identify if more memory allocation is needed.</p>
            <p>
            <div>
                <pre><code class="language-sql">SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_read_requests';
SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_reads';</code></pre>
            </div>
            </p>
            <ul>
                <li><strong>Innodb_buffer_pool_read_requests:</strong> Number of logical read requests.</li>
                <li><strong>Innodb_buffer_pool_reads:</strong> Number of reads that had to fetch data from disk.</li>
            </ul>
            <p><strong>Expected Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">+---------------------------------+---------+
| Variable_name                   | Value   |
+---------------------------------+---------+
| Innodb_buffer_pool_read_requests | 100000 |
+---------------------------------+---------+

+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| Innodb_buffer_pool_reads | 500   |
+--------------------------+-------+</code></pre>
            </div>
            </p>
            <ul>
                <li><strong>Ratio:</strong> <code>Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests</code></li>
                <li>A low ratio indicates most reads are served from memory. A high ratio suggests insufficient buffer pool size, leading to more disk I/O.</li>
            </ul>
            <p>III. <strong>Adjust Buffer Pool Size</strong></p>
            <ul>
                <li>Sets the size of the InnoDB buffer pool, which caches data and indexes in memory to reduce disk I/O</li>
                <li>Use during performance tuning to allocate more memory for caching, thereby improving read performance.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-conf">innodb_buffer_pool_size = 4G</code></pre>
            </div>
            </p>
            <ul>
                <li>Increasing <code>innodb_buffer_pool_size</code> can reduce disk reads.</li>
                <li>Ensure the server has sufficient memory to accommodate the buffer pool alongside other processes.</li>
            </ul>
            <h3 id="other-considerations">Other Considerations</h3>
            <ul>
                <li>Align database page size with SSD/HDD physical block (4 KB or 16 KB) to avoid partial-block I/O.</li>
                <li>Keep hot rows small; overflow chaining kills cache hit rates.</li>
                <li>Cluster by monotonically increasing keys when you can; if you must use UUIDs, batch inserts or use time-sorted UUID variants to reduce page splits.</li>
                <li>Rebuild or <code>VACUUM FULL</code> tables that show &gt; 20 % dead rows or 2× bloat.</li>
                <li>Create covering indexes for frequent read-only analytics, but remember each extra column burdens INSERT/UPDATE.</li>
                <li>Watch the free-space map: if every page shows “full” but the table keeps extending, you have bloat.</li>
            </ul>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#storage-of-tables-and-indexes-on-disk">Storage of Tables and Indexes on Disk</a>
                <ol>
                    <li><a href="#operating-system-files-datafiles-">Operating-System Files (“Datafiles”)</a></li>
                    <li><a href="#extents-pages-allocation-units-">Extents &amp; Pages (Allocation Units)</a></li>
                    <li><a href="#anatomy-of-a-data-page">Anatomy of a Data Page</a></li>
                    <li><a href="#heap-table-lifecycle">Heap Table Lifecycle</a></li>
                    <li><a href="#clustered-index-organized-tables">Clustered (Index-Organized) Tables</a></li>
                    <li><a href="#secondary-non-clustered-index-walk">Secondary (Non-Clustered) Index Walk</a></li>
                    <li><a href="#other-index-types-in-one-picture">Other Index Types in One Picture</a></li>
                    <li><a href="#free-space-extent-maps">Free-Space &amp; Extent Maps</a></li>
                    <li><a href="#write-ahead-log-wal-relationship">Write-Ahead Log (WAL) Relationship</a></li>
                    <li><a href="#implications-for-performance">Implications for Performance</a>
                        <ol>
                            <li><a href="#data-locality">Data Locality</a></li>
                            <li><a href="#choosing-the-right-storage-model">Choosing the Right Storage Model</a></li>
                            <li><a href="#effective-indexing-strategies">Effective Indexing Strategies</a></li>
                        </ol>
                    </li>
                    <li><a href="#practical-examples-and-commands">Practical Examples and Commands</a>
                        <ol>
                            <li><a href="#postgresql-commands">PostgreSQL Commands</a></li>
                            <li><a href="#mysql-commands">MySQL Commands</a></li>
                        </ol>
                    </li>
                    <li><a href="#other-considerations">Other Considerations</a></li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li>Introduction to Databases<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/01_databases_intro.html">Databases Intro</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/02_types_of_databases.html">Types of Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/03_database_management_systems_dbms_.html">Database Management Systems Dbms</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/04_data_models.html">Data Models</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/01_introduction_to_databases/05_glossary.html">Glossary</a></li>
                        </ol>
                    </li>
                    <li>Database Design<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/01_requirements_analysis.html">Requirements Analysis</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/02_normalization.html">Normalization</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/03_denormalization.html">Denormalization</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/04_indexing_strategies.html">Indexing Strategies</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/02_database_design/05_data_integrity.html">Data Integrity</a></li>
                        </ol>
                    </li>
                    <li>Sql<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/01_intro_to_sql.html">Intro to Sql</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/02_data_definition_language_ddl.html">Data Definition Language Ddl</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/03_data_manipulation_language_dml.html">Data Manipulation Language Dml</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/04_data_control_language_dcl.html">Data Control Language Dcl</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/05_transaction_control_language_tcl.html">Transaction Control Language Tcl</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/06_joins_subqueries_and_views.html">Joins Subqueries and Views</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/07_stored_procedures_and_functions.html">Stored Procedures and Functions</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/08_triggers.html">Triggers</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/09_hierarchical_data.html">Hierarchical Data</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/10_aggregate_functions.html">Aggregate Functions</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/03_sql/11_window_functions.html">Window Functions</a></li>
                        </ol>
                    </li>
                    <li>Acid Properties and Transactions<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/01_transactions_intro.html">Transactions Intro</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/02_atomicity.html">Atomicity</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/03_consistency.html">Consistency</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/04_isolation.html">Isolation</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/04_acid_properties_and_transactions/05_durability.html">Durability</a></li>
                        </ol>
                    </li>
                    <li>Storage and Indexing<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/01_how_tables_and_indexes_are_stored_on_disk.html">How Tables and Indexes Are Stored on Disk</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/02_row_based_vs_column_based_databases.html">Row Based vs Column Based Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/03_primary_key_vs_secondary_key.html">Primary Key vs Secondary Key</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/04_database_pages.html">Database Pages</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/05_storage_and_indexing/05_indexing.html">Indexing</a></li>
                        </ol>
                    </li>
                    <li>Distributed Databases<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/01_distributed_database_systems.html">Distributed Database Systems</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/02_partitioning.html">Partitioning</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/03_sharding.html">Sharding</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/04_partitioning_vs_sharding.html">Partitioning vs Sharding</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/05_consistent_hashing.html">Consistent Hashing</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/06_cap_theorem.html">Cap Theorem</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/06_distributed_databases/07_eventual_consistency.html">Eventual Consistency</a></li>
                        </ol>
                    </li>
                    <li>Concurrency Control<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/01_shared_vs_exclusive_locks.html">Shared vs Exclusive Locks</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/02_deadlocks.html">Deadlocks</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/03_two_phase_locking.html">Two Phase Locking</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/04_double_booking_problem.html">Double Booking Problem</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/07_concurrency_control/05_serializable_vs_repeatable_read.html">Serializable vs Repeatable Read</a></li>
                        </ol>
                    </li>
                    <li>Database Performance<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/01_query_optimization_techniques.html">Query Optimization Techniques</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/02_indexing_strategies.html">Indexing Strategies</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/03_database_caching.html">Database Caching</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/04_materialized_views.html">Materialized Views</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/05_accessing_database_in_code.html">Accessing Database in Code</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/08_database_performance/06_working_with_billion_row_table.html">Working with Billion Row Table</a></li>
                        </ol>
                    </li>
                    <li>Database Replication<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/01_intro_to_replication.html">Intro to Replication</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/02_master_standby_replication.html">Master Standby Replication</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/03_multi_master_replication.html">Multi Master Replication</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/09_database_replication/04_synchronous_vs_asynchronous_replication.html">Synchronous vs Asynchronous Replication</a></li>
                        </ol>
                    </li>
                    <li>Nosql Databases<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/01_nosql_databases_intro.html">Nosql Databases Intro</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/02_types_of_nosql_databases.html">Types of Nosql Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/03_querying_nosql_databases.html">Querying Nosql Databases</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/10_nosql_databases/04_crud_in_sql_vs_nosql.html">Crud in Sql vs Nosql</a></li>
                        </ol>
                    </li>
                    <li>Security Best Practices<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/01_backup_and_recovery_strategies.html">Backup and Recovery Strategies</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/02_database_security.html">Database Security</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/03_capacity_planning.html">Capacity Planning</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/04_database_migration.html">Database Migration</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/05_performance_monitoring_and_tuning.html">Performance Monitoring and Tuning</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/06_sql_injection.html">Sql Injection</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/11_security_best_practices/07_crash_recovery_in_databases.html">Crash Recovery in Databases</a></li>
                        </ol>
                    </li>
                    <li>Database Engines<ol>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/01_sqlite.html">Sqlite</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/02_mysql.html">Mysql</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/03_postgresql.html">Postgresql</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/04_mongodb.html">Mongodb</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/05_neo4j.html">Neo4J</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/06_aws_services.html">Aws Services</a></li>
                            <li><a href="https://adamdjellouli.com/articles/databases_notes/12_database_engines/07_choosing_database.html">Choosing Database</a></li>
                        </ol>
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                © Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../../app.js"></script>
    </footer>
    <div id="pdf-spinner-overlay">
        <div class="spinner"></div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>