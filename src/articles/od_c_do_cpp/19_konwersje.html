<!DOCTYPE html>

<html lang="pl">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <title>Konwersje</title>
    <meta charset="utf-8" />
    <meta content="Zarówno w języku C, jak i w języku C++ istnieją mechanizmy umożliwiające konwersję wartości z jednego typu na inny." name="description" />
    <meta content="Adam Djellouli" name="keywords" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="ie-edge" http-equiv="X-UA-Compatible" />
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul role="menu">
            <li role="menuitem"> <a href="../../index.html" title="Go to Home Page"> Home </a> </li>
            <li role="menuitem"> <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a> </li>
            <li role="menuitem"> <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a> </li>
            <li role="menuitem"> <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a> </li>
            <li role="menuitem"> <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a> </li>
            <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
        </ul>
    </nav>
    <section id="article-body"></section>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>This article is written in: 🇵🇱</i></p>
            <h2 id="konwersje">Konwersje</h2>
            <p>Zarówno w języku C, jak i w języku C++ istnieją mechanizmy umożliwiające konwersję wartości z jednego typu na inny. Chociaż niektóre z tych mechanizmów są wspólne dla obu języków, różnice w podejściu oraz dostępne narzędzia czynią konwersję w C++ bardziej złożoną i wszechstronną.</p>
            <h3 id="rzutowanie-w-c">Rzutowanie w C</h3>
            <p>Rzutowanie w języku C pozwala jawnie konwertować wartość jednego typu na inny. Choć czasami jest to niezbędne, rzutowanie może prowadzić do nieoczekiwanych i niejednoznacznych wyników, jeśli nie jest używane ostrożnie.</p>
            <h4 id="podstawowe-rzutowanie">Podstawowe rzutowanie</h4>
            <p>Ogólny schemat rzutowania wygląda następująco:</p>
            <p>
            <div>
                <pre><code class="language-clike">(typ)wartość;</code></pre>
            </div>
            </p>
            <p>Przykład rzutowania zmiennej typu int na double:</p>
            <p>
            <div>
                <pre><code class="language-clike">int a = 10;
double b = (double)a;</code></pre>
            </div>
            </p>
            <p>W tym przypadku rzutowanie z typu int na double jest bezpieczne i nie prowadzi do utraty danych.</p>
            <h4 id="rzutowanie-wskaźników">Rzutowanie wskaźników</h4>
            <p>Kiedy pracujemy z wskaźnikami, rzutowanie może stać się bardziej skomplikowane. Wskaźnik typu void jest ogólnym wskaźnikiem, który może wskazywać obiekt dowolnego typu. Często używane jest w funkcjach biblioteki standardowej, takich jak <code>qsort()</code> i <code>bsearch()</code>, aby umożliwić przechowywanie wskaźników do dowolnych danych.</p>
            <p>Niebezpieczeństwo pojawia się, gdy próbujemy rzutować wskaźnik na <code>void</code> z powrotem na inny, konkretny typ. Jeśli wskaźnik zostanie niepoprawnie zrzutowany, może to prowadzić do niezdefiniowanego zachowania.</p>
            <p>Oto przykład, który ilustruje rzutowanie wskaźnika na <code>void</code>:</p>
            <p>
            <div>
                <pre><code class="language-clike">void *ptr = malloc(sizeof(int));  // zaalokowanie pamięci dla typu int
char *ptr2 = (char *)ptr;         // rzutowanie na typ char *
*ptr2 = 'a';                      
printf("%c\n", *ptr2);            // wyświetlenie znaku 'a'
free(ptr);</code></pre>
            </div>
            </p>
            <p>Chociaż powyższy kod jest technicznie poprawny, jego celem jest jedynie ilustracja. W praktyce rzutowanie wskaźników powinno być wykonywane z dużą ostrożnością. Przed przekształceniem wskaźnika na void na wskaźnik innego typu, należy upewnić się, że pierwotnie wskaźnik ten wskazywał na odpowiedni typ danych.</p>
            <h3 id="konwersja-statyczna-w-c-">Konwersja statyczna w C++</h3>
            <p><code>static_cast</code> jest jednym z operatorów konwersji w C++ służącym do przeprowadzania konwersji między typami, których konwersja jest znana i sprawdzana w czasie kompilacji. Jest to najbardziej ogólny operator konwersji w C++.</p>
            <p>
            <div>
                <pre><code class="language-clike">int a = 10;
double b = static_cast&lt;double&gt;(a);</code></pre>
            </div>
            </p>
            <p>static_cast może być stosowany do konwersji między podstawowymi typami danych oraz do konwersji między wskaźnikami na klasy w ramach drzewa dziedziczenia, ale tylko w jednym kierunku (z bazowego do pochodnego lub odwrotnie).</p>
            <h3 id="konwersja-dynamiczna-w-c-">Konwersja dynamiczna w C++</h3>
            <p>dynamic_cast to operator konwersji, który służy do konwersji wskaźników i referencji w hierarchii dziedziczenia klas. Poprawność tej konwersji jest sprawdzana w czasie działania programu, co oznacza, że program sprawdzi w trakcie wykonania, czy rzutowanie jest właściwe.</p>
            <p>
            <div>
                <pre><code class="language-clike">#include &lt;iostream&gt;
#include &lt;vector&gt;

class A {
  virtual void vf() {}  // wirtualna funkcja umożliwiająca polimorfizm
};
class B : public A {};
class C : public A {};

int main() {
  std::vector&lt;a *=""&gt; v{new B, new C};

  for (auto a : v) {
    if (auto b = dynamic_cast&lt;b *=""&gt;(a)) {
      std::cout &lt;&lt; "B" &lt;&lt; std::endl;
    } else if (auto c = dynamic_cast&lt;c *=""&gt;(a)) {
      std::cout &lt;&lt; "C" &lt;&lt; std::endl;
    }
  }

  // Oczyszczanie pamięci
  for (auto a : v) {
    delete a;
  }

  return 0;
}</code></pre>
            </div>
            </p>
            <p>Jak widać w powyższym przykładzie, dynamic_cast pozwala na sprawdzenie, czy dany obiekt jest instancją określonej klasy pochodnej w hierarchii dziedziczenia. Warto zwrócić uwagę na obecność wirtualnej funkcji w klasie bazowej - jest ona niezbędna do umożliwienia rzutowania dynamicznego.</p>
            <p>Używanie dynamic_cast jest związane z dodatkowymi kosztami wydajnościowymi ze względu na sprawdzanie typu w trakcie działania programu. Włącza to mechanizm RTTI (Run-Time Type Identification), który pozwala na identyfikację typu obiektu w czasie wykonania.</p>
            <h3 id="konwersja-reinterpret_cast-w-c-">Konwersja <code>reinterpret_cast</code> w C++</h3>
            <p><code>reinterpret_cast</code> to jedno z narzędzi do wymuszania konwersji w C++. Jest to najbardziej "brutalny" sposób konwersji, pozwalający programiście na wymuszenie konwersji między dowolnymi typami. Oznacza to, że nie dokonuje ona rzeczywistej konwersji wartości, ale jedynie traktuje dane w pamięci jako inny typ.</p>
            <p>Ogólna składnia:</p>
            <p>
            <div>
                <pre><code class="language-clike">typ_docelowy = reinterpret_cast&lt;typ_docelowy&gt;(obiekt_źródłowy);</code></pre>
            </div>
            </p>
            <p>Przykład:</p>
            <p>
            <div>
                <pre><code class="language-clike">int a = 10;
int* b = &amp;a
char* c = reinterpret_cast&lt;char*&gt;(b);</code></pre>
            </div>
            </p>
            <p>W powyższym kodzie wskaźnik b wskazuje na int, natomiast c po operacji <code>reinterpret_cast</code> wskazuje na te same bajty w pamięci, ale traktuje je jako char.</p>
            <p>Użycie <code>reinterpret_cast</code> może być przydatne w niskopoziomowym programowaniu, gdy potrzebujemy bezpośredniego dostępu do surowych bajtów danych. Może być też niezbędne w przypadku interakcji z bibliotekami napisanymi w innych językach lub przy operacjach na sprzęcie.</p>
            <p>Jednak należy pamiętać, że <code>reinterpret_cast</code> jest niebezpieczny. Łatwo można uzyskać nieprzewidywalne wyniki, jeśli dane nie są odpowiednio interpretowane. Ponadto, użycie tego operatora często wskazuje na to, że struktura programu nie jest optymalna lub że programista boryka się z problemem, który mógłby zostać rozwiązany w bardziej elegancki sposób. Dlatego zaleca się ostrożność i stosowanie reinterpret_cast tylko wtedy, gdy jest to absolutnie konieczne.</p>
        </section>
        <div id="table-of-contents">
            <h2>Spis Treści</h2>
            <ol><a href="#konwersje">Konwersje</a>
                <ol>
                    <li><a href="#rzutowanie-w-c">Rzutowanie w C</a>
                        <ol>
                            <li><a href="#podstawowe-rzutowanie">Podstawowe rzutowanie</a></li>
                            <li><a href="#rzutowanie-wskaźników">Rzutowanie wskaźników</a></li>
                        </ol>
                    </li>
                    <li><a href="#konwersja-statyczna-w-c-">Konwersja statyczna w C++</a></li>
                    <li><a href="#konwersja-dynamiczna-w-c-">Konwersja dynamiczna w C++</a></li>
                    <li><a href="#konwersja-reinterpret_cast-w-c-">Konwersja reinterpret_cast w C++</a></li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/01_proces_kompilacji.html">Proces Kompilacji</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/02_preprocesor.html">Preprocesor</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/03_zmienne_i_typy_danych.html">Zmienne i Typy Danych</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/04_interakcja_z_konsola.html">Interakcja z Konsola</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/05_instrukcja_warunkowa.html">Instrukcja Warunkowa</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/06_petle.html">Petle</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/07_liczby_losowe.html">Liczby Losowe</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/08_typ_wyliczeniowy.html">Typ Wyliczeniowy</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/09_funkcje.html">Funkcje</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/10_l_wartosci_r_wartosci.html">L Wartosci R Wartosci</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/11_wskazniki.html">Wskazniki</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/12_tablice.html">Tablice</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/13_napisy.html">Napisy</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/14_operacje_bitowe.html">Operacje Bitowe</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/15_programowanie_obietkowe.html">Programowanie Obietkowe</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/16_dziedziczenie.html">Dziedziczenie</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/17_zaawansowane_wskazniki.html">Zaawansowane Wskazniki</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/18_przeciazanie.html">Przeciazanie</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/19_konwersje.html">Konwersje</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/20_lambdy.html">Lambdy</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/21_szablony.html">Szablony</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/22_wyjatki.html">Wyjatki</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/23_stl.html">Stl</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/24_praca_z_plikami.html">Praca z Plikami</a></li>
                    <li><a href="https://adamdjellouli.com/articles/od_c_do_cpp/25_c_vs_cpp.html">C vs Cpp</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                © Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>