<!DOCTYPE html>

<html lang="pl">
<head>
<script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
<title>Referencje i kopiowanie</title>
<meta charset="utf-8"/>
<meta "kopiowanie"."="" content="W Pythonie rozróżniamy dwa kluczowe pojęcia: " name="description" oraz="" referencję"=""/>
<meta content="Adam Djellouli" name="keywords"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet"/>
<link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon"/>
<link href="../../../resources/style.css" rel="stylesheet" type="text/css"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="ie-edge" http-equiv="X-UA-Compatible"/>
</head>
<body><nav>
<a class="logo" href="../index.html" title="Adam Djellouli - Home">
<img alt="Adam Djellouli Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG"/>
</a>
<input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox"/>
<ul>
<li> <a href="../../../index.html" title="Home"> Home </a> </li>
<li> <a class="active" href="../../../core/blog.html" title="Adam Djellouli's Blog - Programming, technology and more"> Blog </a> </li>
<li> <a href="../../../core/tools.html" title="Useful Tools by Adam Djellouli"> Tools </a> </li>
<li> <a href="../../../core/projects.html" title="Projects by Adam Djellouli"> Projects </a> </li>
<li> <a href="../../../core/resume.html" title="Adam Djellouli's Resume"> Resume </a> </li>
<li> <a href="../../../core/about.html" title="About Adam Djellouli"> About </a> </li>
<button aria-label="Toggle dark mode" id="dark-mode-button"></button>
</ul>
</nav>
<section id="article-body"></section>
<div id="article-wrapper"><section id="article-body">
<p style="text-align: right;"><i>This article is written in: 🇵🇱</i></p>
<h2 id="referencje-i-kopiowanie">Referencje i kopiowanie</h2>
<p>W Pythonie rozróżniamy dwa kluczowe pojęcia: "referencję" oraz "kopiowanie".</p>
<ul>
<li><strong>Referencja</strong> to odwołanie do pewnego obiektu w pamięci.</li>
<li><strong>Kopiowanie</strong> polega na tworzeniu nowego obiektu z identyczną zawartością co pierwotny obiekt.</li>
</ul>
<p>W Pythonie, gdy przekazujemy obiekty do funkcji, przypisujemy je do innych zmiennych, lub umieszczamy je w kolekcjach, operujemy na referencjach. W praktyce oznacza to, że modyfikacje wprowadzone na jednym "egzemplarzu" obiektu odzwierciedlają się na wszystkich jego "egzemplarzach".</p>
<p><div><pre><code class="language-python">lista = [[1, 2, 3], [4, 5, 6]]
kopia_listy = lista

kopia_listy.append([-1, -2, -3]) # wpłynie na obie listy
kopia_listy[0].insert(1, 1)     # wpłynie również na obie listy
print(lista)  # pokaże zmienioną listę</code></pre></div></p>
<p>Aby uniknąć niechcianych efektów, można skorzystać z mechanizmów kopiowania: płytkiego (shallow copy) lub głębokiego (deep copy).</p>
<h3 id="kopiowanie-płytkie-shallow-copy-">Kopiowanie płytkie (Shallow Copy)</h3>
<p>Tworzy nową kolekcję na najwyższym poziomie, ale elementy wewnętrzne (np. listy w liście) są nadal referencjami.</p>
<p><div><pre><code class="language-python">import copy
lista = [[1, 2, 3], [4, 5, 6]]
kopia_plytka = copy.copy(lista)

kopia_plytka.append([-1, -2, -3])  # wpłynie tylko na `kopia_plytka`
kopia_plytka[0].insert(1, 1)      # wpłynie na obie listy, bo wewnętrzne listy są referencjami
print(lista)  # pokaże częściowo zmienioną listę</code></pre></div></p>
<h3 id="kopiowanie-głębokie-deep-copy-">Kopiowanie głębokie (Deep Copy)</h3>
<p>Tworzy całkowicie nową kopię obiektu i wszystkich jego wewnętrznych elementów. Jest to kopiowanie "w głąb".</p>
<p><div><pre><code class="language-python">import copy
lista = [[1, 2, 3], [4, 5, 6]]
kopia_gleboka = copy.deepcopy(lista)

kopia_gleboka.append([-1, -2, -3])  # wpłynie tylko na `kopia_gleboka`
kopia_gleboka[0].insert(1, 1)      # wpłynie również tylko na `kopia_gleboka`
print(lista)  # pokaże oryginalną listę, bez zmian</code></pre></div></p>
<p>Podsumowując, ważne jest, aby być świadomym, czy pracujemy na kopii, czy na oryginalnym obiekcie, a także tego, jakie są konsekwencje naszych działań w kontekście referencji i kopiowania.</p>
<h3 id="domyślne-wartości-parametrów-funkcji-i-ich-mutowalność">Domyślne wartości parametrów funkcji i ich mutowalność</h3>
<p>W Pythonie wartości domyślne dla parametrów funkcji są wyliczane tylko raz w momencie definiowania funkcji, a nie za każdym razem, gdy funkcja jest wywoływana. Oznacza to, że jeśli wartość domyślna jest mutowalna, jak lista lub słownik, wszelkie modyfikacje tej wartości zostaną zachowane między kolejnymi wywołaniami funkcji. Może to prowadzić do nieoczekiwanych efektów ubocznych.</p>
<p>Rozważmy funkcję, która dodaje element do listy. Lista jest parametrem z domyślną wartością <code>[]</code>.</p>
<p><div><pre><code class="language-python">def dodaj_element(element, lista=[]):
    lista.append(element)
    return lista

print(dodaj_element(1))        # [1]
print(dodaj_element(2))        # [1, 2] - a oczekiwaliśmy [2]</code></pre></div></p>
<p>W powyższym przykładzie, za drugim razem zamiast uzyskać listę zawierającą tylko 2, otrzymujemy listę z 1 i 2, ponieważ domyślna lista została zmodyfikowana podczas pierwszego wywołania.</p>
<p>Jeśli chcemy uniknąć tego rodzaju problemów, jednym z podejść jest użycie wartości None jako domyślnej wartości parametru, a następnie wewnątrz funkcji zastąpienie jej nowym, pustym obiektem mutowalnym.</p>
<p><div><pre><code class="language-python">def dodaj_element(element, lista=None):
    if lista is None:
        lista = []
    lista.append(element)
    return lista

print(dodaj_element(1))        # [1]
print(dodaj_element(2))        # [2] - wynik zgodny z oczekiwaniami</code></pre></div></p>
<p>Korzystając z tego podejścia, unikamy nieoczekiwanych efektów ubocznych związanych z mutowalnymi wartościami domyślnymi.</p>
</section><div id="table-of-contents"><h2>Spis Treści</h2><ol><ol><li><a href="#kopiowanie-płytkie-shallow-copy-">Kopiowanie płytkie (Shallow Copy)</a></li><li><a href="#kopiowanie-głębokie-deep-copy-">Kopiowanie głębokie (Deep Copy)</a></li><li><a href="#domyślne-wartości-parametrów-funkcji-i-ich-mutowalność">Domyślne wartości parametrów funkcji i ich mutowalność</a></li></ol><a href="#referencje-i-kopiowanie">Referencje i kopiowanie</a></ol><div id="related-articles"><h2>Related Articles</h2><ol><li> Podstawy<ol><li><a href="../01_podstawy/01_instalacja_w_systemie_windows.html"> Instalacja w Systemie Windows</a></li><li><a href="../01_podstawy/02_interaktywna_konsola.html"> Interaktywna Konsola</a></li><li><a href="../01_podstawy/03_zmienne.html"> Zmienne</a></li><li><a href="../01_podstawy/04_warunki.html"> Warunki</a></li><li><a href="../01_podstawy/05_petle.html"> Petle</a></li><li><a href="../01_podstawy/06_funkcje_python.html"> Funkcje Python</a></li><li><a href="../01_podstawy/07_napisy_python.html"> Napisy Python</a></li><li><a href="../01_podstawy/08_struktury_danych.html"> Struktury Danych</a></li><li><a href="../01_podstawy/09_enum.html"> Enum</a></li><li><a href="../01_podstawy/10_liczby_losowe.html"> Liczby Losowe</a></li></ol></li><li> Sredniozawansowane<ol><li><a href="../02_sredniozawansowane/01_klasy_i_obiekty.html"> Klasy i Obiekty</a></li><li><a href="../02_sredniozawansowane/02_referencje_i_kopiowanie.html"> Referencje i Kopiowanie</a></li><li><a href="../02_sredniozawansowane/03_czyste_funkcje_i_skutki_uboczne.html"> Czyste Funkcje i Skutki Uboczne</a></li><li><a href="../02_sredniozawansowane/04_dziedziczenie_i_kompozycja.html"> Dziedziczenie i Kompozycja</a></li><li><a href="../02_sredniozawansowane/05_wyrazenia_regularne.html"> Wyrazenia Regularne</a></li><li><a href="../02_sredniozawansowane/06_wyjatki.html"> Wyjatki</a></li><li><a href="../02_sredniozawansowane/07_watki.html"> Watki</a></li><li><a href="../02_sredniozawansowane/08_procesy.html"> Procesy</a></li><li><a href="../02_sredniozawansowane/09_asyncio.html"> Asyncio</a></li><li><a href="../02_sredniozawansowane/10_lambdy.html"> Lambdy</a></li><li><a href="../02_sredniozawansowane/11_programowanie_funkcyjne.html"> Programowanie Funkcyjne</a></li><li><a href="../02_sredniozawansowane/12_klasy_danych.html"> Klasy Danych</a></li><li><a href="../02_sredniozawansowane/13_generatory.html"> Generatory</a></li><li><a href="../02_sredniozawansowane/14_iteratory.html"> Iteratory</a></li><li><a href="../02_sredniozawansowane/15_dekoratory.html"> Dekoratory</a></li><li><a href="../02_sredniozawansowane/16_serializacja.html"> Serializacja</a></li></ol></li><li> Inzynieria Oprogramowania<ol><li><a href="../03_inzynieria_oprogramowania/01_moduly_i_pakiety.html"> Moduly i Pakiety</a></li><li><a href="../03_inzynieria_oprogramowania/02_wersje_pythona.html"> Wersje Pythona</a></li><li><a href="../03_inzynieria_oprogramowania/03_pip_i_pypi.html"> Pip i Pypi</a></li><li><a href="../03_inzynieria_oprogramowania/04_srodowisko_wirtualne.html"> Srodowisko Wirtualne</a></li><li><a href="../03_inzynieria_oprogramowania/05_dbanie_o_jakosc_kodu.html"> Dbanie o Jakosc Kodu</a></li><li><a href="../03_inzynieria_oprogramowania/06_debugowanie.html"> Debugowanie</a></li><li><a href="../03_inzynieria_oprogramowania/07_testy_jednostkowe.html"> Testy Jednostkowe</a></li><li><a href="../03_inzynieria_oprogramowania/08_dokumentacja.html"> Dokumentacja</a></li><li><a href="../03_inzynieria_oprogramowania/09_pliki_wykonywalne_i_pyinstaller.html"> Pliki Wykonywalne i Pyinstaller</a></li><li><a href="../03_inzynieria_oprogramowania/10_kod_bajtowy.html"> Kod Bajtowy</a></li></ol></li><li> Python w Praktyce<ol><li><a href="../04_python_w_praktyce/01_argumenty_linii_polecen.html"> Argumenty Linii Polecen</a></li><li><a href="../04_python_w_praktyce/02_praca_z_plikami_i_folderami.html"> Praca z Plikami i Folderami</a></li><li><a href="../04_python_w_praktyce/03_pandas_i_csv.html"> Pandas i Csv</a></li><li><a href="../04_python_w_praktyce/04_praca_z_plikami_pdf.html"> Praca z Plikami Pdf</a></li><li><a href="../04_python_w_praktyce/05_informacje_o_systemie_operacyjnym.html"> Informacje o Systemie Operacyjnym</a></li><li><a href="../04_python_w_praktyce/06_http_i_prosty_serwer.html"> Http i Prosty Serwer</a></li><li><a href="../04_python_w_praktyce/07_api_wraz_z_fastapi.html"> Api Wraz z Fastapi</a></li><li><a href="../04_python_w_praktyce/08_bazy_danych_z_sqlite.html"> Bazy Danych z Sqlite</a></li><li><a href="../04_python_w_praktyce/09_tkinter.html"> Tkinter</a></li><li><a href="../04_python_w_praktyce/10_logi.html"> Logi</a></li></ol></li><li> Prezentacje<ol><li><a href="../05_prezentacje/git.html">Git</a></li><li><a href="../05_prezentacje/inspekcja_kodu.html">Inspekcja Kodu</a></li><li><a href="../05_prezentacje/jupyter_notebooks.html">Jupyter Notebooks</a></li><li><a href="../05_prezentacje/paradygmaty_programowania.html">Paradygmaty Programowania</a></li><li><a href="../05_prezentacje/programowanie_wstep.html">Programowanie Wstep</a></li><li><a href="../05_prezentacje/testy.html">Testy</a></li><li><a href="../05_prezentacje/wprowadzenie_do_kursu.html">Wprowadzenie Do Kursu</a></li></ol></li></ol></div></div></div><footer>
<div class="footer-columns">
<div class="footer-column">
<img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png"/>
</div>
<div class="footer-column">
<h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
<p>
                Thank you for visiting my personal website. All of the <br/>
                content on this site is free to use, but please remember <br/>
                to be a good human being and refrain from any abuse<br/>
                of the site. If you would like to contact me, please use <br/>
                my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br/>
                issues or ideas to share. I wish you the best and hope you <br/>
                have a fantastic life. <br/>
</p>
</div>
<div class="footer-column">
<h2>Follow me</h2>
<ul class="social-media">
<li>
<a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
</a>YouTube
                </li>
<li>
<a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
</a>LinkedIn
                </li>
<li>
<a class="fa fa-instagram" href="https://www.instagram.com/addjellouli/" target="_blank" title="Instagram">
</a>Instagram
                </li>
<li>
<a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
</a>Github
                </li>
</ul>
</div>
</div>
<div>
<p id="copyright">
            © Adam Djellouli. All rights reserved.
        </p>
</div>
<script>
        document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
    </script>
<script src="../../../app.js"></script>
</footer></body>
</html><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>