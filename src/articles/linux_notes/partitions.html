<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <meta charset="utf-8" />
    <title>Partitioning Disks</title>
    <meta content="Partitioning a disk involves dividing a physical storage device into separate, manageable sections called partitions." name="description" />
    <meta content="Adam Djellouli" name="author" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul aria-labelledby="navbar-toggle" role="menu">
            <li role="menuitem">
                <a href="../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async="" src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
            </li>
        </ul>
    </nav>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>Last modified: October 10, 2024</i></p>
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="partitioning-disks">Partitioning Disks</h2>
            <p>Partitioning a disk involves dividing a physical storage device into separate, manageable sections called partitions. Each partition functions as an independent disk within the operating system, allowing for better organization, multi-boot setups, or separation of system files from user data. The two main partition table formats used to define how these partitions are structured on the disk are the Master Boot Record (MBR) and the GUID Partition Table (GPT).</p>
            <p>Imagine your disk as a bookshelf divided into compartments:</p>
            <p>
            <div>
                <pre><code class="language-shell">+------------------+------------------+------------------+------------------+
|   Compartment 1  |   Compartment 2  |   Compartment 3  |   Free Space     |
|   (/dev/sda1)    |   (/dev/sda2)    |   (/dev/sda3)    |                  |
+------------------+------------------+------------------+------------------+
|    50 GB         |    100 GB        |     8 GB         |     42 GB        |
|    ext4          |    ext4          |     swap         |                  |
|    Mounted at /  |    Mounted at    |                  |                  |
|                  |      /home       |                  |                  |
+------------------+------------------+------------------+------------------+</code></pre>
            </div>
            </p>
            <p>In this illustration, the disk <code>/dev/sda</code> is divided into three partitions with varying sizes and purposes, and there's remaining free space available for future use.</p>
            <h3 id="basic-partition-operations">Basic Partition Operations</h3>
            <p>Several operations can be performed on disk partitions:</p>
            <ul>
                <li>If unallocated space exists on the disk, new partitions can be created to store data, install additional operating systems, or organize files.</li>
                <li>Removing a partition frees up space on the disk but also erases all data within that partition. It's essential to back up any important information before deletion.</li>
                <li>Adjusting the size of existing partitions can help optimize disk space usage. This may involve expanding a partition into adjacent free space or shrinking it to make room for new partitions.</li>
                <li>After creating a partition, it must be formatted with a filesystem (e.g., ext4, NTFS) to store files. Formatting prepares the partition for data storage.</li>
            </ul>
            <h3 id="relationship-between-physical-disks-and-partitions">Relationship Between Physical Disks and Partitions</h3>
            <p>A physical disk is the actual hardware component that stores data. Partitions are logical divisions within this disk, allowing the operating system to manage different areas separately. Each partition can be treated as an independent disk with its own filesystem and mount point.</p>
            <p>Visual representation:</p>
            <p>
            <div>
                <pre><code class="language-shell">+-------------------+
|   Physical Disk   |
|     (/dev/sda)    |
|                   |
|  +-------------+  |
|  | Partition 1 |  |
|  | (/dev/sda1) |  |
|  +-------------+  |
|  | Partition 2 |  |
|  | (/dev/sda2) |  |
|  +-------------+  |
|  | Partition 3 |  |
|  | (/dev/sda3) |  |
|  +-------------+  |
+-------------------+</code></pre>
            </div>
            </p>
            <p>Each partition is a segment of the physical disk that can be managed independently, formatted with different filesystems, and mounted at different points in the directory tree.</p>
            <h3 id="disk-naming-conventions">Disk Naming Conventions</h3>
            <p>In Linux, disks and partitions are named using specific conventions to identify the device type, order, and partition number.</p>
            <p><strong>Device Type Indicators</strong>:</p>
            <ul>
                <li><code>/dev/sdX</code> represents SCSI or SATA disks. The 'X' is a letter starting from 'a' for the first disk, 'b' for the second, and so on.</li>
                <li><code>/dev/hdX</code> refers to older IDE disks.</li>
                <li><code>/dev/vdX</code> denotes virtual disks in KVM environments.</li>
                <li><code>/dev/xvdX</code> indicates virtual disks in Xen virtualization.</li>
            </ul>
            <p><strong>Partition Numbers</strong>:</p>
            <p>Partitions are numbered starting from 1. For example, <code>/dev/sda1</code> is the first partition on the first disk.</p>
            <p>Examples:</p>
            <ul>
                <li>The device <strong>/dev/sda</strong> refers to the systemâ€™s <strong>first disk</strong>, typically used for the primary operating system or main storage.</li>
                <li><strong>/dev/sdb</strong> represents the <strong>second disk</strong>, which might be used for additional storage, backups, or separate partitions.</li>
                <li>Located on the first disk, <strong>/dev/sda1</strong> is the <strong>first partition</strong>, often reserved for essential system files or boot-related data.</li>
                <li>The <strong>second partition</strong> on the second disk is labeled <strong>/dev/sdb2</strong>, and it may be used for secondary storage, user files, or specific applications.</li>
            </ul>
            <h3 id="types-of-partitions">Types of Partitions</h3>
            <h4 id="primary-partitions">Primary Partitions</h4>
            <p>Primary partitions are the main partitions on a disk. On an MBR-partitioned disk, you can have up to four primary partitions. These partitions are used to boot operating systems or store data.</p>
            <p><strong>Creating a Primary Partition</strong>:</p>
            <ul>
                <li>Use a partitioning tool like <code>fdisk</code> or <code>parted</code>.</li>
                <li>Allocate a portion of the disk's storage to the partition.</li>
                <li>Format the partition with a filesystem (e.g., <code>ext4</code>).</li>
            </ul>
            <p>Example using <code>fdisk</code> to create a primary partition:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo fdisk /dev/sda</code></pre>
            </div>
            </p>
            <p>Inside <code>fdisk</code>:</p>
            <p>
            <div>
                <pre><code class="language-shell">Command (m for help): n
Partition type:
   p   primary (1 primary, 0 extended, 3 free)
   e   extended
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-1048575999, default 2048): [Press Enter]
Last sector, +sectors or +size{K,M,G,T,P}: +50G
Created a new partition 1 of type 'Linux' and of size 50 GiB.</code></pre>
            </div>
            </p>
            <ul>
                <li>A new primary Linux partition was created with a size of 50 GiB.</li>
                <li>It was assigned as partition number 1.</li>
                <li>The partition starts at the default first sector, which is 2048.</li>
            </ul>
            <p><strong>Formatting the Partition</strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mkfs.ext4 /dev/sda1</code></pre>
            </div>
            </p>
            <p>This action prepares the partition for use by creating an <strong>ext4</strong> filesystem structure on it.</p>
            <h4 id="extended-and-logical-partitions">Extended and Logical Partitions</h4>
            <p>Extended partitions are a workaround for the MBR limitation of four primary partitions. An extended partition acts as a container for logical partitions, allowing you to create more than four partitions on a disk.</p>
            <p><strong>Creating an Extended Partition</strong>:</p>
            <p>Inside <code>fdisk</code>:</p>
            <p>
            <div>
                <pre><code class="language-shell">Command (m for help): n
Partition type:
   p   primary (3 primary, 1 extended, 0 free)
   e   extended
Select (default p): e
Partition number (1-4, default 4): 4
First sector (some value): [Press Enter]
Last sector, +sectors or +size{K,M,G,T,P}: [Press Enter to use remaining space]
Created a new extended partition 4.</code></pre>
            </div>
            </p>
            <ul>
                <li>A new extended partition was created and labeled as partition number 4.</li>
                <li>Since there were already three primary partitions, the extended type (<code>e</code>) was selected.</li>
                <li>The first sector was set to the default by pressing Enter.</li>
                <li>The last sector was also set to default by pressing Enter, allowing the partition to use all remaining available space.</li>
            </ul>
            <p><strong>Creating Logical Partitions Within the Extended Partition</strong>:</p>
            <p>
            <div>
                <pre><code class="language-shell">Command (m for help): n
All primary partitions are in use
Adding logical partition 5
First sector (some value): [Press Enter]
Last sector, +sectors or +size{K,M,G,T,P}: +20G
Created a new logical partition 5 of type 'Linux' and of size 20 GiB.</code></pre>
            </div>
            </p>
            <ul>
                <li>Since all primary partitions were already in use, a new logical partition was added.</li>
                <li>The partition was assigned as logical partition number 5.</li>
                <li>The first sector was set to the default by pressing Enter.</li>
                <li>The size of the partition was specified as 20 GiB by entering <code>+20G</code>.</li>
                <li>A new 20 GiB Linux logical partition, labeled as partition 5, was successfully created.</li>
            </ul>
            <p>Repeat the process for additional logical partitions.</p>
            <h4 id="comparison">Comparison</h4>
            <p>Here's a comprehensive comparison of different partition types:</p>
            <p>
            <table>
                <tr>
                    <td><strong>Feature</strong></td>
                    <td><strong>Primary Partition</strong></td>
                    <td><strong>Extended Partition</strong></td>
                    <td><strong>Logical Partition</strong></td>
                </tr>
                <tr>
                    <td><strong>Definition</strong></td>
                    <td>A main partition that can host an operating system or data directly.</td>
                    <td>A special type of partition that acts as a container for logical partitions.</td>
                    <td>A partition within an extended partition used to store data.</td>
                </tr>
                <tr>
                    <td><strong>Maximum Number</strong></td>
                    <td>Up to 4 primary partitions per disk under MBR.</td>
                    <td>Only 1 extended partition per disk under MBR (counts as one of the 4 primary).</td>
                    <td>Numerous logical partitions can exist within the extended partition (limited by OS).</td>
                </tr>
                <tr>
                    <td><strong>Purpose</strong></td>
                    <td>Used to install operating systems or store data directly.</td>
                    <td>Provides a way to bypass the limit of 4 primary partitions by containing logical partitions.</td>
                    <td>Allows the creation of additional partitions beyond the primary limit for organizing data.</td>
                </tr>
                <tr>
                    <td><strong>Bootability</strong></td>
                    <td>Can be marked as active to boot an operating system (on MBR systems).</td>
                    <td>Cannot be used to boot directly; it's a container.</td>
                    <td>Generally not bootable, but can be configured with bootloaders in some cases.</td>
                </tr>
                <tr>
                    <td><strong>Storage Location</strong></td>
                    <td>Entries stored directly in the partition table within the MBR or GPT.</td>
                    <td>Defined in the partition table but contains an extended boot record (EBR) for logical partitions.</td>
                    <td>Defined within EBRs linked in a chain inside the extended partition.</td>
                </tr>
                <tr>
                    <td><strong>Limitations</strong></td>
                    <td>Limited to 4 per disk under MBR (no limit under GPT).</td>
                    <td>Only one extended partition allowed per disk under MBR.</td>
                    <td>Number limited by available space and operating system constraints.</td>
                </tr>
                <tr>
                    <td><strong>Use Cases</strong></td>
                    <td>Ideal for systems requiring multiple operating systems or separate data areas.</td>
                    <td>Necessary when more than 4 partitions are needed on an MBR disk.</td>
                    <td>Useful for organizing data into separate partitions beyond the primary partition limit.</td>
                </tr>
                <tr>
                    <td><strong>Deletion Impact</strong></td>
                    <td>Deleting removes the partition and all its data.</td>
                    <td>Deleting removes the extended partition and all contained logical partitions.</td>
                    <td>Deleting removes only the specific logical partition and its data.</td>
                </tr>
            </table>
            </p>
            <h3 id="partition-table-formats-mbr-vs-gpt">Partition Table Formats: MBR vs. GPT</h3>
            <p>Partition table formats are organize data on storage devices, enabling the system to locate, identify, and manage different partitions on a disk. Two of the most widely used partition table formats are the Master Boot Record (MBR) and the GUID Partition Table (GPT). Each format comes with its own structure, limitations, and features, which affect how storage devices can be utilized and managed. While MBR is an older format, widely compatible across various operating systems, GPT is a newer standard designed to address the limitations of MBR, offering greater flexibility and scalability for modern storage needs.</p>
            <h4 id="master-boot-record-mbr-">Master Boot Record (MBR)</h4>
            <p>The Master Boot Record is the original partition table format, introduced in the 1980s, which has been the standard for decades. Located in the first sector of a storage device, the MBR holds the boot loader and information about the disk's partitions. However, MBR has some notable limitations: it supports a maximum disk size of 2 TB and can only create up to four primary partitions. For users needing more partitions, an extended partition must be created to hold additional logical partitions. Despite these limitations, MBR's simplicity and broad compatibility with older systems make it a popular choice for users and devices that do not require large storage capacities or numerous partitions.</p>
            <h4 id="guid-partition-table-gpt-">GUID Partition Table (GPT)</h4>
            <p>The GUID Partition Table was developed as a modern replacement for MBR, overcoming many of its restrictions. GPT is part of the Unified Extensible Firmware Interface (UEFI) standard and supports much larger disks, theoretically up to 9.4 zettabytes, with practically unlimited partition counts. Each partition in GPT is identified by a globally unique identifier (GUID), enhancing flexibility and reducing the likelihood of partition-related conflicts. Additionally, GPT maintains multiple copies of its partition table for improved data redundancy and recovery, making it more reliable than MBR. GPT has become the preferred choice for newer systems, particularly those requiring large storage capacities or more than four partitions, and is increasingly supported by most modern operating systems.</p>
            <p>Comparison Table:</p>
            <p>
            <table>
                <tr>
                    <td>Feature</td>
                    <td>MBR</td>
                    <td>GPT</td>
                </tr>
                <tr>
                    <td>Max Disk Size</td>
                    <td>2 TB</td>
                    <td>9.4 ZB</td>
                </tr>
                <tr>
                    <td>Max Partitions</td>
                    <td>4 primary partitions</td>
                    <td>128 partitions (default)</td>
                </tr>
                <tr>
                    <td>Data Redundancy</td>
                    <td>No</td>
                    <td>Yes (multiple partition tables)</td>
                </tr>
                <tr>
                    <td>Error Checking</td>
                    <td>None</td>
                    <td>CRC32 checksums</td>
                </tr>
                <tr>
                    <td>Boot Mode</td>
                    <td>BIOS</td>
                    <td>UEFI</td>
                </tr>
                <tr>
                    <td>Compatibility</td>
                    <td>Older systems</td>
                    <td>Modern systems</td>
                </tr>
            </table>
            </p>
            <h3 id="operations-in-gdisk-and-fdisk">Operations in <code>gdisk</code> and <code>fdisk</code></h3>
            <p>Both <code>gdisk</code> and <code>fdisk</code> are powerful command-line tools used for disk partitioning, <code>gdisk</code> is designed for GPT disks, while <code>fdisk</code> traditionally works with MBR disks but now supports GPT as well. Below is a table summarizing the key operations available in each tool.</p>
            <h4 id="gdisk-operations"><code>gdisk</code> Operations</h4>
            <p>
            <table>
                <tr>
                    <td><strong>Command</strong></td>
                    <td><strong>Description</strong></td>
                    <td><strong>Usage Example</strong></td>
                </tr>
                <tr>
                    <td><code>p</code></td>
                    <td>Display the current partition table.</td>
                    <td>Type <code>p</code> to list all partitions.</td>
                </tr>
                <tr>
                    <td><code>n</code></td>
                    <td>Create a new partition.</td>
                    <td>Type <code>n</code> and follow prompts to define the partition.</td>
                </tr>
                <tr>
                    <td><code>d</code></td>
                    <td>Delete a partition.</td>
                    <td>Type <code>d</code> and enter the partition number to delete.</td>
                </tr>
                <tr>
                    <td><code>t</code></td>
                    <td>Change a partition's type code.</td>
                    <td>Type <code>t</code>, select partition, and enter new type code.</td>
                </tr>
                <tr>
                    <td><code>l</code></td>
                    <td>List known partition types.</td>
                    <td>Type <code>l</code> to display a list of type codes.</td>
                </tr>
                <tr>
                    <td><code>w</code></td>
                    <td>Write changes to disk and exit.</td>
                    <td>Type <code>w</code> to save changes and quit <code>gdisk</code>.</td>
                </tr>
                <tr>
                    <td><code>q</code></td>
                    <td>Quit without saving changes.</td>
                    <td>Type <code>q</code> to exit without saving.</td>
                </tr>
                <tr>
                    <td><code>x</code></td>
                    <td>Enter expert mode for advanced options.</td>
                    <td>Type <code>x</code> to access expert commands.</td>
                </tr>
                <tr>
                    <td><code>?</code></td>
                    <td>Display help information.</td>
                    <td>Type <code>?</code> to show help menu.</td>
                </tr>
                <tr>
                    <td><code>i</code></td>
                    <td>Show detailed information about a partition.</td>
                    <td>Type <code>i</code> and enter the partition number.</td>
                </tr>
                <tr>
                    <td><code>o</code></td>
                    <td>Create a new empty GUID partition table (GPT).</td>
                    <td>Type <code>o</code> to start with a new GPT.</td>
                </tr>
                <tr>
                    <td><code>r</code></td>
                    <td>Enter recovery and transformation mode.</td>
                    <td>Type <code>r</code> for recovery options.</td>
                </tr>
            </table>
            </p>
            <h4 id="fdisk-operations"><code>fdisk</code> Operations</h4>
            <p>
            <table>
                <tr>
                    <td><strong>Command</strong></td>
                    <td><strong>Description</strong></td>
                    <td><strong>Usage Example</strong></td>
                </tr>
                <tr>
                    <td><code>p</code></td>
                    <td>Display the partition table.</td>
                    <td>Type <code>p</code> to list all partitions.</td>
                </tr>
                <tr>
                    <td><code>n</code></td>
                    <td>Add a new partition.</td>
                    <td>Type <code>n</code>, choose type, and define partition size.</td>
                </tr>
                <tr>
                    <td><code>d</code></td>
                    <td>Delete a partition.</td>
                    <td>Type <code>d</code> and enter the partition number to delete.</td>
                </tr>
                <tr>
                    <td><code>t</code></td>
                    <td>Change a partition's system ID (type).</td>
                    <td>Type <code>t</code>, select partition, and enter hex code.</td>
                </tr>
                <tr>
                    <td><code>l</code></td>
                    <td>List known partition types.</td>
                    <td>Type <code>l</code> to display a list of type codes.</td>
                </tr>
                <tr>
                    <td><code>w</code></td>
                    <td>Write changes to disk and exit.</td>
                    <td>Type <code>w</code> to save changes and quit <code>fdisk</code>.</td>
                </tr>
                <tr>
                    <td><code>q</code></td>
                    <td>Quit without saving changes.</td>
                    <td>Type <code>q</code> to exit without saving.</td>
                </tr>
                <tr>
                    <td><code>m</code></td>
                    <td>Display help menu.</td>
                    <td>Type <code>m</code> to show help information.</td>
                </tr>
                <tr>
                    <td><code>a</code></td>
                    <td>Toggle a bootable flag on a partition.</td>
                    <td>Type <code>a</code> and select the partition.</td>
                </tr>
                <tr>
                    <td><code>v</code></td>
                    <td>Verify the partition table for errors.</td>
                    <td>Type <code>v</code> to check for inconsistencies.</td>
                </tr>
                <tr>
                    <td><code>x</code></td>
                    <td>Enter expert mode for advanced options.</td>
                    <td>Type <code>x</code> for expert commands.</td>
                </tr>
                <tr>
                    <td><code>g</code></td>
                    <td>Create a new empty GPT partition table.</td>
                    <td>Type <code>g</code> to initialize GPT on a disk.</td>
                </tr>
            </table>
            </p>
            <h3 id="managing-disk-partitions">Managing Disk Partitions</h3>
            <h4 id="viewing-partition-tables">Viewing Partition Tables</h4>
            <p>To inspect the partition table of a disk, we use previously introduced tools <code>fdisk</code>, <code>parted</code>, or <code>gdisk</code>.</p>
            <h5>Using <code>fdisk</code></h5>
            <p>
            <div>
                <pre><code class="language-bash">sudo fdisk -l /dev/sda</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">Disk /dev/sda: 500 GiB, 536870912000 bytes, 1048576000 sectors
Disk model: ST500DM002-1BD14
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
Disklabel type: dos
Disk identifier: 0x12345678

Device     Boot   Start        End    Sectors   Size Id Type
/dev/sda1          2048  104857599 104855552    50G 83 Linux
/dev/sda2     104857600 209715199 104857600    50G 83 Linux</code></pre>
            </div>
            </p>
            <ul>
                <li>The disk <code>/dev/sda</code> is 500 GiB in size.</li>
                <li>It uses the <code>dos</code> partition table format (MBR).</li>
                <li>There are two primary partitions: <code>/dev/sda1</code> and <code>/dev/sda2</code>.</li>
            </ul>
            <h5>Using <code>parted</code></h5>
            <p><code>parted</code> is another tool that can be used to inspect the partition table, particularly helpful for both MBR and GPT partition tables. </p>
            <p>To view the partition table with <code>parted</code>, use the following command:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo parted /dev/sda print</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">Model: ATA ST500DM002-1BD14 (scsi)
Disk /dev/sda: 500GB
Sector size (logical/physical): 512B/4096B
Partition Table: msdos
Disk Flags: 

Number  Start   End     Size    Type     File system  Flags
 1      1049kB  50.0GB  50.0GB  primary  ext4
 2      50.0GB  100GB   50.0GB  primary  ext4</code></pre>
            </div>
            </p>
            <ul>
                <li>Here, the disk <code>/dev/sda</code> is 500GB.</li>
                <li>It uses the <code>msdos</code> partition table format.</li>
                <li>There are two primary partitions listed, each formatted with the <code>ext4</code> filesystem.</li>
            </ul>
            <h5>Using <code>gdisk</code></h5>
            <p><code>gdisk</code> is a tool similar to <code>fdisk</code> but designed specifically for GPT partition tables. Itâ€™s particularly useful for disks larger than 2 TB or when using UEFI-based systems.</p>
            <p>To view the partition table with <code>gdisk</code>, use the following command:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo gdisk -l /dev/sda</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">GPT fdisk (gdisk) version 1.0.5

Partition table scan:
  MBR: not present
  BSD: not present
  APM: not present
  GPT: present

Disk /dev/sda: 1048576000 sectors, 500.0 GiB
Logical sector size: 512 bytes
Disk identifier (GUID): D2AC4D27-567A-4E2B-8A6F-3BC66E42DAF7
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 1048575966
Partitions will be aligned on 2048-sector boundaries

Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048        104857599   50.0 GiB    8300  Linux filesystem
   2       104857600       209715199   50.0 GiB    8300  Linux filesystem</code></pre>
            </div>
            </p>
            <ul>
                <li>This disk <code>/dev/sda</code> is formatted with a GPT partition table.</li>
                <li>There are two partitions, each assigned the Linux filesystem type.</li>
                <li>The disk can accommodate up to 128 partitions and supports large disks (over 2 TB). </li>
            </ul>
            <h4 id="checking-free-space">Checking Free Space</h4>
            <p>To check for unallocated space on a diskâ€”space that hasnâ€™t been assigned to any partitionâ€”you can use tools like <code>fdisk</code>, <code>parted</code>, and <code>lsblk</code>. These utilities show information about partitions and any remaining unallocated space on the disk.</p>
            <h5>Using <code>fdisk</code></h5>
            <p>With <code>fdisk</code>, you can view both existing partitions and unallocated space. When you use <code>fdisk -l</code>, it lists the partitions on the disk, and at the end, any unallocated space will be noted.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo fdisk -l /dev/sda</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">Disk /dev/sda: 500 GiB, 536870912000 bytes, 1048576000 sectors
Disk model: ST500DM002-1BD14
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
Disklabel type: dos
Disk identifier: 0x12345678

Device     Boot   Start        End    Sectors   Size Id Type
/dev/sda1          2048  104857599 104855552    50G 83 Linux
/dev/sda2     104857600 209715199 104857600    50G 83 Linux

Disk /dev/sda has 400 GiB of unallocated space.</code></pre>
            </div>
            </p>
            <ul>
                <li>This shows that <code>/dev/sda</code> has 500 GB in total, with two partitions, and it indicates unallocated space.</li>
                <li>You can see that the remainder of the disk (400 GB) is unallocated.</li>
            </ul>
            <h5>Using <code>parted</code></h5>
            <p><code>parted</code> also displays unallocated space, making it a useful tool to confirm if your disk has unused space.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo parted /dev/sda print free</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">Model: ATA ST500DM002-1BD14 (scsi)
Disk /dev/sda: 500GB
Sector size (logical/physical): 512B/4096B
Partition Table: msdos
Disk Flags: 

Number  Start   End     Size    Type     File system  Flags
        0.00B  1049kB  1049kB            Free Space
 1      1049kB  50.0GB  50.0GB  primary  ext4
 2      50.0GB  100GB   50.0GB  primary  ext4
        100GB   500GB   400GB            Free Space</code></pre>
            </div>
            </p>
            <ul>
                <li>The <code>print free</code> option in <code>parted</code> shows both allocated and unallocated space.</li>
                <li>This example shows 400 GB of free space starting from 100 GB to the end of the disk.</li>
            </ul>
            <h5>Using <code>lsblk</code></h5>
            <p><code>lsblk</code> doesnâ€™t directly show unallocated space, but by listing only mounted filesystems and partitions, it indirectly indicates where unallocated space might be found on a disk.</p>
            <p>
            <div>
                <pre><code class="language-bash">lsblk</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0   500G  0 disk 
â”œâ”€sda1   8:1    0    50G  0 part /
â””â”€sda2   8:2    0    50G  0 part /home</code></pre>
            </div>
            </p>
            <ul>
                <li>Here, <code>lsblk</code> shows that <code>/dev/sda</code> has a total size of 500 GB.</li>
                <li>With only 100 GB used across two partitions, we can infer that the remaining space (400 GB) is unallocated. </li>
            </ul>
            <h4 id="creating-a-new-partition">Creating a New Partition</h4>
            <p>Hereâ€™s how to create a new partition on <code>/dev/sda</code>:</p>
            <h5>Using <code>fdisk</code></h5>
            <p>I. Open <code>fdisk</code>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo fdisk /dev/sda</code></pre>
            </div>
            </p>
            <p>II. List Current Partitions:</p>
            <p>Once in <code>fdisk</code>, type <code>p</code> and press Enter to view the current partition table.</p>
            <p>III. Create a New Partition:</p>
            <ul>
                <li>Type <code>n</code> to create a new partition.</li>
                <li><code>p</code> for a primary partition.</li>
                <li><code>e</code> for an extended partition (if you need more than four primary partitions on an MBR disk).</li>
                <li>Specify the partition number if prompted (you can usually press Enter to select the next available number).</li>
                <li>Choose the starting sector (press Enter to accept the default starting position).</li>
                <li>Specify the size by entering <code>+size</code>, for example, <code>+50G</code> for a 50 GB partition.</li>
            </ul>
            <p>IV. Write the Changes:</p>
            <p>Type <code>w</code> to write the changes to the disk and exit <code>fdisk</code>.</p>
            <p>V. Verify the New Partition:</p>
            <p>Use <code>lsblk</code> or <code>sudo fdisk -l</code> to confirm that the new partition has been created.</p>
            <h5>Using <code>parted</code></h5>
            <p>I. Open <code>parted</code>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo parted /dev/sda</code></pre>
            </div>
            </p>
            <p>II. Set Disk Label (Optional):</p>
            <p>
            <div>
                <pre><code class="language-bash">mklabel gpt</code></pre>
            </div>
            </p>
            <p>III. Create the Partition:</p>
            <p>
            <div>
                <pre><code class="language-bash">mkpart primary ext4 100GB 150GB</code></pre>
            </div>
            </p>
            <p>This creates a primary partition formatted as <code>ext4</code> starting at 100 GB and ending at 150 GB.</p>
            <p>IV. Type <code>quit</code> to exit <code>parted</code>.</p>
            <p>V. Format the Partition (Optional):</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mkfs.ext4 /dev/sda3</code></pre>
            </div>
            </p>
            <h5>Using <code>gdisk</code></h5>
            <p>I. Open <code>gdisk</code>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo gdisk /dev/sda</code></pre>
            </div>
            </p>
            <p>II. Create a New Partition:</p>
            <ul>
                <li>In <code>gdisk</code>, type <code>n</code> to create a new partition.</li>
                <li>Specify the partition number (or press Enter to select the next available).</li>
                <li>Choose the starting sector and size, similar to <code>fdisk</code>.</li>
                <li>Assign a partition type code if needed (e.g., <code>8300</code> for Linux filesystems).</li>
            </ul>
            <p>III. Write the Changes:</p>
            <p>Type <code>w</code> to write the changes to the disk and exit <code>gdisk</code>.</p>
            <p>After creating the partition, you may need to format it and add it to <code>/etc/fstab</code> for automatic mounting on boot. To format it, you can use a command such as:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mkfs.ext4 /dev/sda3</code></pre>
            </div>
            </p>
            <p>To mount it immediately, create a mount point and mount the partition:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mkdir /mnt/newpartition
sudo mount /dev/sda3 /mnt/newpartition</code></pre>
            </div>
            </p>
            <h4 id="resizing-partitions">Resizing Partitions</h4>
            <p>Resizing partitions involves careful steps to avoid data loss.</p>
            <h5>Shrinking a Partition</h5>
            <ul>
                <li>Before making any changes, itâ€™s essential to create a <strong>backup</strong> of important data to prevent potential data loss.</li>
                <li>To shrink the filesystem, utilize <strong>tools</strong> specific to the filesystem type; for example, <code>resize2fs</code> is suitable for <strong>ext4</strong> filesystems.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">sudo resize2fs /dev/sda1 40G</code></pre>
            </div>
            </p>
            <p>Following the filesystem shrink, use <strong>partition</strong> management tools such as <code>fdisk</code> or <code>parted</code> to modify the partition size.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo fdisk /dev/sda</code></pre>
            </div>
            </p>
            <p>Inside <code>fdisk</code>, you will need to <strong>delete</strong> the existing partition and recreate it, specifying the new, smaller size and ensuring it starts at the <strong>same sector</strong> as the original.</p>
            <h5>Expanding a Partition</h5>
            <ul>
                <li>To increase the partition size, adjust the <strong>partition</strong> to encompass additional available space using <code>fdisk</code> or <code>parted</code>.</li>
                <li>After resizing the partition, use filesystem tools like <strong>resize2fs</strong> to expand the filesystem to fill the entire resized partition.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">sudo resize2fs /dev/sda1</code></pre>
            </div>
            </p>
            <p><strong>General Tips for Partition Resizing</strong>:</p>
            <ul>
                <li>Always <strong>verify</strong> that the new partition size is accurate before applying changes, as incorrect sizing can lead to <strong>data loss</strong> or corruption.</li>
                <li>It's advisable to <strong>unmount</strong> the partition (if possible) prior to resizing operations to avoid potential <strong>errors</strong>.</li>
                <li>After resizing, use the <strong>fsck</strong> (filesystem check) tool to check the filesystem's <strong>integrity</strong>, ensuring it operates correctly.</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">sudo fsck /dev/sda1</code></pre>
            </div>
            </p>
            <p><strong>Post-Resize Checks</strong>:</p>
            <ul>
                <li>Run a <strong>health check</strong> on the disk and partition after resizing to confirm everything is functioning as expected.</li>
                <li>If the partition is used by the <strong>operating system</strong>, it may be necessary to <strong>reboot</strong> for changes to take effect fully.</li>
            </ul>
            <h4 id="deleting-partitions">Deleting Partitions</h4>
            <p>Hereâ€™s how to delete a partition, for example, <code>/dev/sda3</code>:</p>
            <h5>Using <code>fdisk</code> to Delete a Partition</h5>
            <p>I. Open <code>fdisk</code>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo fdisk /dev/sda</code></pre>
            </div>
            </p>
            <p>II. List Partitions:</p>
            <p>Type <code>p</code> and press Enter to view the current partitions and identify the one you want to delete.</p>
            <p>III. Delete the Partition:</p>
            <ul>
                <li>Type <code>d</code> to delete a partition.</li>
                <li>You will be prompted to enter the partition number. Enter the number of the partition you wish to delete (e.g., <code>3</code> for <code>/dev/sda3</code>).</li>
                <li>If you only have one partition, it will delete that automatically.</li>
            </ul>
            <p>IV. Write the Changes:</p>
            <p>Type <code>w</code> to write the changes and exit <code>fdisk</code>. This action removes the partition from the partition table.</p>
            <p>V. Verify the Deletion:</p>
            <p>Use <code>lsblk</code> or <code>sudo fdisk -l</code> to confirm the partition has been deleted.</p>
            <h5>Using <code>parted</code> to Delete a Partition</h5>
            <p>I. Open <code>parted</code>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo parted /dev/sda</code></pre>
            </div>
            </p>
            <p>II. List Partitions:</p>
            <p>Type <code>print</code> to view the partition table and locate the partition you want to delete.</p>
            <p>III. Delete the Partition:</p>
            <p>
            <div>
                <pre><code class="language-bash">rm 3</code></pre>
            </div>
            </p>
            <p>IV. Quit <code>parted</code>:</p>
            <ul>
                <li>Type <code>quit</code> to exit <code>parted</code>.
                    V. Verify the Deletion:</li>
                <li>Use <code>lsblk</code> or <code>sudo parted /dev/sda print</code> to ensure the partition is removed.</li>
            </ul>
            <h5>Using <code>gdisk</code> to Delete a Partition</h5>
            <p>I. Open <code>gdisk</code>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo gdisk /dev/sda</code></pre>
            </div>
            </p>
            <p>II. Delete the Partition:</p>
            <ul>
                <li>Type <code>d</code> and press Enter to delete a partition.</li>
                <li>Enter the partition number you want to delete (e.g., <code>3</code> for <code>/dev/sda3</code>).</li>
            </ul>
            <p>III. Write the Changes:</p>
            <p>Type <code>w</code> to write the changes to the disk and exit <code>gdisk</code>. Confirm the changes when prompted.</p>
            <p>IV. Verify the Deletion:</p>
            <p>Use <code>lsblk</code> or <code>sudo gdisk -l /dev/sda</code> to confirm the partition has been removed.</p>
            <p><strong>Note:</strong> Deleting a partition will remove all data on that partition. Make sure to back up any important data before proceeding with the deletion process.</p>
            <h3 id="practical-examples-and-commands">Practical Examples and Commands</h3>
            <h4 id="listing-all-disks-and-partitions">Listing All Disks and Partitions</h4>
            <p>The <code>lsblk</code> command provides a detailed overview of all block devices, including disks and partitions, and their mount points.</p>
            <p>
            <div>
                <pre><code class="language-bash">lsblk -o NAME,MAJ:MIN,RM,SIZE,RO,TYPE,MOUNTPOINT</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 465.8G  0 disk
â”œâ”€sda1   8:1    0    50G  0 part /
â”œâ”€sda2   8:2    0    50G  0 part /home
â””â”€sda3   8:3    0   100G  0 part /data</code></pre>
            </div>
            </p>
            <p>Here, each disk and partition is displayed with its size, type, and mount point. <code>sda</code> is the primary disk, with <code>sda1</code>, <code>sda2</code>, and <code>sda3</code> as its partitions.</p>
            <h4 id="formatting-and-mounting-a-new-partition">Formatting and Mounting a New Partition</h4>
            <p>After creating a new partition, such as <code>/dev/sda3</code>, you need to format it and then mount it to make it accessible.</p>
            <p><strong>Formatting</strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mkfs.ext4 /dev/sda3</code></pre>
            </div>
            </p>
            <p>This command formats the partition <code>/dev/sda3</code> with the <code>ext4</code> filesystem. Ensure youâ€™ve chosen the correct filesystem for your needs (e.g., <code>ext4</code>, <code>xfs</code>, etc.).</p>
            <p><strong>Creating a Mount Point</strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mkdir /mnt/data</code></pre>
            </div>
            </p>
            <p>This creates a directory (<code>/mnt/data</code>) where the partition will be mounted, allowing access to its contents from that location.</p>
            <p><strong>Mounting the Partition</strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo mount /dev/sda3 /mnt/data</code></pre>
            </div>
            </p>
            <p>Mounting attaches the <code>/dev/sda3</code> partition to the <code>/mnt/data</code> directory, making it accessible as part of the file system.</p>
            <p><strong>Verifying the Mount</strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">df -h | grep sda3</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">/dev/sda3       99G   60M   94G   1% /mnt/data</code></pre>
            </div>
            </p>
            <p>The <code>df -h</code> command provides details about the mounted partition, showing the used and available space. The output confirms that <code>/dev/sda3</code> is mounted on <code>/mnt/data</code>.</p>
            <h4 id="adding-the-partition-to-etc-fstab">Adding the Partition to <code>/etc/fstab</code></h4>
            <p>To ensure that the partition mounts automatically at boot, add an entry to the <code>/etc/fstab</code> file. This file defines how disk partitions, block devices, and remote filesystems are mounted.</p>
            <p><strong>Get the UUID</strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo blkid /dev/sda3</code></pre>
            </div>
            </p>
            <p>Example output:</p>
            <p>
            <div>
                <pre><code class="language-shell">/dev/sda3: UUID="abcd-1234" TYPE="ext4" PARTUUID="12345678-03"</code></pre>
            </div>
            </p>
            <p>The <code>blkid</code> command displays the UUID for each partition. UUIDs are unique identifiers for partitions, making them more reliable than device names, as device names can change between boots.</p>
            <p><strong>Edit <code>/etc/fstab</code></strong>:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo nano /etc/fstab</code></pre>
            </div>
            </p>
            <p>This opens the <code>/etc/fstab</code> file in a text editor (like <code>nano</code>). You can add an entry for the new partition to ensure it mounts automatically at boot.</p>
            <p>Add the following line:</p>
            <p>
            <div>
                <pre><code class="language-shell">UUID=abcd-1234   /mnt/data   ext4   defaults   0   2</code></pre>
            </div>
            </p>
            <ul>
                <li><code>UUID=abcd-1234</code> specifies the UUID for the partition.</li>
                <li><code>/mnt/data</code> is the directory where the partition will be mounted.</li>
                <li><code>ext4</code> specifies the filesystem type.</li>
                <li><code>defaults</code> are mount options (e.g., read/write permissions).</li>
                <li><code>0</code> is a flag for whether the partition should be dumped (typically set to <code>0</code>).</li>
                <li><code>2</code> sets the order for filesystem checks at boot, where <code>2</code> means it will be checked after the root filesystem.</li>
            </ul>
            <p>After saving and exiting, you can run <code>sudo mount -a</code> to apply changes immediately.</p>
            <h3 id="changing-mbr-to-gpt-using-gdisk">Changing MBR to GPT Using gdisk</h3>
            <p>Converting a disk's partition table from the Master Boot Record (MBR) format to the GUID Partition Table (GPT) can unlock new capabilities, such as supporting disks larger than 2 terabytes and allowing more than four primary partitions. The <code>gdisk</code> utility is a powerful tool that facilitates this conversion while aiming to preserve your existing data. In this comprehensive guide, we'll walk through the process of changing an MBR partition table to GPT using <code>gdisk</code>, providing detailed explanations and interpretations at each step.</p>
            <h4 id="preparing-for-the-conversion">Preparing for the Conversion</h4>
            <p>Converting from MBR to GPT is a significant operation that can potentially lead to data loss if not done carefully. Proper preparation is crucial.</p>
            <ul>
                <li>Before making any changes, back up all important data on the disk. While <code>gdisk</code> is designed to convert partition tables without losing data, unexpected issues can occur.</li>
                <li>Ensure that your system's firmware (BIOS/UEFI) supports GPT. Most modern systems with UEFI firmware can boot from GPT disks. Older BIOS systems may require additional steps, like creating a BIOS boot partition.</li>
            </ul>
            <h4 id="step-1-examine-the-current-partition-table">Step 1: Examine the Current Partition Table</h4>
            <p>Start by inspecting the existing partition table to understand the current disk layout.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo gdisk -l /dev/sda</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">GPT fdisk (gdisk) version 1.0.5

Partition table scan:
  MBR: MBR only
  BSD: not present
  APM: not present
  GPT: not present

Found valid MBR with protective or hybrid GPT; converting MBR to GPT format in memory.
This operation may not preserve existing partitions.

Disk /dev/sda: 20971520 sectors, 10.0 GiB
Sector size (logical/physical): 512 bytes / 512 bytes
Disk identifier (GUID): FFFFEEEE-DDDD-CCCC-BBBB-AAAA99998888
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 20971486
Total free space is 0 sectors (0 bytes)

Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048        20971519   10.0 GiB    0700  Microsoft basic data</code></pre>
            </div>
            </p>
            <ul>
                <li>The disk <code>/dev/sda</code> currently uses the MBR partitioning scheme.</li>
                <li>There's one primary partition occupying the entire disk.</li>
                <li><code>gdisk</code> is ready to convert the MBR partition table to GPT in memory.</li>
            </ul>
            <h4 id="step-2-launch-gdisk-interactive-mode">Step 2: Launch gdisk Interactive Mode</h4>
            <p>Run <code>gdisk</code> to interactively convert the partition table.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo gdisk /dev/sda</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">GPT fdisk (gdisk) version 1.0.5

Type 'help' or '?' to view a list of commands.

Command (? for help):</code></pre>
            </div>
            </p>
            <ul>
                <li>You've entered <code>gdisk</code>'s interactive prompt.</li>
                <li>You can now issue commands to modify the partition table.</li>
            </ul>
            <h4 id="step-3-review-the-existing-partition-table">Step 3: Review the Existing Partition Table</h4>
            <p>Before making changes, it's wise to review the current partitions.</p>
            <p>At the <code>gdisk</code> prompt, type:</p>
            <p>
            <div>
                <pre><code class="language-shell">p</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">Disk /dev/sda: 20971520 sectors, 10.0 GiB
Sector size (logical/physical): 512 bytes / 512 bytes
Disk identifier (GUID): A1B2C3D4-E5F6-7890-1234-56789ABCDEF0
Partition table holds up to 128 entries

Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048        20971519   10.0 GiB    0700  Microsoft basic data</code></pre>
            </div>
            </p>
            <ul>
                <li>Confirms the presence of a single partition spanning the entire disk.</li>
                <li>The partition code <code>0700</code> indicates a Microsoft basic data partition.</li>
            </ul>
            <h4 id="step-4-write-the-new-gpt-partition-table">Step 4: Write the New GPT Partition Table</h4>
            <p>To apply the GPT format, write the changes to the disk.</p>
            <p>At the <code>gdisk</code> prompt, type:</p>
            <p>
            <div>
                <pre><code class="language-shell">w</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING PARTITIONS!!

Do you want to proceed? (Y/N): y</code></pre>
            </div>
            </p>
            <ul>
                <li><code>gdisk</code> warns that writing the GPT data will overwrite the existing MBR partition table.</li>
                <li>Typing <code>y</code> confirms that you want to proceed.</li>
            </ul>
            <p>After confirmation, you should see:</p>
            <p>
            <div>
                <pre><code class="language-shell">OK; writing new GUID partition table (GPT) to /dev/sda.
The operation has completed successfully.</code></pre>
            </div>
            </p>
            <ul>
                <li>The new GPT partition table has been successfully written to the disk.</li>
                <li>You can now exit <code>gdisk</code>.</li>
            </ul>
            <h4 id="step-5-verify-the-conversion">Step 5: Verify the Conversion</h4>
            <p>Confirm that the disk now uses the GPT partitioning scheme.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo gdisk -l /dev/sda</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">GPT fdisk (gdisk) version 1.0.5

Disk /dev/sda: 20971520 sectors, 10.0 GiB
Sector size (logical/physical): 512 bytes / 512 bytes
Disk identifier (GUID): B123C456-D789-0E12-3456-7890ABCDEF12
Partition table holds up to 128 entries

Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048        20971519   10.0 GiB    8300  Linux filesystem</code></pre>
            </div>
            </p>
            <ul>
                <li>The disk now has a GPT partition table.</li>
                <li>The existing partition is preserved and recognized as a GPT partition.</li>
                <li>The partition code <code>8300</code> indicates a Linux filesystem.</li>
            </ul>
            <h4 id="step-6-adjust-partition-types-if-necessary-">Step 6: Adjust Partition Types (If Necessary)</h4>
            <p>Depending on your system, you may need to adjust the partition type codes.</p>
            <p>At the <code>gdisk</code> prompt, type:</p>
            <p>
            <div>
                <pre><code class="language-shell">t</code></pre>
            </div>
            </p>
            <p>You'll be prompted to enter the partition number:</p>
            <p>
            <div>
                <pre><code class="language-shell">Partition number (1-1): 1</code></pre>
            </div>
            </p>
            <p>Then enter the new hex code:</p>
            <p>
            <div>
                <pre><code class="language-shell">Hex code or GUID (L to show codes, Enter = 8300): 8300</code></pre>
            </div>
            </p>
            <ul>
                <li>Ensures that the partition type is set correctly for your operating system.</li>
                <li>You can list available codes by typing <code>L</code> at the prompt.</li>
            </ul>
            <h4 id="step-7-create-a-bios-boot-partition-for-bios-systems-">Step 7: Create a BIOS Boot Partition (For BIOS Systems)</h4>
            <p>If your system uses BIOS (not UEFI), you'll need a BIOS boot partition to boot from a GPT disk.</p>
            <p>At the <code>gdisk</code> prompt, create a new partition:</p>
            <p>
            <div>
                <pre><code class="language-shell">n</code></pre>
            </div>
            </p>
            <p><strong>Example Input:</strong></p>
            <p>
            <table>
                <tr>
                    <td>Option</td>
                    <td>Action</td>
                </tr>
                <tr>
                    <td>Partition Number</td>
                    <td>Press Enter to accept the default.</td>
                </tr>
                <tr>
                    <td>First Sector</td>
                    <td>Press Enter to accept the default.</td>
                </tr>
                <tr>
                    <td>Last Sector</td>
                    <td><code>+1M</code> (creates a 1 MB partition).</td>
                </tr>
                <tr>
                    <td>Hex Code</td>
                    <td><code>ef02</code> (BIOS boot partition).</td>
                </tr>
            </table>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">Command (? for help): n
Partition number (2-128, default 2): [Press Enter]
First sector (34-2047, default = 34) or {+-}size{KMGTP}: [Press Enter]
Last sector (2048-2047, default = 2047) or {+-}size{KMGTP}: +1M
Current type is 'Linux filesystem'
Hex code or GUID (L to show codes, Enter = 8300): ef02
Changed type of partition to 'BIOS boot partition'</code></pre>
            </div>
            </p>
            <ul>
                <li>A small BIOS boot partition is created at the beginning of the disk.</li>
                <li>This partition is required for GRUB to boot from a GPT disk on BIOS systems.</li>
            </ul>
            <h4 id="step-8-write-changes-and-exit-gdisk">Step 8: Write Changes and Exit gdisk</h4>
            <p>Save the changes to the disk.</p>
            <p>At the <code>gdisk</code> prompt, type:</p>
            <p>
            <div>
                <pre><code class="language-shell">w</code></pre>
            </div>
            </p>
            <p>Confirm when prompted:</p>
            <p>
            <div>
                <pre><code class="language-shell">Do you want to proceed? (Y/N): y</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">OK; writing new GUID partition table (GPT) to /dev/sda.
The operation has completed successfully.</code></pre>
            </div>
            </p>
            <h4 id="step-9-reinstall-the-bootloader">Step 9: Reinstall the Bootloader</h4>
            <p>Since the partition table has changed, you need to reinstall the bootloader.</p>
            <p>For GRUB on BIOS systems:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo grub-install /dev/sda</code></pre>
            </div>
            </p>
            <p><strong>Example Output:</strong></p>
            <p>
            <div>
                <pre><code class="language-shell">Installing for i386-pc platform.
Installation finished. No error reported.</code></pre>
            </div>
            </p>
            <ul>
                <li>GRUB is reinstalled to work with the new GPT partition table.</li>
                <li>No errors indicate a successful installation.</li>
            </ul>
            <h4 id="step-10-update-the-filesystem-table-fstab-">Step 10: Update the Filesystem Table (fstab)</h4>
            <p>Ensure that the <code>/etc/fstab</code> file references the correct partitions.</p>
            <p>Use <code>blkid</code> to find the new UUIDs:</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo blkid</code></pre>
            </div>
            </p>
            <p>Update <code>/etc/fstab</code> accordingly.</p>
            <h4 id="step-11-reboot-and-test">Step 11: Reboot and Test</h4>
            <p>Reboot the system to verify that everything works correctly.</p>
            <p>
            <div>
                <pre><code class="language-bash">sudo reboot</code></pre>
            </div>
            </p>
            <ul>
                <li>If the system boots without issues, the conversion was successful.</li>
                <li>If problems occur, you may need to troubleshoot bootloader configurations.</li>
            </ul>
            <h4 id="visual-representation-of-the-conversion">Visual Representation of the Conversion</h4>
            <p>To better understand the process, here's a simplified visual:</p>
            <p>Before Conversion (MBR):</p>
            <p>
            <div>
                <pre><code class="language-shell">+-----------------------+
|       MBR Disk        |
|-----------------------|
| MBR Partition Table   |
|                       |
| +-------------------+ |
| |   /dev/sda1       | |
| |   Primary         | |
| |   Linux           | |
| +-------------------+ |
|                       |
+-----------------------+</code></pre>
            </div>
            </p>
            <p>After Conversion (GPT):</p>
            <p>
            <div>
                <pre><code class="language-shell">+-----------------------+
|       GPT Disk        |
|-----------------------|
| GPT Partition Table   |
|                       |
| +-------------------+ |
| |   /dev/sda1       | |
| |   Linux Filesystem| |
| +-------------------+ |
| +-------------------+ |
| |   /dev/sda2       | |
| |   BIOS Boot Part. | |
| +-------------------+ |
|                       |
+-----------------------+</code></pre>
            </div>
            </p>
            <ul>
                <li>The disk now uses GPT, with the original partition preserved.</li>
                <li>A new BIOS boot partition is added for bootloader compatibility.</li>
            </ul>
            <h3 id="safety-precautions">Safety Precautions</h3>
            <ul>
                <li>Always back up important data before making changes.</li>
                <li>Unmount partitions before resizing or deleting.</li>
                <li>For system partitions, use a live CD/USB to make changes.</li>
                <li>Verify commands and parameters to avoid mistakes.</li>
                <li>Ensure you're familiar with the tools and steps involved.</li>
            </ul>
            <h3 id="common-errors-and-troubleshooting">Common Errors and Troubleshooting</h3>
            <h4 id="error-partition-in-use-">Error: "Partition in Use"</h4>
            <ul>
                <li>The <strong>cause</strong> of this error is usually that the partition is mounted or actively in use by the system. </li>
                <li>To resolve this, unmount the partition by running:</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">sudo umount /dev/sda1</code></pre>
            </div>
            </p>
            <p>Itâ€™s also advisable to <strong>close</strong> any applications or services currently using the partition, as they can prevent the partition from unmounting properly.</p>
            <h4 id="error-no-free-sectors-available-">Error: "No Free Sectors Available"</h4>
            <p>This error generally occurs when there is <strong>no unallocated space</strong> left on the disk. To address this, you can either shrink existing partitions to <strong>create free space</strong> or, if needed, upgrade to a larger disk or use additional storage to accommodate the expansion.</p>
            <h4 id="error-filesystem-check-required-">Error: "Filesystem Check Required"</h4>
            <ul>
                <li>Filesystem inconsistencies after resizing can prompt this error.</li>
                <li>To fix it, run a <strong>filesystem check and repair</strong> with the following command:</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">sudo fsck -f /dev/sda1</code></pre>
            </div>
            </p>
            <p>This command performs a comprehensive <strong>scan and repair</strong> of the filesystem, helping to restore it to a consistent state after any partition resizing activities.</p>
            <h3 id="challenges">Challenges</h3>
            <ol>
                <li>What are the key differences in terms of capacity, partition limits, and compatibility between MBR (Master Boot Record) and GPT (GUID Partition Table) partition tables?</li>
                <li>How can you list all the disk partitions on a Linux system?</li>
                <li>What are the steps to create a new partition on a disk using the <code>fdisk</code> command?</li>
                <li>What distinguishes primary partitions from extended partitions?</li>
                <li>How can you delete an existing partition using the <code>fdisk</code> command?</li>
                <li>Why is it necessary to create a filesystem on a disk partition?</li>
                <li>Is it possible to convert a disk from an MBR partition table to a GPT partition table and vice versa? If yes, how can this be achieved?</li>
                <li>What do the first two or three letters in common disk names (like <code>/dev/sda</code>, <code>/dev/hda</code>) signify?</li>
                <li>What information is conveyed by the last letter and the numbers in common disk names (e.g., <code>/dev/sda1</code>, <code>/dev/sdc2</code>)?</li>
                <li>What is the largest capacity of a disk that can be effectively partitioned using MBR and GPT partition tables, respectively?</li>
            </ol>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol><a href="#partitioning-disks">Partitioning Disks</a>
                <ol>
                    <li><a href="#basic-partition-operations">Basic Partition Operations</a></li>
                    <li><a href="#relationship-between-physical-disks-and-partitions">Relationship Between Physical Disks and Partitions</a></li>
                    <li><a href="#disk-naming-conventions">Disk Naming Conventions</a></li>
                    <li><a href="#types-of-partitions">Types of Partitions</a>
                        <ol>
                            <li><a href="#primary-partitions">Primary Partitions</a></li>
                            <li><a href="#extended-and-logical-partitions">Extended and Logical Partitions</a></li>
                            <li><a href="#comparison">Comparison</a></li>
                        </ol>
                    </li>
                    <li><a href="#partition-table-formats-mbr-vs-gpt">Partition Table Formats: MBR vs. GPT</a>
                        <ol>
                            <li><a href="#master-boot-record-mbr-">Master Boot Record (MBR)</a></li>
                            <li><a href="#guid-partition-table-gpt-">GUID Partition Table (GPT)</a></li>
                        </ol>
                    </li>
                    <li><a href="#operations-in-gdisk-and-fdisk">Operations in gdisk and fdisk</a>
                        <ol>
                            <li><a href="#gdisk-operations">gdisk Operations</a></li>
                            <li><a href="#fdisk-operations">fdisk Operations</a></li>
                        </ol>
                    </li>
                    <li><a href="#managing-disk-partitions">Managing Disk Partitions</a>
                        <ol>
                            <li><a href="#viewing-partition-tables">Viewing Partition Tables</a></li>
                            <li><a href="#checking-free-space">Checking Free Space</a></li>
                            <li><a href="#creating-a-new-partition">Creating a New Partition</a></li>
                            <li><a href="#resizing-partitions">Resizing Partitions</a></li>
                            <li><a href="#deleting-partitions">Deleting Partitions</a></li>
                        </ol>
                    </li>
                    <li><a href="#practical-examples-and-commands">Practical Examples and Commands</a>
                        <ol>
                            <li><a href="#listing-all-disks-and-partitions">Listing All Disks and Partitions</a></li>
                            <li><a href="#formatting-and-mounting-a-new-partition">Formatting and Mounting a New Partition</a></li>
                            <li><a href="#adding-the-partition-to-etc-fstab">Adding the Partition to /etc/fstab</a></li>
                        </ol>
                    </li>
                    <li><a href="#changing-mbr-to-gpt-using-gdisk">Changing MBR to GPT Using gdisk</a>
                        <ol>
                            <li><a href="#preparing-for-the-conversion">Preparing for the Conversion</a></li>
                            <li><a href="#step-1-examine-the-current-partition-table">Step 1: Examine the Current Partition Table</a></li>
                            <li><a href="#step-2-launch-gdisk-interactive-mode">Step 2: Launch gdisk Interactive Mode</a></li>
                            <li><a href="#step-3-review-the-existing-partition-table">Step 3: Review the Existing Partition Table</a></li>
                            <li><a href="#step-4-write-the-new-gpt-partition-table">Step 4: Write the New GPT Partition Table</a></li>
                            <li><a href="#step-5-verify-the-conversion">Step 5: Verify the Conversion</a></li>
                            <li><a href="#step-6-adjust-partition-types-if-necessary-">Step 6: Adjust Partition Types (If Necessary)</a></li>
                            <li><a href="#step-7-create-a-bios-boot-partition-for-bios-systems-">Step 7: Create a BIOS Boot Partition (For BIOS Systems)</a></li>
                            <li><a href="#step-8-write-changes-and-exit-gdisk">Step 8: Write Changes and Exit gdisk</a></li>
                            <li><a href="#step-9-reinstall-the-bootloader">Step 9: Reinstall the Bootloader</a></li>
                            <li><a href="#step-10-update-the-filesystem-table-fstab-">Step 10: Update the Filesystem Table (fstab)</a></li>
                            <li><a href="#step-11-reboot-and-test">Step 11: Reboot and Test</a></li>
                            <li><a href="#visual-representation-of-the-conversion">Visual Representation of the Conversion</a></li>
                        </ol>
                    </li>
                    <li><a href="#safety-precautions">Safety Precautions</a></li>
                    <li><a href="#common-errors-and-troubleshooting">Common Errors and Troubleshooting</a>
                        <ol>
                            <li><a href="#error-partition-in-use-">Error: "Partition in Use"</a></li>
                            <li><a href="#error-no-free-sectors-available-">Error: "No Free Sectors Available"</a></li>
                            <li><a href="#error-filesystem-check-required-">Error: "Filesystem Check Required"</a></li>
                        </ol>
                    </li>
                    <li><a href="#challenges">Challenges</a></li>
                </ol>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/commands.html">Commands</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/cron_jobs.html">Cron Jobs</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/disk_usage.html">Disk Usage</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/dwm.html">Dwm</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/encryption.html">Encryption</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/enviroment_modules.html">Enviroment Modules</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/enviroment_variable.html">Enviroment Variable</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/file_system.html">File System</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/files_and_dirs.html">Files and Dirs</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/finding_files.html">Finding Files</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/firewall.html">Firewall</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/grep.html">Grep</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/hardware.html">Hardware</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/inodes_and_symlinks.html">Inodes and Symlinks</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/introduction.html">Introduction</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/kernel.html">Kernel</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/ldap.html">Ldap</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/log_files_and_journals.html">Log Files and Journals</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/logical_volume_management.html">Logical Volume Management</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/managing_users.html">Managing Users</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/mounting.html">Mounting</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/networking.html">Networking</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/nfs.html">Nfs</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/package_managers.html">Package Managers</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/partitions.html">Partitions</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/performance_monitoring.html">Performance Monitoring</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/permissions.html">Permissions</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/pipe_and_redirect.html">Pipe and Redirect</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/ports.html">Ports</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/processes.html">Processes</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/sed_and_awk.html">Sed and Awk</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/selinux.html">Selinux</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/services.html">Services</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/shells_and_bash_configuration.html">Shells and Bash Configuration</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/ssh_and_scp.html">Ssh and Scp</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/system_startup.html">System Startup</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/tar_and_gzip.html">Tar and Gzip</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/utilities.html">Utilities</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/virtual_machines.html">Virtual Machines</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

</html>