<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <title>Disk Partitions and Volumes</title>
    <meta charset="utf-8" />
    <meta content="Think of data storage devices, such as DVDs, USB flash drives, and hard drives (HDDs or SSDs), as an entire cake." name="description" />
    <meta content="Adam Djellouli" name="keywords" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie-edge" http-equiv="X-UA-Compatible">
    </meta>
    </meta>
</head>

<body>
    <nav>
        <a class="logo" href="../index.html" title="Adam Djellouli - Home">
            <img alt="Adam Djellouli Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul>
            <li> <a href="../../index.html" title="Home"> Home </a> </li>
            <li> <a class="active" href="../../core/blog.html" title="Adam Djellouli's Blog - Programming, technology and more"> Blog </a> </li>
            <li> <a href="../../core/tools.html" title="Useful Tools by Adam Djellouli"> Tools </a> </li>
            <li> <a href="../../core/projects.html" title="Projects by Adam Djellouli"> Projects </a> </li>
            <li> <a href="../../core/resume.html" title="Adam Djellouli's Resume"> Resume </a> </li>
            <li> <a href="../../core/about.html" title="About Adam Djellouli"> About </a> </li>
            <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
        </ul>
    </nav>
    <section id="article-body"></section>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="disk-partitions-and-volumes">Disk Partitions and Volumes</h2>
            <p>Think of data storage devices, such as DVDs, USB flash drives, and hard drives (HDDs or SSDs), as an entire cake. This cake can be cut into smaller slices or 'partitions'. These partitions are essentially divisions or sections within the storage device, helping to categorize or organize the storage for diverse uses. For instance, you can segregate different file types or even run multiple operating systems in separate partitions. The structure and arrangement of these partitions resemble a table, which you'd use to keep track of everything.</p>
            <p>Just as a cake is divided into partitions, a bookshelf is divided into sections known as 'volumes'. A volume is analogous to a book genre section on a bookshelf, each having its own file system or a method of organizing files. While a partition is limited to a single disk (although that disk can have multiple partitions), a volume has the capability to span across several disks. This is similar to joining several bookshelves to create more space for your books. For instance, you might have a hard drive partitioned into three parts: one for your operating system, one for your personal documents, and a third for your multimedia files. However, if you need extra space for larger files, such as videos, you can create a volume that spans multiple devices to distribute the storage.</p>
            <h2 id="logical-volume-manager-lvm-">Logical Volume Manager (LVM)</h2>
            <p>The Logical Volume Manager (LVM) is a robust tool for managing disk storage on Linux-based systems. It allows the creation of 'logical volumes' that can be readily resized, relocated, and expanded. This introduces a level of flexibility as it facilitates the addition of storage space to your system without the need for additional physical disks. Furthermore, LVM allows for the creation of 'volume snapshots', which are extremely valuable for creating backups of your data.</p>
            <p>Despite its advantages, using LVM can make the system setup process more complex, as it requires additional support from the kernel. In certain circumstances, repair images might not be compatible with LVM-based systems. This means it is essential to consider the potential complexity and support issues before deciding to use LVM in a Linux environment.</p>
            <h2 id="understanding-the-components-of-the-logical-volume-manager-lvm-">Understanding the Components of the Logical Volume Manager (LVM)</h2>
            <p>LVM comprises several fundamental components, which include:</p>
            <ul>
                <li><strong>Physical Volumes (PV)</strong>: These are your actual storage devices, such as hard disk drives (HDDs) or solid-state drives (SSDs).</li>
                <li><strong>Volume Groups (VG)</strong>: These are collections of physical volumes that can be managed as a single entity.</li>
                <li><strong>Logical Volumes (LV)</strong>: These are the storage sections within volume groups. A logical volume can be assigned a file system and mounted for use.</li>
            </ul>
            <p>Let's understand these components with an analogy. Think of a physical volume as a book, a volume group as a bookshelf containing several books, and a logical volume as a chapter in a book.</p>
            <p>
            <div>
                <pre><code class="language-shell">|-----------------|     |-----------------|     |-----------------|
|  Physical       |     |  Physical       |     |  Physical       |
|  Volume (PV)    |     |  Volume (PV)    |     |  Volume (PV)    |
|  /dev/sdb       |     |  /dev/sdc       |     |  /dev/sdd       |
|-----------------|     |-----------------|     |-----------------|
        |                      |                       |
        |                      |                       |
        ------------------------                       |
                           |                           |
                           ----------------------------
                                       |
                                       |
|------------------------------------------------------------------|
|                         Volume Group (VG)                        |
|                              TEST                                |
|                                                                  |
|  |------------------|     |------------------|                   |
|  | Logical Volume   |     | Logical Volume   |     Unallocated   |
|  | (LV)             |     | (LV)             |     Space         |
|  | vol_name_1       |     | vol_name_2       |                   |
|  | Size: 20G        |     | Size: 12G        |                   |
|  |------------------|     |------------------|                   |
|                                                                  |
|------------------------------------------------------------------|</code></pre>
            </div>
            </p>
            <p>This diagram illustrates that:</p>
            <ul>
                <li>Physical volumes <code>/dev/sdb</code>, <code>/dev/sdc</code>, and <code>/dev/sdd</code> are combined to create the TEST volume group.</li>
                <li>Inside this volume group, two logical volumes (<code>vol_name_1</code> and <code>vol_name_2</code>) are created, of size 20GB and 12GB respectively.</li>
                <li>The remainder of the volume group's capacity is unallocated space, ready to be assigned to new or existing logical volumes as needed.</li>
            </ul>
            <h2 id="creating-and-managing-lvm-volumes">Creating and Managing LVM Volumes</h2>
            <p>Creating and managing LVM volumes involve a series of steps that utilize different commands. Here is a brief walkthrough:</p>
            <ol>
                <li><strong>Creating Physical Volumes</strong>: This is the initial step, where you use the <code>pvcreate</code> command to set up physical volumes on your disks. This command turns the entire disk into a single LVM physical volume. Here's an example using three devices (<code>/dev/sdb</code>, <code>/dev/sdc</code>, and <code>/dev/sdd</code>):</li>
            </ol>
            <p>
            <div>
                <pre><code class="language-bash">pvcreate /dev/sdb
pvcreate /dev/sdc
pvcreate /dev/sdd</code></pre>
            </div>
            </p>
            <ol>
                <li><strong>Defining Volume Groups</strong>: Next, you create a volume group using the vgcreate command and add your physical volumes to it. The volume group allows you to manage multiple physical volumes as one. Here's an example of creating a volume group named TEST and extending it with additional physical volumes:</li>
            </ol>
            <p>
            <div>
                <pre><code class="language-bash">vgcreate TEST /dev/sdb
vgextend TEST /dev/sdc /dev/sdd</code></pre>
            </div>
            </p>
            <ol>
                <li><strong>Creating Logical Volumes</strong>: After your volume group is set, you can create logical volumes within this group using the <code>lvcreate</code> command. These logical volumes will be your actual storage areas. In this example, two logical volumes (<code>vol_name_1</code> and <code>vol_name_2</code>) of sizes 20GB and 12GB respectively, are created within the TEST volume group:</li>
            </ol>
            <p>
            <div>
                <pre><code class="language-bash">lvcreate -L 20G -n vol_name_1 TEST
lvcreate -L 12G -n vol_name_2 TEST</code></pre>
            </div>
            </p>
            <ol>
                <li><strong>Creating a File System on the Logical Volume</strong>: Before you can start storing data, you need to create a file system on the logical volume. You can do this using the mkfs command. In this example, an ext4 file system is created on <code>vol_name_1</code>:</li>
            </ol>
            <p>
            <div>
                <pre><code class="language-bash">mkfs -t ext4 /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <ol>
                <li><strong>Mounting the Logical Volume</strong>: Finally, you mount the logical volume to a designated mounting point using the mount command. This allows you to start storing and accessing data. In this example, <code>vol_name_1</code> is mounted at <code>/mounting_point</code>:</li>
            </ol>
            <p>
            <div>
                <pre><code class="language-bash">mount -t ext4 /dev/TEST/vol_name_1 /mounting_point</code></pre>
            </div>
            </p>
            <h2 id="extending-a-logical-volume">Extending a Logical Volume</h2>
            <p>If you have available space in a volume group, you can extend a logical volume to use that space. This is done using the <code>lvextend</code> command:</p>
            <p>
            <div>
                <pre><code class="language-bash">lvextend -L +10G /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <p>This command extends <code>vol_name_1</code> by an additional 10GB. The file system on this volume needs to be resized to recognize the additional space:</p>
            <p>
            <div>
                <pre><code class="language-bash">resize2fs /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <h2 id="reducing-a-logical-volume">Reducing a Logical Volume</h2>
            <p>To reduce the size of a logical volume, ensure that the volume has enough free space to avoid losing data. First, unmount the logical volume and check it for errors:</p>
            <p>
            <div>
                <pre><code class="language-bash">umount /dev/TEST/vol_name_1
e2fsck -f /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <p>Then, reduce the file system size before reducing the logical volume:</p>
            <p>
            <div>
                <pre><code class="language-bash">resize2fs /dev/TEST/vol_name_1 15G
lvreduce -L 15G /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <h2 id="deleting-a-logical-volume">Deleting a Logical Volume</h2>
            <p>You might need to delete a logical volume to free up space in your volume group. Unmount the logical volume and then use the <code>lvremove</code> command:</p>
            <p>
            <div>
                <pre><code class="language-bash">umount /dev/TEST/vol_name_1
lvremove /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <h2 id="backup-and-recovery-of-lvm-configurations">Backup and Recovery of LVM Configurations</h2>
            <p>Taking regular snapshots of logical volumes can be an effective backup strategy. A snapshot is a copy of the logical volume at a certain point in time. It's created using the <code>lvcreate</code> command:</p>
            <p>
            <div>
                <pre><code class="language-bash">lvcreate -L 1G -s -n snap_vol_name_1 /dev/TEST/vol_name_1</code></pre>
            </div>
            </p>
            <p>This command creates a 1GB snapshot named <code>snap_vol_name_1</code> of <code>vol_name_1</code>. If a restore is needed, you can revert the logical volume to the snapshot state using the <code>lvconvert</code> command:</p>
            <p>
            <div>
                <pre><code class="language-bash">lvconvert --merge /dev/TEST/snap_vol_name_1</code></pre>
            </div>
            </p>
            <header>Challenges and Exercises</header>
            <ol>
                <li>How would you reduce the size of an LVM partition? Remember, you can only reduce a logical volume's size if there's enough free space within it. Also, ensure that you back up any crucial data on the partition before resizing. Describe the command(s) you'd use and the process you'd follow.</li>
                <li>How would you extend an LVM partition to utilize more free space within the volume group? What command(s) would you use for this purpose?</li>
                <li>Explain the process of taking a snapshot of an LVM logical volume. Why might this be useful? How can you create and restore from a snapshot?</li>
                <li>How would you remove a logical volume from an LVM setup? Detail the necessary steps to ensure data safety before, during, and after the process.</li>
                <li>How would you add a new physical disk to an existing volume group in an LVM setup? Describe the process and the command(s) you would need to use.</li>
                <li>Explain the concept of striping in LVM. What is its purpose, and how can you set up a striped logical volume?</li>
                <li>How can you monitor the status of your LVM setup, including checking for available free space, the status of logical volumes, and the status of volume groups? What command(s) would you use for this purpose?</li>
                <li>In a RAID (Redundant Array of Independent Disks) setup, what are the differences between using LVM and not using LVM? What benefits does LVM provide in a RAID environment?</li>
            </ol>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#disk-partitions-and-volumes">Disk Partitions and Volumes</a></li>
                <li><a href="#logical-volume-manager-lvm-">Logical Volume Manager (LVM)</a></li>
                <li><a href="#understanding-the-components-of-the-logical-volume-manager-lvm-">Understanding the Components of the Logical Volume Manager (LVM)</a></li>
                <li><a href="#creating-and-managing-lvm-volumes">Creating and Managing LVM Volumes</a></li>
                <li><a href="#extending-a-logical-volume">Extending a Logical Volume</a></li>
                <li><a href="#reducing-a-logical-volume">Reducing a Logical Volume</a></li>
                <li><a href="#deleting-a-logical-volume">Deleting a Logical Volume</a></li>
                <li><a href="#backup-and-recovery-of-lvm-configurations">Backup and Recovery of LVM Configurations</a></li>
            </ol>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/addjellouli/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../app.js"></script>
    </footer>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>