<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <title>Disk Usage Management</title>
    <meta charset="utf-8" />
    <meta content="The ability to manage and monitor disk usage is crucial when maintaining Linux systems." name="description" />
    <meta content="Adam Djellouli" name="keywords" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="ie-edge" http-equiv="X-UA-Compatible" />
</head>

<body>
    <nav aria-label="Main navigation">
        <a class="logo" href="https://adamdjellouli.com">
            <img alt="Adam Djellouli - Home Page Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul role="menu">
            <li role="menuitem"> <a href="../../index.html" title="Go to Home Page"> Home </a> </li>
            <li role="menuitem"> <a class="active" href="../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a> </li>
            <li role="menuitem"> <a href="../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a> </li>
            <li role="menuitem"> <a href="../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a> </li>
            <li role="menuitem"> <a href="../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a> </li>
            <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
        </ul>
    </nav>
    <section id="article-body"></section>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="disk-usage-management">Disk Usage Management</h2>
            <p>The ability to manage and monitor disk usage is crucial when maintaining Linux systems. Disk usage is often checked when diagnosing system issues, planning for future storage requirements, or cleaning up unused files and directories.</p>
            <h2 id="understanding-the-df-command">Understanding the df command</h2>
            <p>The <code>df</code> (disk filesystem) command provides insights into the filesystems of your machine. It details the total size, space used, space available, and percentage of space used. To display these statistics in a human-readable format, using standard units like KB, MB, GB, use the <code>-h</code> (human-readable) option.</p>
            <p>For instance, executing <code>df -h</code> would yield an output similar to the following:</p>
            <p>
            <table>
                <tr>
                    <td>Filesystem</td>
                    <td>Size</td>
                    <td>Used</td>
                    <td>Available</td>
                    <td>Use%</td>
                    <td>Mounted on</td>
                </tr>
                <tr>
                    <td>/dev/sda1</td>
                    <td>2.00T</td>
                    <td>1.00T</td>
                    <td>1.00T</td>
                    <td>50%</td>
                    <td>/</td>
                </tr>
                <tr>
                    <td>/dev/sda2</td>
                    <td>2.00T</td>
                    <td>1.00T</td>
                    <td>1.00T</td>
                    <td>50%</td>
                    <td>/boot</td>
                </tr>
            </table>
            </p>
            <p>This output details the following:</p>
            <ul>
                <li><code>Filesystem</code>: This column lists the name of each filesystem.</li>
                <li><code>Size</code>: This depicts the total size of each filesystem.</li>
                <li><code>Used</code>: This indicates the space used within each filesystem.</li>
                <li><code>Available</code>: This shows the remaining space within each filesystem.</li>
                <li><code>Use%</code>: This highlights the percentage of total space used in each filesystem.</li>
                <li><code>Mounted on</code>: This tells you the mount point of each filesystem, which is where the filesystem is accessible in the system's directory structure.</li>
            </ul>
            <h2 id="diving-into-the-du-command">Diving into the du command</h2>
            <p>The <code>du</code> (disk usage) command is used to estimate the space used by given files or directories. The <code>-h</code> option can be used for human-readable output, while the <code>-s</code> option can be used to provide a summarized result for directories. For instance, executing <code>du -sh .</code> will display the total size of the current directory in a human-readable format.</p>
            <p>If you want to identify the top 10 largest directories starting from the root directory (<code>/</code>), you could use the following command:</p>
            <p>
            <div>
                <pre><code class="language-bash">du -x / | sort -nr | head -10</code></pre>
            </div>
            </p>
            <p>Here's an example of what the output might look like:</p>
            <p>
            <div>
                <pre><code class="language-shell">10485760    /usr
5120000     /var
2097152     /lib
1024000     /opt
524288      /boot
256000      /home
128000      /bin
64000       /sbin
32000       /etc
16000       /tmp</code></pre>
            </div>
            </p>
            <p>In this command, <code>du -x /</code> estimates the size of each directory in the root filesystem. <code>sort -nr</code> sorts these estimates in numerical order and reverses the output to display the largest sizes first. Finally, <code>head -10</code> truncates the output to only the top 10 lines, thereby showing the 10 largest directories.</p>
            <h2 id="the-ncdu-command">The ncdu Command</h2>
            <p>For a more visual representation of disk usage, you might consider using <code>ncdu</code> (NCurses Disk Usage). <code>ncdu</code> is a ncurses-based tool that provides a fast and easy-to-use interface to find out what directories are using your disk space. If it's not pre-installed, you can easily install it using your package manager, such as <code>apt</code> or <code>yum</code>. </p>
            <p>The command <code>ncdu -x /</code> will start at the root directory (<code>/</code>) and present an interactive interface where you can browse directories and see their sizes.</p>
            <p>An example output might look like this in a non-interactive, textual representation:</p>
            <p>
            <div>
                <pre><code class="language-shell">ncdu 1.15 ~ Use the arrow keys to navigate, press ? for help
--- / -----------------------------------------------------------------------
    4.6 GiB [##########] /usr
    2.1 GiB [####      ] /var
  600.0 MiB [#         ] /lib
  500.0 MiB [#         ] /opt
  400.0 MiB [          ] /boot
  300.0 MiB [          ] /sbin
  200.0 MiB [          ] /bin
  100.0 MiB [          ] /etc
   50.0 MiB [          ] /tmp
   20.0 MiB [          ] /home
   10.0 MiB [          ] /root
    5.0 MiB [          ] /run
    1.0 MiB [          ] /srv
    0.5 MiB [          ] /dev
    0.1 MiB [          ] /mnt
    0.0 MiB [          ] /proc
    0.0 MiB [          ] /sys
 Total disk usage: 8.8 GiB  Apparent size: 8.8 GiB  Items: 123456</code></pre>
            </div>
            </p>
            <h2 id="cleaning-up-disk-space">Cleaning Up Disk Space</h2>
            <p>Once you've identified what's using your disk space, the next step is often to free up space. Here are a few strategies:</p>
            <ol>
                <li>
                    <p><strong>Remove Unnecessary Packages and Dependencies</strong>: Over time, your system may accumulate packages that are no longer needed. These can be safely removed to free up space. On a Debian-based system like Ubuntu, you can use <code>apt-get autoremove</code> to remove unnecessary packages.</p>
                </li>
                <li>
                    <p><strong>Clear Package Manager Cache</strong>: Most package managers store package files in a cache that can take up a lot of space. For example, to clear the cache in a system using <code>apt</code>, use the command <code>apt-get clean</code>.</p>
                </li>
                <li>
                    <p><strong>Find and Remove Large Files</strong>: You can use the <code>find</code> command to locate files over a certain size and then decide if they need to be kept. For example, <code>find / -type f -size +100M</code> will find files larger than 100 MB.</p>
                </li>
                <li>
                    <p><strong>Use a Disk Cleanup Utility</strong>: Tools like <code>bleachbit</code> can be used to clean up various types of unnecessary files, like cache, cookies, internet history, temporary files, log files, and so on.</p>
                </li>
                <li>
                    <p><strong>Archive and Compress Less Used Data</strong>: If there are directories or files not accessed frequently, consider compressing them to save space. Tools like <code>tar</code>, <code>gzip</code>, <code>bzip2</code> can be used for this.</p>
                </li>
            </ol>
            <h2 id="automating-disk-usage-checks">Automating Disk Usage Checks</h2>
            <p>For ongoing disk usage monitoring, consider setting up automated tasks. For instance, you can schedule a cron job that runs <code>df</code> and <code>du</code> at regular intervals and sends reports via email or logs them for later review.</p>
            <p>Monitoring disk usage proactively can prevent potential issues related to low disk space, such as application errors, slow performance, or system crashes.</p>
            <h3 id="bash-script-example-for-disk-usage-monitoring">Bash Script Example for Disk Usage Monitoring</h3>
            <p>
            <div>
                <pre><code class="language-bash">#!/bin/bash

# Script to monitor disk usage and report

# Set the path for the log file
LOG_FILE="/var/log/disk_usage_report.log"

# Get disk usage with df
echo "Disk Usage Report - $(date)" &gt;&gt; "$LOG_FILE"
echo "---------------------------------" &gt;&gt; "$LOG_FILE"
df -h &gt;&gt; "$LOG_FILE"

# Get top 10 directories consuming space
echo "" &gt;&gt; "$LOG_FILE"
echo "Top 10 Directories by Size:" &gt;&gt; "$LOG_FILE"
du -x / | sort -nr | head -10 &gt;&gt; "$LOG_FILE"

# Optionally, you can send this log via email instead of writing to a file
# For email, you can use: mail -s "Disk Usage Report" recipient@example.com &lt; "$LOG_FILE"

# End of script</code></pre>
            </div>
            </p>
            <ul>
                <li>Save it as <code>disk_usage_monitor.sh</code>.</li>
                <li>If you prefer to move the script to a standard location for cron jobs and set it up with a single command, you can use a system directory like <code>/etc/cron.daily</code>. This directory is used for scripts that should be run daily by the system's cron daemon. Here's how you can do it:</li>
            </ul>
            <p>
            <div>
                <pre><code class="language-bash">sudo chmod +x /path/to/disk_usage_monitor.sh &amp;&amp; sudo mv /path/to/disk_usage_monitor.sh /etc/cron.daily/</code></pre>
            </div>
            </p>
            <h2 id="challenges">Challenges</h2>
            <ol>
                <li>Display the free space available on the root filesystem (<code>/</code>).</li>
                <li>For each mounted filesystem, show the percentage of space used.</li>
                <li>Provide information about all filesystems, including those that are not currently mounted.</li>
                <li>Determine the size of the directory you're currently in.</li>
                <li>Check and report the size of the <code>/home</code> directory.</li>
                <li>Identify the 10 largest directories in the system.</li>
                <li>Track and report the amount of data being written to the disk in real-time.</li>
                <li>Locate individual files that are taking up the most space on the disk.</li>
                <li>Take snapshots of disk usage at different times and compare them to identify growth trends.</li>
                <li>Break down disk usage statistics by the types of files (e.g., <code>.txt</code>, <code>.jpg</code>, <code>.log</code>).</li>
            </ol>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#disk-usage-management">Disk Usage Management</a></li>
                <li><a href="#understanding-the-df-command">Understanding the df command</a></li>
                <li><a href="#diving-into-the-du-command">Diving into the du command</a></li>
                <li><a href="#the-ncdu-command">The ncdu Command</a></li>
                <li><a href="#cleaning-up-disk-space">Cleaning Up Disk Space</a></li>
                <li><a href="#automating-disk-usage-checks">Automating Disk Usage Checks</a>
                    <ol>
                        <li><a href="#bash-script-example-for-disk-usage-monitoring">Bash Script Example for Disk Usage Monitoring</a></li>
                    </ol>
                </li>
                <li><a href="#challenges">Challenges</a></li>
            </ol>
            <div id="related-articles">
                <h2>Related Articles</h2>
                <ol>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/commands.html">Commands</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/cron_jobs.html">Cron Jobs</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/disk_usage.html">Disk Usage</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/dwm.html">Dwm</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/encryption.html">Encryption</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/enviroment_modules.html">Enviroment Modules</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/enviroment_variable.html">Enviroment Variable</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/file_system.html">File System</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/files_and_dirs.html">Files and Dirs</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/finding_files.html">Finding Files</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/firewall.html">Firewall</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/grep.html">Grep</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/hardware.html">Hardware</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/inodes_and_symlinks.html">Inodes and Symlinks</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/introduction.html">Introduction</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/kernel.html">Kernel</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/ldap.html">Ldap</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/log_files_and_journals.html">Log Files and Journals</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/logical_volume_management.html">Logical Volume Management</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/managing_users.html">Managing Users</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/mounting.html">Mounting</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/networking.html">Networking</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/nfs.html">Nfs</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/package_managers.html">Package Managers</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/partitions.html">Partitions</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/performance_monitoring.html">Performance Monitoring</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/permissions.html">Permissions</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/pipe_and_redirect.html">Pipe and Redirect</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/ports.html">Ports</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/processes.html">Processes</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/sed_and_awk.html">Sed and Awk</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/selinux.html">Selinux</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/services.html">Services</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/shells_and_bash_configuration.html">Shells and Bash Configuration</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/ssh_and_scp.html">Ssh and Scp</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/system_startup.html">System Startup</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/tar_and_gzip.html">Tar and Gzip</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/utilities.html">Utilities</a></li>
                    <li><a href="https://adamdjellouli.com/articles/linux_notes/virtual_machines.html">Virtual Machines</a></li>
                </ol>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/linuxchallenges/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>