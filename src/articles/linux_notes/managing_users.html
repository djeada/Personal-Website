<!DOCTYPE html>

<html lang="en">

<head>
    <script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5593122079896089"></script>
    <title>Users</title>
    <meta charset="utf-8" />
    <meta content="Users can use a system and do tasks." name="description" />
    <meta content="Adam Djellouli" name="keywords" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/icon.ico" rel="icon" />
    <link href="../../resources/style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="ie-edge" http-equiv="X-UA-Compatible" />
</head>

<body>
    <nav>
        <a class="logo" href="../index.html" title="Adam Djellouli - Home">
            <img alt="Adam Djellouli Logo" id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" />
        </a>
        <input aria-label="Toggle navigation menu" id="navbar-toggle" type="checkbox" />
        <ul>
            <li> <a href="../../index.html" title="Home"> Home </a> </li>
            <li> <a class="active" href="../../core/blog.html" title="Adam Djellouli's Blog - Programming, technology and more"> Blog </a> </li>
            <li> <a href="../../core/tools.html" title="Useful Tools by Adam Djellouli"> Tools </a> </li>
            <li> <a href="../../core/projects.html" title="Projects by Adam Djellouli"> Projects </a> </li>
            <li> <a href="../../core/resume.html" title="Adam Djellouli's Resume"> Resume </a> </li>
            <li> <a href="../../core/about.html" title="About Adam Djellouli"> About </a> </li>
            <button aria-label="Toggle dark mode" id="dark-mode-button"></button>
        </ul>
    </nav>
    <section id="article-body"></section>
    <div id="article-wrapper">
        <section id="article-body">
            <p style="text-align: right;"><i>This article is written in: ðŸ‡ºðŸ‡¸</i></p>
            <h2 id="users">Users</h2>
            <p>Users can use a system and do tasks. In Linux, user info is in two main files: <code>/etc/passwd</code> and <code>/etc/shadow</code>.</p>
            <ul>
                <li>
                    <p><code>/etc/passwd</code> has basic info about each user, like username, user ID (UID), group ID (GID), home folder, and default shell. It's a public file with the password in a hard-to-reverse format.</p>
                </li>
                <li>
                    <p><code>/etc/shadow</code> has sensitive info about users, like encrypted password, password expiration, and password history. Only the root user can access this file.</p>
                </li>
            </ul>
            <p>To see the user info in these files, use the less command:</p>
            <p>
            <div>
                <pre><code class="language-shell">less /etc/passwd
less /etc/shadow</code></pre>
            </div>
            </p>
            <p>To show all users on the system, use this command:</p>
            <p>
            <div>
                <pre><code class="language-shell">awk -F: '{ print $1}' /etc/passwd | uniq</code></pre>
            </div>
            </p>
            <h2 id="superuser">Superuser</h2>
            <p>The superuser, or root user, is a special user with full access to all commands and files on the system, no matter their permissions. The root user is usually for system administration tasks and should be used carefully. The root user's login is usually root, and a password is needed to access the account.</p>
            <p>Choose a strong password for the root user, keep it secret, and avoid using dangerous commands like <code>rm -rf /*</code>, which can delete all files in the root folder.</p>
            <h3 id="granting-sudo-privileges">Granting sudo privileges</h3>
            <p>To let a user do commands with superuser privileges, use the <code>usermod</code> command. To add the user to the sudo group on Debian-based systems, use this command (user name is adam in the example):</p>
            <p>
            <div>
                <pre><code class="language-shell">usermod -aG sudo adam</code></pre>
            </div>
            </p>
            <p>On RedHat-based systems, the similar group is called <code>wheel</code>:</p>
            <p>
            <div>
                <pre><code class="language-shell">usermod -aG wheel adam</code></pre>
            </div>
            </p>
            <p>After adding the user to the right group, also change the <code>/etc/sudoers</code> file to let the group use sudo. Use the <code>visudo</code> command to edit the file and uncomment this line:</p>
            <p>
            <div>
                <pre><code class="language-shell">%wheel ALL=(ALL) ALL</code></pre>
            </div>
            </p>
            <h3 id="partially-granted-sudo-privileges">Partially granted sudo privileges</h3>
            <p>You can also let a user use sudo only for certain commands or tools. Edit the <code>/etc/sudoers</code> file with the visudo command and add a line giving the user the right privileges. For example, to let the user adam do the reboot command without a password prompt, add this line to the file:</p>
            <p>
            <div>
                <pre><code class="language-shell">adam ALL = NOPASSWD:/sbin/reboot</code></pre>
            </div>
            </p>
            <p>Use the <code>visudo</code> command to edit the <code>/etc/sudoers</code> file, as it checks for mistakes and stops you from saving if there are any. A bad <code>/etc/sudoers</code> file can stop you from ever using your system again.</p>
            <h2 id="switching-between-users">Switching between users</h2>
            <p>To switch to another user account, use the su command. Without any arguments, <code>su</code> will start the root user's subshell. To access another user's account, give the username as an argument:</p>
            <p>
            <div>
                <pre><code class="language-shell">su adam</code></pre>
            </div>
            </p>
            <p>The <code>-c</code> option lets you run a command as another user and show the output in your terminal:</p>
            <p>
            <div>
                <pre><code class="language-shell">su adam -c whoami</code></pre>
            </div>
            </p>
            <h2 id="adding-users">Adding users</h2>
            <p>To add a new user to the system, use the useradd command. This command makes a new home folder for the user and adds the user's info to the <code>/etc/passwd</code> file.</p>
            <p>
            <div>
                <pre><code class="language-shell">useradd -m adam</code></pre>
            </div>
            </p>
            <p>The <code>-m</code> flag makes the home folder, and the <code>-u</code> flag lets you choose a UID (it must be unique). The <code>-G</code> flag lets you add the user to one or more groups.</p>
            <p>You can also use the <code>adduser</code> command, which is easier to use and asks you for more info, like the password. But <code>adduser</code> might not be on all systems, so it's better to use <code>useradd</code> if you're that needs to work on different systems.</p>
            <p>
            <div>
                <pre><code class="language-shell">adduser adam</code></pre>
            </div>
            </p>
            <h2 id="changing-the-password">Changing the password</h2>
            <p>To change a user's password, use the passwd command. When you run the command, you'll be asked to enter the new password.</p>
            <p>
            <div>
                <pre><code class="language-shell">passwd adam</code></pre>
            </div>
            </p>
            <p>You can also use the passwd command to set the password for a new user when you create their account using the useradd or adduser command. To do this, use the <code>-p</code> flag followed by the encrypted password.</p>
            <p>
            <div>
                <pre><code class="language-shell">useradd -m -p encrypted_password adam</code></pre>
            </div>
            </p>
            <p>Choose strong and safe passwords to protect your system and user accounts.</p>
            <h2 id="group-management">Group management</h2>
            <p>Groups are sets of users with certain permissions or privileges on the system. Groups help manage access to resources and make it easier to give or take away privileges for multiple users at once.</p>
            <p>To see the groups on the system, use the cat command to show the contents of the <code>/etc/group</code> file:</p>
            <p>
            <div>
                <pre><code class="language-shell">cat /etc/group</code></pre>
            </div>
            </p>
            <p>To add a new group, use the <code>groupadd</code> command:</p>
            <p>
            <div>
                <pre><code class="language-shell">groupadd admins</code></pre>
            </div>
            </p>
            <p>To add a user to a group, use the <code>usermod</code> command with the <code>-aG</code> flag, followed by the group name:</p>
            <p>
            <div>
                <pre><code class="language-shell">usermod -aG admins adam</code></pre>
            </div>
            </p>
            <p>To remove a user from a group, use the <code>gpasswd</code> command with the <code>-d</code> flag, followed by the username:</p>
            <p>
            <div>
                <pre><code class="language-shell">gpasswd -d adam admins</code></pre>
            </div>
            </p>
            <h3 id="changing-the-user-and-group-ownership-of-a-file">Changing the user and group ownership of a file</h3>
            <p>To change the owner of a file or folder, use the <code>chown</code> command, followed by the username and the file or folder name:</p>
            <p>
            <div>
                <pre><code class="language-shell">chown adam file.txt</code></pre>
            </div>
            </p>
            <p>To change the group ownership of a file or folder, use the <code>chgrp</code> command, followed by the group name and the file or folder name</p>
            <p>
            <div>
                <pre><code class="language-shell">chgrp admins file.txt</code></pre>
            </div>
            </p>
            <p>You can also use the <code>chown</code> command to change both the owner and group ownership of a file or folder at the same time by specifying both the username and group name separated by a colon:</p>
            <p>
            <div>
                <pre><code class="language-shell">chown adam:admins file.txt</code></pre>
            </div>
            </p>
            <h2 id="user-id-and-group-id">User ID and Group ID</h2>
            <p>In a Unix system, every user and group has a unique ID called a user ID (UID) or group ID (GID). These IDs are used to tell users and groups apart on the system.</p>
            <p>The <code>/etc/passwd</code> file has the UIDs for each user, while the /etc/group file has the GIDs for each group. When a user makes a file or folder, the system sets the ownership of the file to the user's UID and the user's main group's GID.</p>
            <p>The UID and GID can be used to set permissions on files and folders, allowing or blocking access to certain users or groups. For example, you can use the chown command to change the ownership of a file to a specific UID and GID, and the chmod command to set permissions for the owner, group, and other users based on their UIDs and GIDs.</p>
            <p>Manage UIDs and GIDs carefully to keep your system safe and working well. The root user, which has the UID 0 and the GID 0, has special privileges and can do things other users can't.</p>
            <p>To check a user's UID, use the <code>id</code> command followed by the username:</p>
            <p>
            <div>
                <pre><code class="language-shell">id adam</code></pre>
            </div>
            </p>
            <p>This will show output like this:</p>
            <p>
            <div>
                <pre><code class="language-shell">uid=1000(adam) gid=1000(adam) groups=1000(adam),4(adm),24(cdrom),27(sudo),46(plugdev),113(lpadmin),128(sambashare)</code></pre>
            </div>
            </p>
            <p>The uid field shows the user field shows the user's UID, and the gid field shows the user's main group's GID. The groups field lists the GIDs of the user belongs to.</p>
            <p>To check a group's GID, use the <code>getent</code> command followed by the group name:</p>
            <p>
            <div>
                <pre><code class="language-shell">getent group admins</code></pre>
            </div>
            </p>
            <p>This will show output like this:</p>
            <p>
            <div>
                <pre><code class="language-shell">admins:x:1001:adam</code></pre>
            </div>
            </p>
            <p>The second field, x, means the group's password is stored in the <code>/etc/shadow</code> file. The third field shows the group's GID, and the fourth field lists the names of all users in the group.</p>
            <p>To change a user's UID, use the usermod command with the <code>-u</code> flag followed by the new UID and the username:</p>
            <p>
            <div>
                <pre><code class="language-shell">usermod -u 1001 adam</code></pre>
            </div>
            </p>
            <p>To change a group's GID, use the groupmod command with the <code>-g</code> flag followed by the new GID and the group name:</p>
            <p>
            <div>
                <pre><code class="language-shell">groupmod -g 1001 admins</code></pre>
            </div>
            </p>
            <h2 id="challenges">Challenges</h2>
            <ol>
                <li>Show your username and unique user ID (UID).</li>
                <li>Explain the purpose of the root user.</li>
                <li>Give instructions for logging in as root using the terminal.</li>
                <li>View the <code>/etc/shadow</code> file with the right privileges. Can you find a reference to your user in this file?</li>
                <li>Check the <code>/var/log/auth.log</code> file to see which users are currently logged in. Use grep to find if anyone has used sudo.</li>
                <li>Make a list of logged-in users, sorted alphabetically, including the command they are currently running.</li>
                <li>Create a group called "friends" and include your user in it. Then, create two more users and add them to the group too. Check that the new accounts are set up right. Create a folder with read and write permissions for all members of the friends group. Create a few text files in this folder and test if they can be accessed and changed by all group members. Finally, delete the extra users you created.</li>
                <li>Allow a user without sudo privileges to run the reboot command. Log in to that user account and check that the system can be restarted.</li>
                <li>Describe the difference between locking and disabling a user account's password. Explain what happens when you use the commands <code>usermod -L</code> and <code>passwd -d</code>.</li>
            </ol>
        </section>
        <div id="table-of-contents">
            <h2>Table of Contents</h2>
            <ol>
                <li><a href="#users">Users</a></li>
                <li><a href="#superuser">Superuser</a>
                    <ol>
                        <li><a href="#granting-sudo-privileges">Granting sudo privileges</a></li>
                        <li><a href="#partially-granted-sudo-privileges">Partially granted sudo privileges</a></li>
                    </ol>
                </li>
                <li><a href="#switching-between-users">Switching between users</a></li>
                <li><a href="#adding-users">Adding users</a></li>
                <li><a href="#changing-the-password">Changing the password</a></li>
                <li><a href="#group-management">Group management</a>
                    <ol>
                        <li><a href="#changing-the-user-and-group-ownership-of-a-file">Changing the user and group ownership of a file</a></li>
                    </ol>
                </li>
                <li><a href="#user-id-and-group-id">User ID and Group ID</a></li>
                <li><a href="#challenges">Challenges</a></li>
            </ol>
        </div>
    </div>
    <div id="article-wrapper">
        <section id="article-body"></section>
        <div id="related-articles">
            <h2>Related Articles</h2>
            <ol>
                <li><a href="./managing_users.html">Managing Users</a></li>
                <li><a href="./pipe_and_redirect.html">Pipe And Redirect</a></li>
                <li><a href="./shells_and_bash_configuration.html">Shells And Bash Configuration</a></li>
                <li><a href="./nfs.html">Nfs</a></li>
                <li><a href="./grep.html">Grep</a></li>
                <li><a href="./ports.html">Ports</a></li>
                <li><a href="./firewall.html">Firewall</a></li>
                <li><a href="./log_files_and_journals.html">Log Files And Journals</a></li>
                <li><a href="./hardware.html">Hardware</a></li>
                <li><a href="./partitions.html">Partitions</a></li>
                <li><a href="./cron_jobs.html">Cron Jobs</a></li>
                <li><a href="./file_system.html">File System</a></li>
                <li><a href="./logical_volume_management.html">Logical Volume Management</a></li>
                <li><a href="./package_managers.html">Package Managers</a></li>
                <li><a href="./sed_and_awk.html">Sed And Awk</a></li>
                <li><a href="./introduction.html">Introduction</a></li>
                <li><a href="./services.html">Services</a></li>
                <li><a href="./virtual_machines.html">Virtual Machines</a></li>
                <li><a href="./processes.html">Processes</a></li>
                <li><a href="./files_and_dirs.html">Files And Dirs</a></li>
                <li><a href="./finding_files.html">Finding Files</a></li>
                <li><a href="./ssh_and_scp.html">Ssh And Scp</a></li>
                <li><a href="./enviroment_modules.html">Enviroment Modules</a></li>
                <li><a href="./kernel.html">Kernel</a></li>
                <li><a href="./utilities.html">Utilities</a></li>
                <li><a href="./tar_and_gzip.html">Tar And Gzip</a></li>
                <li><a href="./enviroment_variable.html">Enviroment Variable</a></li>
                <li><a href="./performance_monitoring.html">Performance Monitoring</a></li>
                <li><a href="./commands.html">Commands</a></li>
                <li><a href="./permissions.html">Permissions</a></li>
                <li><a href="./disk_usage.html">Disk Usage</a></li>
                <li><a href="./mounting.html">Mounting</a></li>
                <li><a href="./ldap.html">Ldap</a></li>
                <li><a href="./encryption.html">Encryption</a></li>
                <li><a href="./selinux.html">Selinux</a></li>
                <li><a href="./dwm.html">Dwm</a></li>
                <li><a href="./inodes_and_symlinks.html">Inodes And Symlinks</a></li>
                <li><a href="./networking.html">Networking</a></li>
                <li><a href="./system_startup.html">System Startup</a></li>
            </ol>
        </div>
    </div>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img alt="Adam Djellouli Symbol" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" />
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>
                    Thank you for visiting my personal website. All of the <br />
                    content on this site is free to use, but please remember <br />
                    to be a good human being and refrain from any abuse<br />
                    of the site. If you would like to contact me, please use <br />
                    my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or my <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have any technical <br />
                    issues or ideas to share. I wish you the best and hope you <br />
                    have a fantastic life. <br />
                </p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a class="fa fa-youtube" href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a class="fa fa-linkedin" href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a class="fa fa-instagram" href="https://www.instagram.com/addjellouli/" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a class="fa fa-github" href="https://github.com/djeada" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                Â© Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../app.js"></script>
    </footer>
</body>

</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-cpp.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
jax: ["input/TeX", "output/HTML-CSS"],
extensions: ["tex2jax.js"],
"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
tex2jax: { inlineMath: [ ["$", "$"] ], displayMath: [ ["$$","$$"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
messageStyle: "none"
});
</script>
<script async="" id="MathJax-script" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>