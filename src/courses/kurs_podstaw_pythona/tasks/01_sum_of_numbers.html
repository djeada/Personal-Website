<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Suma liczb | Kurs Podstaw Pythona</title>
    <style>
        /* CSS Variables for Light Mode (default) */
        .sandbox {
            --bg: #f5f7fa;
            --bg-elevated: #ffffff;
            --panel: #ffffff;
            --panel-hover: #f0f3f7;
            --ink: #2d3748;
            --ink-bright: #1a202c;
            --muted: #718096;
            --muted-dark: #4a5568;
            --accent: #3182ce;
            --accent-hover: #2c5aa0;
            --accent-dark: #2a4365;
            --pass: #38a169;
            --fail: #e53e3e;
            --warning: #dd6b20;
            --border: #e2e8f0;
            --border-light: #cbd5e0;
            --code-bg: #f7fafc;
            --code-border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* CSS Variables for Dark Mode */
        .dark-mode .sandbox {
            --bg: #0f172a;
            --bg-elevated: #1a2332;
            --panel: #1e293b;
            --panel-hover: #334155;
            --ink: #e5e7eb;
            --ink-bright: #f9fafb;
            --muted: #94a3b8;
            --muted-dark: #64748b;
            --accent: #22d3ee;
            --accent-hover: #06b6d4;
            --accent-dark: #0891b2;
            --pass: #10b981;
            --fail: #ef4444;
            --warning: #f59e0b;
            --border: #334155;
            --border-light: #475569;
            --code-bg: #0b1022;
            --code-border: #1e293b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }

        /* Base sandbox styling */
        .sandbox {
            background: var(--bg);
            color: var(--ink);
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size: 14px;
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .sandbox .wrap {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px 20px 40px;
        }

        /* Header section */
        .sandbox h1 {
            font-size: clamp(24px, 5vw, 32px);
            margin: 0 0 12px;
            font-weight: 700;
            color: var(--ink-bright);
            letter-spacing: -0.02em;
        }

        .sandbox .intro-text {
            color: var(--muted);
            font-size: 15px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Task metadata section */
        .task-meta {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .task-meta .difficulty-badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            background: rgba(34, 211, 238, 0.1);
            border: 1px solid rgba(34, 211, 238, 0.3);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--accent);
            gap: 6px;
        }

        .task-meta a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            padding: 6px 12px;
            border-radius: 6px;
        }

        .task-meta a:hover {
            color: var(--accent-hover);
            background: rgba(34, 211, 238, 0.1);
        }

        /* Problem description panel */
        .task-description {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .task-section h2 {
            font-size: 20px;
            margin: 16px 0 10px;
            font-weight: 600;
            color: var(--ink-bright);
        }

        .task-section h2:first-child {
            margin-top: 0;
        }

        .task-section h3 {
            font-size: 16px;
            margin: 14px 0 8px;
            font-weight: 600;
            color: var(--accent);
        }

        .task-section p {
            color: var(--ink);
            margin: 8px 0;
            line-height: 1.6;
        }

        .task-section pre {
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px;
            margin: 10px 0;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
            color: var(--ink);
        }

        /* Responsive grid layout */
        .sandbox .row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            align-items: start;
        }

        /* Desktop: side-by-side layout */
        @media (min-width: 1024px) {
            .sandbox .row {
                grid-template-columns: 1fr 480px;
                gap: 24px;
            }
        }

        /* Tablet: optimized layout */
        @media (min-width: 768px) and (max-width: 1023px) {
            .sandbox .row {
                grid-template-columns: 1fr;
            }

            .sandbox .wrap {
                padding: 20px 16px 32px;
            }
        }

        /* Mobile: stacked layout */
        @media (max-width: 767px) {
            .sandbox .wrap {
                padding: 16px 12px 24px;
            }

            .sandbox h1 {
                font-size: 24px;
            }

            .task-description {
                padding: 16px;
            }
        }

        /* Code editor section */
        .editor-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .editor-label {
            color: var(--muted);
            font-size: 13px;
            font-weight: 500;
        }

        .editor-label code {
            background: rgba(34, 211, 238, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            color: var(--accent);
        }

        .sandbox textarea {
            width: 100%;
            min-height: 400px;
            height: auto;
            background: var(--code-bg);
            color: var(--ink);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .dark-mode .sandbox textarea {
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .sandbox textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.1), inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 767px) {
            .sandbox textarea {
                min-height: 300px;
                font-size: 13px;
                padding: 12px;
            }
        }

        /* Control buttons */
        .sandbox .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
            margin-top: 12px;
        }

        .sandbox button {
            border: none;
            border-radius: 10px;
            padding: 12px 18px;
            cursor: pointer;
            background: var(--panel-hover);
            color: var(--ink);
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .sandbox button:hover {
            background: var(--border-light);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .sandbox button:active {
            transform: translateY(0);
        }

        .sandbox button.primary {
            background: var(--accent);
            color: #ffffff;
            font-weight: 600;
        }

        .dark-mode .sandbox button.primary {
            color: #00141a;
        }

        .sandbox button.primary:hover {
            background: var(--accent-hover);
        }

        .sandbox button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        @media (max-width: 767px) {
            .sandbox button {
                padding: 10px 14px;
                font-size: 13px;
                flex: 1 1 auto;
                min-width: 120px;
            }

            .sandbox .controls {
                gap: 8px;
            }
        }

        /* Status indicator */
        .status-indicator {
            margin-left: auto;
            color: var(--muted);
            font-size: 13px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        @media (max-width: 767px) {
            .status-indicator {
                margin-left: 0;
                width: 100%;
            }
        }

        /* Panel styling */
        .sandbox .panel {
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            box-shadow: var(--shadow);
            transition: box-shadow 0.2s ease;
        }

        .sandbox .panel:hover {
            box-shadow: var(--shadow-lg);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .panel-header strong {
            font-size: 15px;
            font-weight: 600;
            color: var(--ink-bright);
        }

        /* Test cases */
        .sandbox .tests {
            display: grid;
            gap: 10px;
        }

        .sandbox .test {
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 12px;
            transition: border-color 0.2s ease, background-color 0.3s ease;
        }

        .sandbox .test:hover {
            border-color: var(--border-light);
        }

        .test-header {
            display: flex;
            gap: 8px;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .test-header strong {
            font-size: 14px;
            color: var(--ink-bright);
        }

        .test-header button {
            padding: 6px 10px;
            font-size: 12px;
        }

        .test-label {
            color: var(--muted);
            font-size: 12px;
            font-weight: 500;
            margin-top: 8px;
            margin-bottom: 4px;
        }

        .sandbox .test pre {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 8px;
            margin: 0;
            font-size: 12px;
            line-height: 1.5;
            color: var(--ink);
        }

        .sandbox .test pre[contenteditable] {
            cursor: text;
            transition: border-color 0.2s ease;
        }

        .sandbox .test pre[contenteditable]:hover {
            border-color: var(--border-light);
        }

        .sandbox .test pre[contenteditable]:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.1);
        }

        /* Badges */
        .sandbox .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .sandbox .pass {
            background: rgba(16, 185, 129, 0.15);
            color: var(--pass);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .sandbox .fail {
            background: rgba(239, 68, 68, 0.15);
            color: var(--fail);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        /* Muted text */
        .sandbox .muted {
            color: var(--muted);
            font-size: 13px;
            line-height: 1.5;
        }

        /* Pre elements */
        .sandbox pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            margin: 8px 0;
            overflow-x: auto;
        }

        /* Results log */
        .sandbox .log {
            min-height: 300px;
            max-height: 500px;
            overflow: auto;
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 13px;
            line-height: 1.6;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
            color: var(--ink);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .dark-mode .sandbox .log {
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .sandbox .log:empty::before {
            content: "Run tests to see results here...";
            color: var(--muted-dark);
            font-style: italic;
        }

        @media (max-width: 767px) {
            .sandbox .log {
                min-height: 200px;
                font-size: 12px;
            }
        }

        /* Links */
        .sandbox a {
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .sandbox a:hover {
            color: var(--accent-hover);
            text-decoration: underline;
        }

        /* Spacing utilities */
        .spacer-sm {
            height: 12px;
        }

        .spacer-md {
            height: 16px;
        }

        /* Scrollbar styling */
        .sandbox .log::-webkit-scrollbar,
        .sandbox textarea::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        .sandbox .log::-webkit-scrollbar-track,
        .sandbox textarea::-webkit-scrollbar-track {
            background: var(--bg);
            border-radius: 10px;
        }

        .sandbox .log::-webkit-scrollbar-thumb,
        .sandbox textarea::-webkit-scrollbar-thumb {
            background: var(--border-light);
            border-radius: 10px;
        }

        .sandbox .log::-webkit-scrollbar-thumb:hover,
        .sandbox textarea::-webkit-scrollbar-thumb:hover {
            background: var(--muted-dark);
        }

        /* Animation for results */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .sandbox .log > div {
            animation: fadeInUp 0.3s ease;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="../../../resources/style.css">
    <style>
        /* Page-level overrides */
        body.task-page {
            min-height: 100vh;
            height: auto;
            display: block;
            background-color: #f5f7fa;
            transition: background-color 0.3s ease;
        }

        body.task-page.dark-mode {
            background-color: #0D1117;
        }

        body.task-page .sandbox {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0;
        }
    </style>
</head>

<body class="task-page">
    <nav aria-label="Main navigation">
        <a class="logo" href="../../../index.html">
            <img id="logo-image" src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/logo.PNG" alt="Adam Djellouli - Home Page Logo">
        </a>
        <input id="navbar-toggle" type="checkbox" aria-label="Toggle navigation menu" />
        <ul role="menu" aria-labelledby="navbar-toggle">
            <li role="menuitem">
                <a href="../../../index.html" title="Go to Home Page"> Home </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/blog.html" title="Read Adam Djellouli Blog on Programming and Technology"> Blog </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/tools.html" title="Discover Tools Created by Adam Djellouli"> Tools </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/projects.html" title="Explore Projects Developed by Adam Djellouli"> Projects </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/courses.html" title="Browse Courses by Adam Djellouli"> Courses </a>
            </li>
            <li role="menuitem">
                <a href="../../../core/resume.html" title="View Adam Djellouli Professional Resume"> Resume </a>
            </li>
            <li>
                <script async src="https://cse.google.com/cse.js?cx=8160ef9bb935f4f68"></script>
                <div class="gcse-search"></div>
            </li>
            <li>
                <button id="dark-mode-button" aria-label="Toggle dark mode"></button>
            </li>
        </ul>
    </nav>
    <div class="sandbox">
        <div class="wrap">
            <h1>Suma liczb</h1>
            <p class="intro-text">Wczytaj N liczb i wypisz ich sume.</p>
            
            <div class="task-description">
                <div class="task-meta">
                    <span class="difficulty-badge">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                        </svg>
                        Difficulty: Easy
                    </span>
                    <a href="../index.html">← Back to course</a>
                </div>
                <div class="task-section">
                    <h2>Problem</h2>
                    <p>Masz podana liczbe N oraz N liczb calkowitych. Oblicz ich sume.</p>
                    <h3>Input</h3>
                    <p>Pierwsza linia: N. Druga linia: N liczb calkowitych.</p>
                    <h3>Output</h3>
                    <p>Jedna liczba: suma podanych liczb.</p>
                    <h3>Examples</h3>
                    <pre>Input:
3
1 2 3

Output:
6

---

Input:
4
10 20 30 40

Output:
100</pre>
                </div>
            </div>

            <div class="row">
                <div class="editor-container">
                    <label class="editor-label">Your Python (either define <code>solve(s: str) -&gt; str</code> or use <code>input()</code>/<code>print()</code>):</label>
                    <textarea id="code" aria-label="Python code editor"></textarea>
                    <div class="controls">
                        <button id="run-public" class="primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            Run public tests
                        </button>
                        <button id="run-hidden">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                                <path d="M21 12c-2.4 4-6 7-11 7s-8.6-3-11-7c2.4-4 6-7 11-7s8.6 3 11 7z"/>
                            </svg>
                            Run hidden tests
                        </button>
                        <button id="format">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 019-9 9.75 9.75 0 016.74 2.74L21 8"/>
                                <path d="M21 3v5h-5"/>
                            </svg>
                            Reset to stub
                        </button>
                        <span id="status" class="status-indicator">Pyodide loading…</span>
                    </div>
                </div>
                <div>
                    <div class="panel">
                        <div class="panel-header">
                            <strong>Public tests</strong>
                            <button id="add-test">+ Add test</button>
                        </div>
                        <div id="tests" class="tests"></div>
                        <p class="muted" style="margin-top:12px">Hidden tests only run locally in the worker and aren't shown here.</p>
                    </div>
                    <div class="spacer-md"></div>
                    <div class="panel">
                        <div class="panel-header">
                            <strong>Results</strong>
                        </div>
                        <div id="log" class="log"></div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            /* ================= Worker source (CLASSIC; no backticks inside) ================= */
            const WORKER_SRC =
                "self.importScripts('https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js');\n\
\n\
const TESTS_HIDDEN = JSON.parse(atob('__HIDDEN_B64__'));\n\
let pyodide;\n\
const ready = (async () => {\n\
  pyodide = await loadPyodide({ indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.24.1/full/' });\n\
})();\n\
\n\
function buildProgram() {\n\
  return [\n\
    'import sys, io, json, traceback, re',\n\
    'from dataclasses import dataclass',\n\
    '',\n\
    '@dataclass',\n\
    'class Case:',\n\
    '    input: str',\n\
    '    expected: str',\n\
    '',\n\
    'PY = PY_PAYLOAD',\n\
    \"USER_CODE = PY['code']\",\n\
    'TESTS = [Case(**t) for t in PY[\\'tests\\']]',\n\
    '',\n\
    'def _norm(s: str) -> str:',\n\
    '    if s is None:',\n\
    \"        return ''\",\n\
    \"    return str(s).replace('\\\\r\\\\n', '\\\\n').rstrip()\",\n\
    '',\n\
    'import types',\n\
    \"is_func = bool(re.search(r'^\\\\s*def\\\\s+solve\\\\s*\\\\(', USER_CODE, re.M))\",\n\
    'ns = {}',\n\
    'if is_func:',\n\
    '    # Safe to exec once to define solve (won\\'t call input here)',\n\
    '    exec(USER_CODE, ns)',\n\
    '',\n\
    'results = []',\n\
    'for i, t in enumerate(TESTS):',\n\
    '    ok = False',\n\
    \"    out = ''\",\n\
    \"    err = ''\",\n\
    '    try:',\n\
    '        if is_func and \"solve\" in ns and isinstance(ns[\"solve\"], types.FunctionType):',\n\
    '            out = ns[\"solve\"](t.input)',\n\
    \"            out = '' if out is None else str(out)\",\n\
    '        else:',\n\
    '            # Script-style: patch stdio before exec so input()/print() work',\n\
    '            stdin, stdout = io.StringIO(t.input), io.StringIO()',\n\
    '            _in, _out = sys.stdin, sys.stdout',\n\
    '            sys.stdin, sys.stdout = stdin, stdout',\n\
    '            try:',\n\
    '                exec(USER_CODE, {})',\n\
    '            finally:',\n\
    '                sys.stdin, sys.stdout = _in, _out',\n\
    '            out = stdout.getvalue()',\n\
    '        ok = _norm(out) == _norm(t.expected)',\n\
    '    except Exception as e:',\n\
    '        err = traceback.format_exc()',\n\
    \"    results.append({'i': i, 'ok': ok, 'out': out, 'exp': t.expected, 'err': err})\",\n\
    '',\n\
    '# Return JSON as the last expression (no print) so JS can JSON.parse(...)',\n\
    \"json.dumps({'results': results})\",\n\
  ].join('\\n');\n\
}\n\
\n\
async function run(code, tests) {\n\
  await ready;\n\
  // Convert JS object to a real Python object BEFORE running code\n\
  const payloadPy = pyodide.toPy({ code, tests });\n\
  try {\n\
    pyodide.globals.set('PY_PAYLOAD', payloadPy);\n\
    const program = buildProgram();\n\
    const raw = await pyodide.runPythonAsync(program); // returns string (last expr)\n\
    return JSON.parse(raw);\n\
  } finally {\n\
    try { payloadPy.destroy(); } catch (e) {}\n\
    try { pyodide.globals.delete && pyodide.globals.delete('PY_PAYLOAD'); } catch (e) {}\n\
  }\n\
}\n\
\n\
self.addEventListener('message', async (ev) => {\n\
  const { type, code, tests } = ev.data || {};\n\
  if (type === 'run') {\n\
    try {\n\
      const res = await run(code, tests === 'hidden' ? TESTS_HIDDEN : tests);\n\
      self.postMessage({ type: 'done', ok: true, res });\n\
    } catch (e) {\n\
      self.postMessage({ type: 'done', ok: false, error: String((e && e.message) || e) });\n\
    }\n\
  } else if (type === 'ping') {\n\
    await ready; // only signal ready after Pyodide loaded\n\
    self.postMessage({ type: 'pong' });\n\
  }\n\
});\n";

            /* ================= Test data ================= */
            const PUBLIC_TESTS = [{
                    "input": "3\n1 2 3\n",
                    "expected": "6"
                },
                {
                    "input": "2\n100 100\n",
                    "expected": "200"
                },
                {
                    "input": "1\n42\n",
                    "expected": "42"
                }
            ];

            const HIDDEN_TESTS = [{
                    "input": "1\n-5\n",
                    "expected": "-5"
                },
                {
                    "input": "5\n0 0 0 0 0\n",
                    "expected": "0"
                }
            ];

            const HIDDEN_B64 = btoa(JSON.stringify(HIDDEN_TESTS));

            /* ================= UI wiring ================= */
            const codeEl = document.getElementById('code');
            const logEl = document.getElementById('log');
            const testsEl = document.getElementById('tests');
            const statusEl = document.getElementById('status');

            function setStatus(text) {
                statusEl.textContent = text;
            }

            function escapeHtml(s) {
                return (s || '').replace(/[&<>]/g, c => ({
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;'
                } [c]));
            }

            function appendLog(html) {
                const div = document.createElement('div');
                div.innerHTML = html;
                logEl.appendChild(div);
                logEl.scrollTop = logEl.scrollHeight;
            }

            function clearLog() {
                logEl.innerHTML = '';
            }

            function renderTests() {
                testsEl.innerHTML = '';
                PUBLIC_TESTS.forEach((t, idx) => {
                    const el = document.createElement('div');
                    el.className = 'test';
                    el.innerHTML = `<div class="test-header">
            <strong>Case #${idx+1}</strong>
            <button data-idx="${idx}" class="del">Delete</button>
          </div>
          <div class="test-label">Input</div>
          <pre contenteditable spellcheck="false" class="in">${t.input.replace(/</g,'&lt;')}</pre>
          <div class="test-label">Expected output</div>
          <pre contenteditable spellcheck="false" class="exp">${t.expected.replace(/</g,'&lt;')}</pre>`;
                    testsEl.appendChild(el);
                    el.querySelector('.del').onclick = () => {
                        PUBLIC_TESTS.splice(idx, 1);
                        renderTests();
                    };
                    const inEl = el.querySelector('.in');
                    const expEl = el.querySelector('.exp');
                    const save = () => {
                        PUBLIC_TESTS[idx] = {
                            input: inEl.textContent,
                            expected: expEl.textContent
                        };
                    };
                    inEl.oninput = expEl.oninput = save;
                });
            }
            renderTests();

            /* ================= Default stub code ================= */
            const STUB = `# Wczytaj N liczb i wypisz ich sume.
# Mozesz zdefiniowac solve(s) lub uzyc input()/print().

# def solve(s: str) -> str:
#     data = list(map(int, s.split()))
#     n, nums = data[0], data[1:]
#     return str(sum(nums[:n]))

# n = int(input().strip())
# nums = list(map(int, input().split()))
# print(sum(nums[:n]))`;
            codeEl.value = STUB;

            document.getElementById('format').onclick = () => {
                codeEl.value = STUB;
            };
            document.getElementById('add-test').onclick = () => {
                PUBLIC_TESTS.push({
                    input: '',
                    expected: ''
                });
                renderTests();
            };

            /* ================= Worker factory (CLASSIC) ================= */
            function createWorker() {
                const src = WORKER_SRC.replace('__HIDDEN_B64__', HIDDEN_B64);
                const blob = new Blob([src], {
                    type: 'text/javascript'
                });
                const url = URL.createObjectURL(blob);
                const w = new Worker(url); // classic worker (no { type: 'module' })
                w.addEventListener('error', (e) => {
                    appendLog(`<span class="badge fail">WORKER ERROR</span> ${escapeHtml(e.message || String(e))}`);
                    setStatus('Error');
                });
                return w;
            }

            let worker = createWorker();

            /* ================= Heartbeat ================= */
            setStatus('Pyodide loading…');
            const ping = setInterval(() => {
                try {
                    worker.postMessage({
                        type: 'ping'
                    });
                } catch {}
            }, 1200);

            worker.addEventListener('message', (ev) => {
                if (ev.data && ev.data.type === 'pong') {
                    clearInterval(ping);
                    setStatus('Ready');
                }
            });

            /* ================= Runner ================= */
            function run(kind) {
                clearLog();
                setStatus('Running ' + kind + ' tests…');
                const code = codeEl.value;

                if (worker) {
                    try {
                        worker.terminate();
                    } catch {}
                }
                worker = createWorker();

                let killed = false;
                const MAX_MS = Math.min(15000, 2500 * (kind === 'hidden' ? 5 : PUBLIC_TESTS.length || 1));
                const timer = setTimeout(() => {
                    killed = true;
                    try {
                        worker.terminate();
                    } catch {}
                    setStatus('Timed out');
                    appendLog(`<span class="badge fail">TIME LIMIT</span> Your program exceeded ${MAX_MS}ms.`);
                }, MAX_MS);

                worker.addEventListener('message', (ev) => {
                    const {
                        type,
                        ok,
                        res,
                        error
                    } = ev.data || {};
                    if (type === 'done' && !killed) {
                        clearTimeout(timer);
                        if (!ok) {
                            setStatus('Error');
                            appendLog(`<span class="badge fail">ERROR</span> ${escapeHtml(error)}`);
                            return;
                        }
                        const results = res.results || [];
                        const passed = results.filter(r => r.ok).length;
                        setStatus(`Done • ${passed}/${results.length} passed`);
                        results.forEach((r, i) => {
                            const badge = r.ok ? '<span class="badge pass">PASS</span>' : '<span class="badge fail">FAIL</span>';
                            let html = `${badge} Case #${i+1}`;
                            if (!r.ok) {
                                html += `\n<pre>Expected:\n${escapeHtml(r.exp)}\n\nGot:\n${escapeHtml(r.out || '')}\n</pre>`;
                                if (r.err) html += `\n<pre>Traceback:\n${escapeHtml(r.err)}\n</pre>`;
                            }
                            appendLog(html);
                        });
                    }
                });

                worker.postMessage({
                    type: 'run',
                    code,
                    tests: kind === 'hidden' ? 'hidden' : PUBLIC_TESTS
                });
            }

            document.getElementById('run-public').onclick = () => run('public');
            document.getElementById('run-hidden').onclick = () => run('hidden');
        </script>
    </div>
    </div>
    <script src="../../../app.js"></script>
    <footer>
        <div class="footer-columns">
            <div class="footer-column">
                <img src="https://raw.githubusercontent.com/djeada/Personal-Website/master/images/symbol.png" alt="Adam Djellouli Symbol">
            </div>
            <div class="footer-column">
                <h2><a href="https://adamdjellouli.com/core/privacy_policy.html" title="Privacy Policy">Our Privacy Policy</a></h2>
                <p>Thank you for visiting my personal website. All content here is free to use, but please remember to be respectful and avoid any misuse of the site. If you’d like to get in touch, feel free to reach out via my <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" title="LinkedIn Profile">LinkedIn profile</a> or connect with me on <a href="https://github.com/djeada" title="GitHub Profile">GitHub</a> if you have technical questions or ideas to share. Wishing you all the best and a fantastic life ahead!</p>
            </div>
            <div class="footer-column">
                <h2>Follow me</h2>
                <ul class="social-media">
                    <li>
                        <a href="https://www.youtube.com/channel/UCGPoHTVjMN77wcGknXPHl1Q" class="fa fa-youtube" target="_blank" title="YouTube">
                        </a>YouTube
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/adam-djellouli-1bb54619a/" class="fa fa-linkedin" target="_blank" title="LinkedIn">
                        </a>LinkedIn
                    </li>
                    <li>
                        <a href="https://www.instagram.com/linuxchallenges/" class="fa fa-instagram" target="_blank" title="Instagram">
                        </a>Instagram
                    </li>
                    <li>
                        <a href="https://github.com/djeada" class="fa fa-github" title="GitHub">
                        </a>Github
                    </li>
                </ul>
            </div>
        </div>
        <div>
            <p id="copyright">
                &copy; Adam Djellouli. All rights reserved.
            </p>
        </div>
        <script>
            document.getElementById("copyright").innerHTML = "&copy; " + new Date().getFullYear() + " Adam Djellouli. All rights reserved.";
        </script>
        <script src="../../../app.js"></script>
    </footer>
</body>

</html>